(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.CodeMirror=a())}(this,(function(){var eh=navigator.userAgent;var es=navigator.platform;var cB=/gecko\/\d/i.test(eh);var fa=/MSIE \d/.test(eh);var bS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(eh);var cP=/Edge\/(\d+)/.exec(eh);var dY=fa||bS||cP;var l=dY&&(fa?document.documentMode||6:+(cP||bS)[1]);var dd=!cP&&/WebKit\//.test(eh);var d1=dd&&/Qt\/\d+\.\d+/.test(eh);var ds=!cP&&/Chrome\//.test(eh);var ej=/Opera\//.test(eh);var aE=/Apple Computer/.test(navigator.vendor);var dk=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(eh);var fU=/PhantomJS/.test(eh);var fs=!cP&&/AppleWebKit/.test(eh)&&/Mobile\/\w+/.test(eh);var aP=/Android/.test(eh);var ey=fs||aP||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(eh);var ch=fs||/Mac/.test(es);var gd=/\bCrOS\b/.test(eh);var aS=/win/i.test(es);var a2=ej&&eh.match(/Version\/(\d*\.\d*)/);if(a2){a2=Number(a2[1])}if(a2&&a2>=15){ej=false;dd=true}var bZ=ch&&(d1||ej&&(a2==null||a2<12.11));var gL=cB||(dY&&l>=9);function T(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var h=function(gW,i){var gX=gW.className;var gV=T(i).exec(gX);if(gV){var gY=gX.slice(gV.index+gV[0].length);gW.className=gX.slice(0,gV.index)+(gY?gV[1]+gY:"")}};function ei(gV){for(var i=gV.childNodes.length;i>0;--i){gV.removeChild(gV.firstChild)}return gV}function b1(i,gV){return ei(i).appendChild(gV)}function gC(gV,gZ,gY,gX){var g0=document.createElement(gV);if(gY){g0.className=gY}if(gX){g0.style.cssText=gX}if(typeof gZ=="string"){g0.appendChild(document.createTextNode(gZ))}else{if(gZ){for(var gW=0;gW<gZ.length;++gW){g0.appendChild(gZ[gW])}}}return g0}function gI(i,gX,gW,gV){var gY=gC(i,gX,gW,gV);gY.setAttribute("role","presentation");return gY}var cy;if(document.createRange){cy=function(gX,gY,gV,i){var gW=document.createRange();gW.setEnd(i||gX,gV);gW.setStart(gX,gY);return gW}}else{cy=function(gW,gY,i){var gV=document.body.createTextRange();try{gV.moveToElementText(gW.parentNode)}catch(gX){return gV}gV.collapse(true);gV.moveEnd("character",i);gV.moveStart("character",gY);return gV}}function gM(i,gV){if(gV.nodeType==3){gV=gV.parentNode}if(i.contains){return i.contains(gV)}do{if(gV.nodeType==11){gV=gV.host}if(gV==i){return true}}while(gV=gV.parentNode)}function d2(){var i;try{i=document.activeElement}catch(gV){i=document.body||null}while(i&&i.shadowRoot&&i.shadowRoot.activeElement){i=i.shadowRoot.activeElement}return i}function f3(gV,i){var gW=gV.className;if(!T(i).test(gW)){gV.className+=(gW?" ":"")+i}}function gs(gX,gV){var gW=gX.split(" ");for(var gY=0;gY<gW.length;gY++){if(gW[gY]&&!T(gW[gY]).test(gV)){gV+=" "+gW[gY]}}return gV}var dZ=function(i){i.select()};if(fs){dZ=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(dY){dZ=function(gV){try{gV.select()}catch(i){}}}}function cI(gV){var i=Array.prototype.slice.call(arguments,1);return function(){return gV.apply(null,i)}}function aQ(gW,gV,i){if(!gV){gV={}}for(var gX in gW){if(gW.hasOwnProperty(gX)&&(i!==false||!gV.hasOwnProperty(gX))){gV[gX]=gW[gX]}}return gV}function b0(gY,gW,g0,g1,gX){if(gW==null){gW=gY.search(/[^\s\u00a0]/);if(gW==-1){gW=gY.length}}for(var gZ=g1||0,g2=gX||0;;){var gV=gY.indexOf("\t",gZ);if(gV<0||gV>=gW){return g2+(gW-gZ)}g2+=gV-gZ;g2+=g0-(g2%g0);gZ=gV+1}}var gU=function(){this.id=null};gU.prototype.set=function(i,gV){clearTimeout(this.id);this.id=setTimeout(gV,i)};function dy(gX,gV){for(var gW=0;gW<gX.length;++gW){if(gX[gW]==gV){return gW}}return -1}var dX=30;var cm={toString:function(){return"CodeMirror.Pass"}};var ab={scroll:false};var N={origin:"*mouse"};var c9={origin:"+move"};function eK(gY,gX,gZ){for(var g0=0,gW=0;;){var gV=gY.indexOf("\t",g0);if(gV==-1){gV=gY.length}var i=gV-g0;if(gV==gY.length||gW+i>=gX){return g0+Math.min(i,gX-gW)}gW+=gV-g0;gW+=gZ-(gW%gZ);g0=gV+1;if(gW>=gX){return g0}}}var a3=[""];function cC(i){while(a3.length<=i){a3.push(f9(a3)+" ")}return a3[i]}function f9(i){return i[i.length-1]}function b2(gY,gX){var gV=[];for(var gW=0;gW<gY.length;gW++){gV[gW]=gX(gY[gW],gW)}return gV}function ck(gY,gV,gW){var gX=0,i=gW(gV);while(gX<gY.length&&gW(gY[gX])<=i){gX++}gY.splice(gX,0,gV)}function gt(){}function cw(gW,i){var gV;if(Object.create){gV=Object.create(gW)}else{gt.prototype=gW;gV=new gt()}if(i){aQ(i,gV)}return gV}var bf=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function f6(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||bf.test(i))}function cN(i,gV){if(!gV){return f6(i)}if(gV.source.indexOf("\\w")>-1&&f6(i)){return true}return gV.test(i)}function fl(i){for(var gV in i){if(i.hasOwnProperty(gV)&&i[gV]){return false}}return true}var e9=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fP(i){return i.charCodeAt(0)>=768&&e9.test(i)}function eC(gV,gW,i){while((i<0?gW>0:gW<gV.length)&&fP(gV.charAt(gW))){gW+=i}return gW}function cz(i,gX,gW){for(;;){if(Math.abs(gX-gW)<=1){return i(gX)?gX:gW}var gV=Math.floor((gX+gW)/2);if(i(gV)){gW=gV}else{gX=gV}}}function e7(gV,gX,gW){var gY=this;this.input=gW;gY.scrollbarFiller=gC("div",null,"CodeMirror-scrollbar-filler");gY.scrollbarFiller.setAttribute("cm-not-content","true");gY.gutterFiller=gC("div",null,"CodeMirror-gutter-filler");gY.gutterFiller.setAttribute("cm-not-content","true");gY.lineDiv=gI("div",null,"CodeMirror-code");gY.selectionDiv=gC("div",null,null,"position: relative; z-index: 1");gY.cursorDiv=gC("div",null,"CodeMirror-cursors");gY.measure=gC("div",null,"CodeMirror-measure");gY.lineMeasure=gC("div",null,"CodeMirror-measure");gY.lineSpace=gI("div",[gY.measure,gY.lineMeasure,gY.selectionDiv,gY.cursorDiv,gY.lineDiv],null,"position: relative; outline: none");var i=gI("div",[gY.lineSpace],"CodeMirror-lines");gY.mover=gC("div",[i],null,"position: relative");gY.sizer=gC("div",[gY.mover],"CodeMirror-sizer");gY.sizerWidth=null;gY.heightForcer=gC("div",null,null,"position: absolute; height: "+dX+"px; width: 1px;");gY.gutters=gC("div",null,"CodeMirror-gutters");gY.lineGutter=null;gY.scroller=gC("div",[gY.sizer,gY.heightForcer,gY.gutters],"CodeMirror-scroll");gY.scroller.setAttribute("tabIndex","-1");gY.wrapper=gC("div",[gY.scrollbarFiller,gY.gutterFiller,gY.scroller],"CodeMirror");if(dY&&l<8){gY.gutters.style.zIndex=-1;gY.scroller.style.paddingRight=0}if(!dd&&!(cB&&ey)){gY.scroller.draggable=true}if(gV){if(gV.appendChild){gV.appendChild(gY.wrapper)}else{gV(gY.wrapper)}}gY.viewFrom=gY.viewTo=gX.first;gY.reportedViewFrom=gY.reportedViewTo=gX.first;gY.view=[];gY.renderedView=null;gY.externalMeasured=null;gY.viewOffset=0;gY.lastWrapHeight=gY.lastWrapWidth=0;gY.updateLineNumbers=null;gY.nativeBarWidth=gY.barHeight=gY.barWidth=0;gY.scrollbarsClipped=false;gY.lineNumWidth=gY.lineNumInnerWidth=gY.lineNumChars=null;gY.alignWidgets=false;gY.cachedCharWidth=gY.cachedTextHeight=gY.cachedPaddingH=null;gY.maxLine=null;gY.maxLineLength=0;gY.maxLineChanged=false;gY.wheelDX=gY.wheelDY=gY.wheelStartX=gY.wheelStartY=null;gY.shift=false;gY.selForContextMenu=null;gY.activeTouch=null;gW.init(gY)}function fG(gY,g0){g0-=gY.first;if(g0<0||g0>=gY.size){throw new Error("There is no line "+(g0+gY.first)+" in the document.")}var gV=gY;while(!gV.lines){for(var gW=0;;++gW){var gZ=gV.children[gW],gX=gZ.chunkSize();if(g0<gX){gV=gZ;break}g0-=gX}}return gV.lines[g0]}function gE(gW,gY,i){var gV=[],gX=gY.line;gW.iter(gY.line,i.line+1,function(gZ){var g0=gZ.text;if(gX==i.line){g0=g0.slice(0,i.ch)}if(gX==gY.line){g0=g0.slice(gY.ch)}gV.push(g0);++gX});return gV}function a5(gV,gX,gW){var i=[];gV.iter(gX,gW,function(gY){i.push(gY.text)});return i}function gH(gV,i){var gW=i-gV.height;if(gW){for(var gX=gV;gX;gX=gX.parent){gX.height+=gW}}}function bW(gV){if(gV.parent==null){return null}var gZ=gV.parent,gY=dy(gZ.lines,gV);for(var gW=gZ.parent;gW;gZ=gW,gW=gW.parent){for(var gX=0;;++gX){if(gW.children[gX]==gZ){break}gY+=gW.children[gX].chunkSize()}}return gY+gZ.first}function bQ(g1,g0){var gY=g1.first;outer:do{for(var gX=0;gX<g1.children.length;++gX){var gW=g1.children[gX],gV=gW.height;if(g0<gV){g1=gW;continue outer}g0-=gV;gY+=gW.chunkSize()}return gY}while(!g1.lines);var gZ=0;for(;gZ<g1.lines.length;++gZ){var g3=g1.lines[gZ],g2=g3.height;if(g0<g2){break}g0-=g2}return gY+gZ}function cj(gV,i){return i>=gV.first&&i<gV.first+gV.size}function eN(gV,gW){return String(gV.lineNumberFormatter(gW+gV.firstLineNumber))}function X(i,gV,gW){if(gW===void 0){gW=null}if(!(this instanceof X)){return new X(i,gV,gW)}this.line=i;this.ch=gV;this.sticky=gW}function cq(gV,i){return gV.line-i.line||gV.ch-i.ch}function Y(gV,i){return gV.sticky==i.sticky&&cq(gV,i)==0}function ct(i){return X(i.line,i.ch)}function bG(gV,i){return cq(gV,i)<0?i:gV}function at(gV,i){return cq(gV,i)<0?gV:i}function di(i,gV){return Math.max(i.first,Math.min(gV,i.first+i.size-1))}function ge(gV,gW){if(gW.line<gV.first){return X(gV.first,0)}var i=gV.first+gV.size-1;if(gW.line>i){return X(i,fG(gV,i).text.length)}return fS(gW,fG(gV,gW.line).text.length)}function fS(gW,gV){var i=gW.ch;if(i==null||i>gV){return X(gW.line,gV)}else{if(i<0){return X(gW.line,0)}else{return gW}}}function eg(gX,gY){var gV=[];for(var gW=0;gW<gY.length;gW++){gV[gW]=ge(gX,gY[gW])}return gV}var gP=false;var ba=false;function f1(){gP=true}function bF(){ba=true}function eB(i,gW,gV){this.marker=i;this.from=gW;this.to=gV}function fB(gX,gV){if(gX){for(var gW=0;gW<gX.length;++gW){var gY=gX[gW];if(gY.marker==gV){return gY}}}}function e6(gW,gX){var gY;for(var gV=0;gV<gW.length;++gV){if(gW[gV]!=gX){(gY||(gY=[])).push(gW[gV])}}return gY}function co(i,gV){i.markedSpans=i.markedSpans?i.markedSpans.concat([gV]):[gV];gV.marker.attachLine(i)}function aT(gW,gX,g1){var g2;if(gW){for(var gZ=0;gZ<gW.length;++gZ){var g3=gW[gZ],g0=g3.marker;var gV=g3.from==null||(g0.inclusiveLeft?g3.from<=gX:g3.from<gX);if(gV||g3.from==gX&&g0.type=="bookmark"&&(!g1||!g3.marker.insertLeft)){var gY=g3.to==null||(g0.inclusiveRight?g3.to>=gX:g3.to>gX);(g2||(g2=[])).push(new eB(g0,g3.from,gY?null:g3.to))}}}return g2}function aD(gW,gY,g1){var g2;if(gW){for(var gZ=0;gZ<gW.length;++gZ){var g3=gW[gZ],g0=g3.marker;var gX=g3.to==null||(g0.inclusiveRight?g3.to>=gY:g3.to>gY);if(gX||g3.from==gY&&g0.type=="bookmark"&&(!g1||g3.marker.insertLeft)){var gV=g3.from==null||(g0.inclusiveLeft?g3.from<=gY:g3.from<gY);(g2||(g2=[])).push(new eB(g0,gV?null:g3.from-gY,g3.to==null?null:g3.to-gY))}}}return g2}function eD(hg,g6){if(g6.full){return null}var gX=cj(hg,g6.from.line)&&fG(hg,g6.from.line).markedSpans;var g4=cj(hg,g6.to.line)&&fG(hg,g6.to.line).markedSpans;if(!gX&&!g4){return null}var g3=g6.from.ch,hb=g6.to.ch,g8=cq(g6.from,g6.to)==0;var g2=aT(gX,g3,g8);var g5=aD(g4,hb,g8);var g9=g6.text.length==1,g0=f9(g6.text).length+(g9?g3:0);if(g2){for(var he=0;he<g2.length;++he){var hd=g2[he];if(hd.to==null){var g7=fB(g5,hd.marker);if(!g7){hd.to=g3}else{if(g9){hd.to=g7.to==null?null:g7.to+g0}}}}}if(g5){for(var g1=0;g1<g5.length;++g1){var hc=g5[g1];if(hc.to!=null){hc.to+=g0}if(hc.from==null){var gW=fB(g2,hc.marker);if(!gW){hc.from=g0;if(g9){(g2||(g2=[])).push(hc)}}}else{hc.from+=g0;if(g9){(g2||(g2=[])).push(hc)}}}}if(g2){g2=r(g2)}if(g5&&g5!=g2){g5=r(g5)}var hf=[g2];if(!g9){var ha=g6.text.length-2,gV;if(ha>0&&g2){for(var gZ=0;gZ<g2.length;++gZ){if(g2[gZ].to==null){(gV||(gV=[])).push(new eB(g2[gZ].marker,null,null))}}}for(var gY=0;gY<ha;++gY){hf.push(gV)}hf.push(g5)}return hf}function r(gW){for(var gV=0;gV<gW.length;++gV){var gX=gW[gV];if(gX.from!=null&&gX.from==gX.to&&gX.marker.clearWhenEmpty!==false){gW.splice(gV--,1)}}if(!gW.length){return null}return gW}function cV(g7,g5,g6){var gZ=null;g7.iter(g5.line,g6.line+1,function(g8){if(g8.markedSpans){for(var g9=0;g9<g8.markedSpans.length;++g9){var ha=g8.markedSpans[g9].marker;if(ha.readOnly&&(!gZ||dy(gZ,ha)==-1)){(gZ||(gZ=[])).push(ha)}}}});if(!gZ){return null}var g0=[{from:g5,to:g6}];for(var g1=0;g1<gZ.length;++g1){var g2=gZ[g1],gX=g2.find(0);for(var gY=0;gY<g0.length;++gY){var gW=g0[gY];if(cq(gW.to,gX.from)<0||cq(gW.from,gX.to)>0){continue}var g4=[gY,1],gV=cq(gW.from,gX.from),g3=cq(gW.to,gX.to);if(gV<0||!g2.inclusiveLeft&&!gV){g4.push({from:gW.from,to:gX.from})}if(g3>0||!g2.inclusiveRight&&!g3){g4.push({from:gX.to,to:gW.to})}g0.splice.apply(g0,g4);gY+=g4.length-3}}return g0}function gK(gV){var gX=gV.markedSpans;if(!gX){return}for(var gW=0;gW<gX.length;++gW){gX[gW].marker.detachLine(gV)}gV.markedSpans=null}function dg(gV,gX){if(!gX){return}for(var gW=0;gW<gX.length;++gW){gX[gW].marker.attachLine(gV)}gV.markedSpans=gX}function v(i){return i.inclusiveLeft?-1:0}function b5(i){return i.inclusiveRight?1:0}function d6(gX,gV){var gZ=gX.lines.length-gV.lines.length;if(gZ!=0){return gZ}var gW=gX.find(),g0=gV.find();var i=cq(gW.from,g0.from)||v(gX)-v(gV);if(i){return -i}var gY=cq(gW.to,g0.to)||b5(gX)-b5(gV);if(gY){return gY}return gV.id-gX.id}function a9(gW,g0){var gV=ba&&gW.markedSpans,gZ;if(gV){for(var gY=(void 0),gX=0;gX<gV.length;++gX){gY=gV[gX];if(gY.marker.collapsed&&(g0?gY.from:gY.to)==null&&(!gZ||d6(gZ,gY.marker)<0)){gZ=gY.marker}}}return gZ}function ff(i){return a9(i,true)}function eR(i){return a9(i,false)}function z(g3,gX,g1,g2,gZ){var g6=fG(g3,gX);var gV=ba&&g6.markedSpans;if(gV){for(var gY=0;gY<gV.length;++gY){var gW=gV[gY];if(!gW.marker.collapsed){continue}var g5=gW.marker.find(0);var g4=cq(g5.from,g1)||v(gW.marker)-v(gZ);var g0=cq(g5.to,g2)||b5(gW.marker)-b5(gZ);if(g4>=0&&g0<=0||g4<=0&&g0>=0){continue}if(g4<=0&&(gW.marker.inclusiveRight&&gZ.inclusiveLeft?cq(g5.to,g1)>=0:cq(g5.to,g1)>0)||g4>=0&&(gW.marker.inclusiveRight&&gZ.inclusiveLeft?cq(g5.from,g2)<=0:cq(g5.from,g2)<0)){return true}}}}function y(gV){var i;while(i=ff(gV)){gV=i.find(-1,true).line}return gV}function cv(gV){var i;while(i=eR(gV)){gV=i.find(1,true).line}return gV}function g(gW){var i,gV;while(i=eR(gW)){gW=i.find(1,true).line;(gV||(gV=[])).push(gW)}return gV}function aZ(gX,gV){var i=fG(gX,gV),gW=y(i);if(i==gW){return gV}return bW(gW)}function ek(gX,gW){if(gW>gX.lastLine()){return gW}var gV=fG(gX,gW),i;if(!fW(gX,gV)){return gW}while(i=eR(gV)){gV=i.find(1,true).line}return bW(gV)+1}function fW(gZ,gW){var gV=ba&&gW.markedSpans;if(gV){for(var gY=(void 0),gX=0;gX<gV.length;++gX){gY=gV[gX];if(!gY.marker.collapsed){continue}if(gY.from==null){return true}if(gY.marker.widgetNode){continue}if(gY.from==0&&gY.marker.inclusiveLeft&&U(gZ,gW,gY)){return true}}}}function U(g0,gW,gY){if(gY.to==null){var gV=gY.marker.find(1,true);return U(g0,gV.line,fB(gV.line.markedSpans,gY.marker))}if(gY.marker.inclusiveRight&&gY.to==gW.text.length){return true}for(var gZ=(void 0),gX=0;gX<gW.markedSpans.length;++gX){gZ=gW.markedSpans[gX];if(gZ.marker.collapsed&&!gZ.marker.widgetNode&&gZ.from==gY.to&&(gZ.to==null||gZ.to!=gY.from)&&(gZ.marker.inclusiveLeft||gY.marker.inclusiveRight)&&U(g0,gW,gZ)){return true}}}function bV(gX){gX=y(gX);var gZ=0,gW=gX.parent;for(var gY=0;gY<gW.lines.length;++gY){var gV=gW.lines[gY];if(gV==gX){break}else{gZ+=gV.height}}for(var g0=gW.parent;g0;gW=g0,g0=gW.parent){for(var g2=0;g2<g0.children.length;++g2){var g1=g0.children[g2];if(g1==gW){break}else{gZ+=g1.height}}}return gZ}function eG(gW){if(gW.height==0){return 0}var gV=gW.text.length,i,gZ=gW;while(i=ff(gZ)){var gX=i.find(0,true);gZ=gX.from.line;gV+=gX.from.ch-gX.to.ch}gZ=gW;while(i=eR(gZ)){var gY=i.find(0,true);gV-=gZ.text.length-gY.from.ch;gZ=gY.to.line;gV+=gZ.text.length-gY.to.ch}return gV}function f(i){var gW=i.display,gV=i.doc;gW.maxLine=fG(gV,gV.first);gW.maxLineLength=eG(gW.maxLine);gW.maxLineChanged=true;gV.iter(function(gY){var gX=eG(gY);if(gX>gW.maxLineLength){gW.maxLineLength=gX;gW.maxLine=gY}})}function el(gV,g1,g0,gZ){if(!gV){return gZ(g1,g0,"ltr")}var gY=false;for(var gX=0;gX<gV.length;++gX){var gW=gV[gX];if(gW.from<g0&&gW.to>g1||g1==g0&&gW.to==g1){gZ(Math.max(gW.from,g1),Math.min(gW.to,g0),gW.level==1?"rtl":"ltr");gY=true}}if(!gY){gZ(g1,g0,"ltr")}}var fu=null;function aJ(gV,gX,gZ){var gY;fu=null;for(var gW=0;gW<gV.length;++gW){var g0=gV[gW];if(g0.from<gX&&g0.to>gX){return gW}if(g0.to==gX){if(g0.from!=g0.to&&gZ=="before"){gY=gW}else{fu=gW}}if(g0.from==gX){if(g0.from!=g0.to&&gZ!="before"){gY=gW}else{fu=gW}}}return gY!=null?gY:fu}var bl=(function(){var g0="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gY="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function gX(g3){if(g3<=247){return g0.charAt(g3)}else{if(1424<=g3&&g3<=1524){return"R"}else{if(1536<=g3&&g3<=1785){return gY.charAt(g3-1536)}else{if(1774<=g3&&g3<=2220){return"r"}else{if(8192<=g3&&g3<=8203){return"w"}else{if(g3==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var g2=/[stwN]/,gW=/[LRr]/,gV=/[Lb1n]/,gZ=/[1n]/;function g1(g5,g4,g3){this.level=g5;this.from=g4;this.to=g3}return function(hq,g6){var hf=g6=="ltr"?"L":"R";if(hq.length==0||g6=="ltr"&&!i.test(hq)){return false}var g9=hq.length,hz=[];for(var hC=0;hC<g9;++hC){hz.push(gX(hq.charCodeAt(hC)))}for(var hn=0,hm=hf;hn<g9;++hn){var hD=hz[hn];if(hD=="m"){hz[hn]=hm}else{hm=hD}}for(var hl=0,g5=hf;hl<g9;++hl){var hy=hz[hl];if(hy=="1"&&g5=="r"){hz[hl]="n"}else{if(gW.test(hy)){g5=hy;if(hy=="r"){hz[hl]="R"}}}}for(var hk=1,g4=hz[0];hk<g9-1;++hk){var hx=hz[hk];if(hx=="+"&&g4=="1"&&hz[hk+1]=="1"){hz[hk]="1"}else{if(hx==","&&g4==hz[hk+1]&&(g4=="1"||g4=="n")){hz[hk]=g4}}g4=hx}for(var hj=0;hj<g9;++hj){var hw=hz[hj];if(hw==","){hz[hj]="N"}else{if(hw=="%"){var g8=(void 0);for(g8=hj+1;g8<g9&&hz[g8]=="%";++g8){}var hd=(hj&&hz[hj-1]=="!")||(g8<g9&&hz[g8]=="1")?"1":"N";for(var hB=hj;hB<g8;++hB){hz[hB]=hd}hj=g8-1}}}for(var hi=0,hc=hf;hi<g9;++hi){var hu=hz[hi];if(hc=="L"&&hu=="1"){hz[hi]="L"}else{if(gW.test(hu)){hc=hu}}}for(var hh=0;hh<g9;++hh){if(g2.test(hz[hh])){var hr=(void 0);for(hr=hh+1;hr<g9&&g2.test(hz[hr]);++hr){}var ht=(hh?hz[hh-1]:hf)=="L";var hv=(hr<g9?hz[hr]:hf)=="L";var hp=ht==hv?(ht?"L":"R"):hf;for(var hb=hh;hb<hr;++hb){hz[hb]=hp}hh=hr-1}}var hs=[],hA;for(var hg=0;hg<g9;){if(gV.test(hz[hg])){var he=hg;for(++hg;hg<g9&&gV.test(hz[hg]);++hg){}hs.push(new g1(0,he,hg))}else{var ho=hg,g3=hs.length;for(++hg;hg<g9&&hz[hg]!="L";++hg){}for(var ha=ho;ha<hg;){if(gZ.test(hz[ha])){if(ho<ha){hs.splice(g3,0,new g1(1,ho,ha))}var g7=ha;for(++ha;ha<hg&&gZ.test(hz[ha]);++ha){}hs.splice(g3,0,new g1(2,g7,ha));ho=ha}else{++ha}}if(ho<hg){hs.splice(g3,0,new g1(1,ho,hg))}}}if(hs[0].level==1&&(hA=hq.match(/^\s+/))){hs[0].from=hA[0].length;hs.unshift(new g1(0,0,hA[0].length))}if(f9(hs).level==1&&(hA=hq.match(/\s+$/))){f9(hs).to-=hA[0].length;hs.push(new g1(0,g9-hA[0].length,g9))}return g6=="rtl"?hs.reverse():hs}})();function a(gV,gW){var i=gV.order;if(i==null){i=gV.order=bl(gV.text,gW)}return i}function bx(i,gW,gV){var gX=eC(i.text,gW+gV,gV);return gX<0||gX>i.text.length?null:gX}function ak(i,gX,gV){var gW=bx(i,gX.ch,gV);return gW==null?null:new X(gX.line,gW,gV<0?"after":"before")}function eW(gV,g3,g0,gZ,gX){if(gV){var gY=a(g0,g3.doc.direction);if(gY){var gW=gX<0?f9(gY):gY[0];var g5=(gX<0)==(gW.level==1);var g2=g5?"after":"before";var i;if(gW.level>0){var g1=a8(g3,g0);i=gX<0?g0.text.length-1:0;var g4=D(g3,g1,i).top;i=cz(function(g6){return D(g3,g1,g6).top==g4},(gX<0)==(gW.level==1)?gW.from:gW.to-1,i);if(g2=="before"){i=bx(g0,i,1,true)}}else{i=gX<0?gW.to:gW.from}return new X(gZ,i,g2)}}return new X(gZ,gX<0?g0.text.length:0,gX<0?"before":"after")}function u(g5,ha,gY,g1){var g7=a(ha,g5.doc.direction);if(!g7){return ak(ha,gY,g1)}if(gY.ch>=ha.text.length){gY.ch=ha.text.length;gY.sticky="before"}else{if(gY.ch<=0){gY.ch=0;gY.sticky="after"}}var gX=aJ(g7,gY.ch,gY.sticky),gZ=g7[gX];if(g5.doc.direction=="ltr"&&gZ.level%2==0&&(g1>0?gZ.to>gY.ch:gZ.from<gY.ch)){return ak(ha,gY,g1)}var g8=function(hc,hb){return bx(ha,hc instanceof X?hc.ch:hc,hb)};var g2;var g6=function(hb){if(!g5.options.lineWrapping){return{begin:0,end:ha.text.length}}g2=g2||a8(g5,ha);return br(g5,ha,g2,hb)};var g0=g6(gY.sticky=="before"?g8(gY,-1):gY.ch);if(g5.doc.direction=="rtl"||gZ.level==1){var g9=(gZ.level==1)==(g1<0);var gV=g8(gY,g9?1:-1);if(gV!=null&&(!g9?gV>=gZ.from&&gV>=g0.begin:gV<=gZ.to&&gV<=g0.end)){var g4=g9?"before":"after";return new X(gY.line,gV,g4)}}var gW=function(hb,he,hh){var hd=function(hj,hi){return hi?new X(gY.line,g8(hj,1),"before"):new X(gY.line,hj,"after")};for(;hb>=0&&hb<g7.length;hb+=he){var hc=g7[hb];var hf=(he>0)==(hc.level!=1);var hg=hf?hh.begin:g8(hh.end,-1);if(hc.from<=hg&&hg<hc.to){return hd(hg,hf)}hg=hf?hc.from:g8(hc.to,-1);if(hh.begin<=hg&&hg<hh.end){return hd(hg,hf)}}};var g3=gW(gX+g1,g1,g0);if(g3){return g3}var i=g1>0?g0.end:g8(g0.begin,-1);if(i!=null&&!(g1>0&&i==ha.text.length)){g3=gW(g1>0?0:g7.length-1,g1,g6(i));if(g3){return g3}}return null}var fx=[];var b6=function(gW,i,gV){if(gW.addEventListener){gW.addEventListener(i,gV,false)}else{if(gW.attachEvent){gW.attachEvent("on"+i,gV)}else{var gX=gW._handlers||(gW._handlers={});gX[i]=(gX[i]||fx).concat(gV)}}};function eE(gV,i){return gV._handlers&&gV._handlers[i]||fx}function ex(gY,gW,gX){if(gY.removeEventListener){gY.removeEventListener(gW,gX,false)}else{if(gY.detachEvent){gY.detachEvent("on"+gW,gX)}else{var gZ=gY._handlers,i=gZ&&gZ[gW];if(i){var gV=dy(i,gX);if(gV>-1){gZ[gW]=i.slice(0,gV).concat(i.slice(gV+1))}}}}}function aG(gZ,gY){var gV=eE(gZ,gY);if(!gV.length){return}var gW=Array.prototype.slice.call(arguments,2);for(var gX=0;gX<gV.length;++gX){gV[gX].apply(null,gW)}}function aU(i,gW,gV){if(typeof gW=="string"){gW={type:gW,preventDefault:function(){this.defaultPrevented=true}}}aG(i,gV||gW.type,i,gW);return bU(gW)||gW.codemirrorIgnore}function W(gW){var gV=gW._handlers&&gW._handlers.cursorActivity;if(!gV){return}var gY=gW.curOp.cursorActivityHandlers||(gW.curOp.cursorActivityHandlers=[]);for(var gX=0;gX<gV.length;++gX){if(dy(gY,gV[gX])==-1){gY.push(gV[gX])}}}function fL(gV,i){return eE(gV,i).length>0}function bI(i){i.prototype.on=function(gV,gW){b6(this,gV,gW)};i.prototype.off=function(gV,gW){ex(this,gV,gW)}}function cT(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function dF(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function bU(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function eL(i){cT(i);dF(i)}function M(i){return i.target||i.srcElement}function gj(gV){var i=gV.which;if(i==null){if(gV.button&1){i=1}else{if(gV.button&2){i=3}else{if(gV.button&4){i=2}}}}if(ch&&gV.ctrlKey&&i==1){i=3}return i}var fb=function(){if(dY&&l<9){return false}var i=gC("div");return"draggable" in i||"dragDrop" in i}();var gh;function bu(i){if(gh==null){var gW=gC("span","\u200b");b1(i,gC("span",[gW,document.createTextNode("x")]));if(i.firstChild.offsetHeight!=0){gh=gW.offsetWidth<=1&&gW.offsetHeight>2&&!(dY&&l<8)}}var gV=gh?gC("span","\u200b"):gC("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gV.setAttribute("cm-text","");return gV}var gi;function bX(gX){if(gi!=null){return gi}var i=b1(gX,document.createTextNode("A\u062eA"));var gW=cy(i,0,1).getBoundingClientRect();var gV=cy(i,1,2).getBoundingClientRect();ei(gX);if(!gW||gW.left==gW.right){return false}return gi=(gV.right-gW.right<3)}var go="\n\nb".split(/\n/).length!=3?function(gZ){var g0=0,i=[],gY=gZ.length;while(g0<=gY){var gX=gZ.indexOf("\n",g0);if(gX==-1){gX=gZ.length}var gW=gZ.slice(g0,gZ.charAt(gX-1)=="\r"?gX-1:gX);var gV=gW.indexOf("\r");if(gV!=-1){i.push(gW.slice(0,gV));g0+=gV+1}else{i.push(gW);g0=gX+1}}return i}:function(i){return i.split(/\r\n?|\n/)};var bA=window.getSelection?function(gV){try{return gV.selectionStart!=gV.selectionEnd}catch(i){return false}}:function(gW){var i;try{i=gW.ownerDocument.selection.createRange()}catch(gV){}if(!i||i.parentElement()!=gW){return false}return i.compareEndPoints("StartToEnd",i)!=0};var dp=(function(){var i=gC("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var fy=null;function aN(gV){if(fy!=null){return fy}var gW=b1(gV,gC("span","x"));var gX=gW.getBoundingClientRect();var i=cy(gW,0,1).getBoundingClientRect();return fy=Math.abs(gX.left-i.left)>1}var dH={};var aV={};function eO(i,gV){if(arguments.length>2){gV.dependencies=Array.prototype.slice.call(arguments,2)}dH[i]=gV}function bt(gV,i){aV[gV]=i}function gN(i){if(typeof i=="string"&&aV.hasOwnProperty(i)){i=aV[i]}else{if(i&&typeof i.name=="string"&&aV.hasOwnProperty(i.name)){var gV=aV[i.name];if(typeof gV=="string"){gV={name:gV}}i=cw(gV,i);i.name=gV.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return gN("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return gN("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function f2(gW,gV){gV=gN(gV);var gY=dH[gV.name];if(!gY){return f2(gW,"text/plain")}var gZ=gY(gW,gV);if(dE.hasOwnProperty(gV.name)){var gX=dE[gV.name];for(var g0 in gX){if(!gX.hasOwnProperty(g0)){continue}if(gZ.hasOwnProperty(g0)){gZ["_"+g0]=gZ[g0]}gZ[g0]=gX[g0]}}gZ.name=gV.name;if(gV.helperType){gZ.helperType=gV.helperType}if(gV.modeProps){for(var i in gV.modeProps){gZ[i]=gV.modeProps[i]}}return gZ}var dE={};function e1(gW,gV){var i=dE.hasOwnProperty(gW)?dE[gW]:(dE[gW]={});aQ(gV,i)}function cd(gX,i){if(i===true){return i}if(gX.copyState){return gX.copyState(i)}var gW={};for(var gY in i){var gV=i[gY];if(gV instanceof Array){gV=gV.concat([])}gW[gY]=gV}return gW}function gJ(gW,i){var gV;while(gW.innerMode){gV=gW.innerMode(i);if(!gV||gV.mode==gW){break}i=gV.state;gW=gV.mode}return gV||{mode:gW,state:i}}function ca(gW,gV,i){return gW.startState?gW.startState(gV,i):true}var fk=function(i,gV){this.pos=this.start=0;this.string=i;this.tabSize=gV||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};fk.prototype.eol=function(){return this.pos>=this.string.length};fk.prototype.sol=function(){return this.pos==this.lineStart};fk.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};fk.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};fk.prototype.eat=function(i){var gW=this.string.charAt(this.pos);var gV;if(typeof i=="string"){gV=gW==i}else{gV=gW&&(i.test?i.test(gW):i(gW))}if(gV){++this.pos;return gW}};fk.prototype.eatWhile=function(i){var gV=this.pos;while(this.eat(i)){}return this.pos>gV};fk.prototype.eatSpace=function(){var gV=this;var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++gV.pos}return this.pos>i};fk.prototype.skipToEnd=function(){this.pos=this.string.length};fk.prototype.skipTo=function(i){var gV=this.string.indexOf(i,this.pos);if(gV>-1){this.pos=gV;return true}};fk.prototype.backUp=function(i){this.pos-=i};fk.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=b0(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?b0(this.string,this.lineStart,this.tabSize):0)};fk.prototype.indentation=function(){return b0(this.string,null,this.tabSize)-(this.lineStart?b0(this.string,this.lineStart,this.tabSize):0)};fk.prototype.match=function(gY,gV,i){if(typeof gY=="string"){var gZ=function(g0){return i?g0.toLowerCase():g0};var gX=this.string.substr(this.pos,gY.length);if(gZ(gX)==gZ(gY)){if(gV!==false){this.pos+=gY.length}return true}}else{var gW=this.string.slice(this.pos).match(gY);if(gW&&gW.index>0){return null}if(gW&&gV!==false){this.pos+=gW[0].length}return gW}};fk.prototype.current=function(){return this.string.slice(this.start,this.pos)};fk.prototype.hideFirstChars=function(gV,i){this.lineStart+=gV;try{return i()}finally{this.lineStart-=gV}};function f0(i,gW,g0,gZ){var gY=[i.state.modeGen],gX={};w(i,gW.text,i.doc.mode,g0,function(g2,g3){return gY.push(g2,g3)},gX,gZ);var gV=function(g5){var g3=i.state.overlays[g5],g4=1,g2=0;w(i,gW.text,g3.mode,true,function(g6,g8){var ha=g4;while(g2<g6){var g7=gY[g4];if(g7>g6){gY.splice(g4,1,g6,gY[g4+1],g7)}g4+=2;g2=Math.min(g6,g7)}if(!g8){return}if(g3.opaque){gY.splice(ha,g4-ha,g6,"overlay "+g8);g4=ha+2}else{for(;ha<g4;ha+=2){var g9=gY[ha+1];gY[ha+1]=(g9?g9+" ":"")+"overlay "+g8}}},gX)};for(var g1=0;g1<i.state.overlays.length;++g1){gV(g1)}return{styles:gY,classes:gX.bgClass||gX.textClass?gX:null}}function dl(gV,gW,gY){if(!gW.styles||gW.styles[0]!=gV.state.modeGen){var gX=dQ(gV,bW(gW));var i=f0(gV,gW,gW.text.length>gV.options.maxHighlightLength?cd(gV.doc.mode,gX):gX);gW.stateAfter=gX;gW.styles=i.styles;if(i.classes){gW.styleClasses=i.classes}else{if(gW.styleClasses){gW.styleClasses=null}}if(gY===gV.doc.frontier){gV.doc.frontier++}}return gW.styles}function dQ(i,g0,gV){var gY=i.doc,gX=i.display;if(!gY.mode.startState){return true}var gZ=cL(i,g0,gV),gW=gZ>gY.first&&fG(gY,gZ-1).stateAfter;if(!gW){gW=ca(gY.mode)}else{gW=cd(gY.mode,gW)}gY.iter(gZ,g0,function(g1){dM(i,g1.text,gW);var g2=gZ==g0-1||gZ%5==0||gZ>=gX.viewFrom&&gZ<gX.viewTo;g1.stateAfter=g2?cd(gY.mode,gW):null;++gZ});if(gV){gY.frontier=gZ}return gW}function dM(i,gZ,gW,gV){var gY=i.doc.mode;var gX=new fk(gZ,i.options.tabSize);gX.start=gX.pos=gV||0;if(gZ==""){fQ(gY,gW)}while(!gX.eol()){eZ(gY,gX,gW);gX.start=gX.pos}}function fQ(gW,gV){if(gW.blankLine){return gW.blankLine(gV)}if(!gW.innerMode){return}var i=gJ(gW,gV);if(i.mode.blankLine){return i.mode.blankLine(i.state)}}function eZ(g0,gZ,gY,gV){for(var gW=0;gW<10;gW++){if(gV){gV[0]=gJ(g0,gY).mode}var gX=g0.token(gZ,gY);if(gZ.pos>gZ.start){return gX}}throw new Error("Mode "+g0.name+" failed to advance stream.")}function cD(g3,g1,gY,gX){var i=function(g6){return({start:g4.start,end:g4.pos,string:g4.current(),type:gW||null,state:g6?cd(g2.mode,gV):gV})};var g2=g3.doc,gZ=g2.mode,gW;g1=ge(g2,g1);var g5=fG(g2,g1.line),gV=dQ(g3,g1.line,gY);var g4=new fk(g5.text,g3.options.tabSize),g0;if(gX){g0=[]}while((gX||g4.pos<g1.ch)&&!g4.eol()){g4.start=g4.pos;gW=eZ(gZ,g4,gV);if(gX){g0.push(i(true))}}return gX?g0:i()}function dz(gW,gV){if(gW){for(;;){var i=gW.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}gW=gW.slice(0,i.index)+gW.slice(i.index+i[0].length);var gX=i[1]?"bgClass":"textClass";if(gV[gX]==null){gV[gX]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(gV[gX])){gV[gX]+=" "+i[2]}}}}return gW}function w(g4,g6,gZ,gV,g0,gX,gY){var gW=gZ.flattenSpans;if(gW==null){gW=g4.options.flattenSpans}var g2=0,g1=null;var g5=new fk(g6,g4.options.tabSize),i;var g8=g4.options.addModeClass&&[null];if(g6==""){dz(fQ(gZ,gV),gX)}while(!g5.eol()){if(g5.pos>g4.options.maxHighlightLength){gW=false;if(gY){dM(g4,g6,gV,g5.pos)}g5.pos=g6.length;i=null}else{i=dz(eZ(gZ,g5,gV,g8),gX)}if(g8){var g7=g8[0].name;if(g7){i="m-"+(i?g7+" "+i:g7)}}if(!gW||g1!=i){while(g2<g5.start){g2=Math.min(g5.start,g2+5000);g0(g2,g1)}g1=i}g5.start=g5.pos}while(g2<g5.pos){var g3=Math.min(g5.pos,g2+5000);g0(g3,g1);g2=g3}}function cL(g0,i,gX){var gV,gY,gZ=g0.doc;var gW=gX?-1:i-(g0.doc.mode.innerMode?1000:100);for(var g3=i;g3>gW;--g3){if(g3<=gZ.first){return gZ.first}var g2=fG(gZ,g3-1);if(g2.stateAfter&&(!gX||g3<=gZ.frontier)){return g3}var g1=b0(g2.text,null,g0.options.tabSize);if(gY==null||gV>g1){gY=g3-1;gV=g1}}return gY}var gG=function(gW,gV,i){this.text=gW;dg(this,gV);this.height=i?i(this):1};gG.prototype.lineNo=function(){return bW(this)};bI(gG);function eH(gV,gY,gW,i){gV.text=gY;if(gV.stateAfter){gV.stateAfter=null}if(gV.styles){gV.styles=null}if(gV.order!=null){gV.order=null}gK(gV);dg(gV,gW);var gX=i?i(gV):1;if(gX!=gV.height){gH(gV,gX)}}function bK(i){i.parent=null;gK(i)}var eb={};var cc={};function fn(gW,gV){if(!gW||/^\s*$/.test(gW)){return null}var i=gV.addModeClass?cc:eb;return i[gW]||(i[gW]=gW.replace(/\S+/g,"cm-$&"))}function fi(g1,g0){var gZ=gI("span",null,null,dd?"padding-right: .1px":null);var gY={pre:gI("pre",[gZ],"CodeMirror-line"),content:gZ,col:0,pos:0,cm:g1,trailingSpace:false,splitSpaces:(dY||dd)&&g1.getOption("lineWrapping")};g0.measure={};for(var gX=0;gX<=(g0.rest?g0.rest.length:0);gX++){var g3=gX?g0.rest[gX-1]:g0.line,gW=(void 0);gY.pos=0;gY.addToken=t;if(bX(g1.display.measure)&&(gW=a(g3,g1.doc.direction))){gY.addToken=V(gY.addToken,gW)}gY.map=[];var gV=g0!=g1.display.externalMeasured&&bW(g3);bv(g3,gY,dl(g1,g3,gV));if(g3.styleClasses){if(g3.styleClasses.bgClass){gY.bgClass=gs(g3.styleClasses.bgClass,gY.bgClass||"")}if(g3.styleClasses.textClass){gY.textClass=gs(g3.styleClasses.textClass,gY.textClass||"")}}if(gY.map.length==0){gY.map.push(0,0,gY.content.appendChild(bu(g1.display.measure)))}if(gX==0){g0.measure.map=gY.map;g0.measure.cache={}}else{(g0.measure.maps||(g0.measure.maps=[])).push(gY.map);(g0.measure.caches||(g0.measure.caches=[])).push({})}}if(dd){var g2=gY.content.lastChild;if(/\bcm-tab\b/.test(g2.className)||(g2.querySelector&&g2.querySelector(".cm-tab"))){gY.content.className="cm-tab-wrap-hack"}}aG(g1,"renderLine",g1,g0.line,gY.pre);if(gY.pre.className){gY.textClass=gs(gY.pre.className,gY.textClass||"")}return gY}function fF(gV){var i=gC("span","\u2022","cm-invalidchar");i.title="\\u"+gV.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function t(g5,g0,ha,g7,g3,hd,gZ){if(!g0){return}var g9=g5.splitSpaces?cS(g0,g5.trailingSpace):g0;var i=g5.cm.state.specialChars,gV=false;var g8;if(!i.test(g0)){g5.col+=g0.length;g8=document.createTextNode(g9);g5.map.push(g5.pos,g5.pos+g0.length,g8);if(dY&&l<9){gV=true}g5.pos+=g0.length}else{g8=document.createDocumentFragment();var gX=0;while(true){i.lastIndex=gX;var g6=i.exec(g0);var hc=g6?g6.index-gX:g0.length-gX;if(hc){var g2=document.createTextNode(g9.slice(gX,gX+hc));if(dY&&l<9){g8.appendChild(gC("span",[g2]))}else{g8.appendChild(g2)}g5.map.push(g5.pos,g5.pos+hc,g2);g5.col+=hc;g5.pos+=hc}if(!g6){break}gX+=hc+1;var hb=(void 0);if(g6[0]=="\t"){var g4=g5.cm.options.tabSize,g1=g4-g5.col%g4;hb=g8.appendChild(gC("span",cC(g1),"cm-tab"));hb.setAttribute("role","presentation");hb.setAttribute("cm-text","\t");g5.col+=g1}else{if(g6[0]=="\r"||g6[0]=="\n"){hb=g8.appendChild(gC("span",g6[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));hb.setAttribute("cm-text",g6[0]);g5.col+=1}else{hb=g5.cm.options.specialCharPlaceholder(g6[0]);hb.setAttribute("cm-text",g6[0]);if(dY&&l<9){g8.appendChild(gC("span",[hb]))}else{g8.appendChild(hb)}g5.col+=1}}g5.map.push(g5.pos,g5.pos+1,hb);g5.pos++}}g5.trailingSpace=g9.charCodeAt(g0.length-1)==32;if(ha||g7||g3||gV||gZ){var gW=ha||"";if(g7){gW+=g7}if(g3){gW+=g3}var gY=gC("span",[g8],gW,gZ);if(hd){gY.title=hd}return g5.content.appendChild(gY)}g5.content.appendChild(g8)}function cS(g0,gZ){if(g0.length>1&&!/  /.test(g0)){return g0}var gW=gZ,gV="";for(var gX=0;gX<g0.length;gX++){var gY=g0.charAt(gX);if(gY==" "&&gW&&(gX==g0.length-1||g0.charCodeAt(gX+1)==32)){gY="\u00a0"}gV+=gY;gW=gY==" "}return gV}function V(gV,i){return function(g3,g5,gW,g0,g6,g4,g2){gW=gW?gW+" cm-force-border":"cm-force-border";var gX=g3.pos,gZ=gX+g5.length;for(;;){var gY=(void 0);for(var g1=0;g1<i.length;g1++){gY=i[g1];if(gY.to>gX&&gY.from<=gX){break}}if(gY.to>=gZ){return gV(g3,g5,gW,g0,g6,g4,g2)}gV(g3,g5.slice(0,gY.to-gX),gW,g0,null,g4,g2);g0=null;g5=g5.slice(gY.to-gX);gX=gY.to}}}function af(gV,gX,i,gW){var gY=!gW&&i.widgetNode;if(gY){gV.map.push(gV.pos,gV.pos+gX,gY)}if(!gW&&gV.cm.display.input.needsContentAttribute){if(!gY){gY=gV.content.appendChild(document.createElement("span"))}gY.setAttribute("cm-marker",i.id)}if(gY){gV.cm.display.input.setUneditable(gY);gV.content.appendChild(gY)}gV.pos+=gX;gV.trailingSpace=false}function bv(g6,hd,g5){var g0=g6.markedSpans,g3=g6.text,hb=0;if(!g0){for(var g1=1;g1<g5.length;g1+=2){hd.addToken(hd,g3.slice(hb,hb=g5[g1]),fn(g5[g1+1],hd.cm.options))}return}var hh=g3.length,gZ=0,hg=1,g9="",hi,g7;var hm=0,gV,hl,ha,hn,gX;for(;;){if(hm==gZ){gV=hl=ha=hn=g7="";gX=null;hm=Infinity;var g2=[],g4=(void 0);for(var he=0;he<g0.length;++he){var hf=g0[he],hc=hf.marker;if(hc.type=="bookmark"&&hf.from==gZ&&hc.widgetNode){g2.push(hc)}else{if(hf.from<=gZ&&(hf.to==null||hf.to>gZ||hc.collapsed&&hf.to==gZ&&hf.from==gZ)){if(hf.to!=null&&hf.to!=gZ&&hm>hf.to){hm=hf.to;hl=""}if(hc.className){gV+=" "+hc.className}if(hc.css){g7=(g7?g7+";":"")+hc.css}if(hc.startStyle&&hf.from==gZ){ha+=" "+hc.startStyle}if(hc.endStyle&&hf.to==hm){(g4||(g4=[])).push(hc.endStyle,hf.to)}if(hc.title&&!hn){hn=hc.title}if(hc.collapsed&&(!gX||d6(gX.marker,hc)<0)){gX=hf}}else{if(hf.from>gZ&&hm>hf.from){hm=hf.from}}}}if(g4){for(var hk=0;hk<g4.length;hk+=2){if(g4[hk+1]==hm){hl+=" "+g4[hk]}}}if(!gX||gX.from==gZ){for(var hj=0;hj<g2.length;++hj){af(hd,0,g2[hj])}}if(gX&&(gX.from||0)==gZ){af(hd,(gX.to==null?hh+1:gX.to)-gZ,gX.marker,gX.from==null);if(gX.to==null){return}if(gX.to==gZ){gX=false}}}if(gZ>=hh){break}var g8=Math.min(hh,hm);while(true){if(g9){var gW=gZ+g9.length;if(!gX){var gY=gW>g8?g9.slice(0,g8-gZ):g9;hd.addToken(hd,gY,hi?hi+gV:gV,ha,gZ+gY.length==hm?hl:"",hn,g7)}if(gW>=g8){g9=g9.slice(g8-gZ);gZ=g8;break}gZ=gW;ha=""}g9=g3.slice(hb,hb=g5[hg++]);hi=fn(g5[hg++],hd.cm.options)}}}function bD(gW,i,gV){this.line=i;this.rest=g(i);this.size=this.rest?bW(f9(this.rest))-gV+1:1;this.node=this.text=null;this.hidden=fW(gW,i)}function fm(i,g0,gZ){var gY=[],gW;for(var gX=g0;gX<gZ;gX=gW){var gV=new bD(i.doc,fG(i.doc,gX),gX);gW=gX+gV.size;gY.push(gV)}return gY}var bw=null;function eU(i){if(bw){bw.ops.push(i)}else{i.ownsGroup=bw={ops:[i],delayedCallbacks:[]}}}function c7(gY){var gX=gY.delayedCallbacks,gW=0;do{for(;gW<gX.length;gW++){gX[gW].call(null)}for(var gV=0;gV<gY.ops.length;gV++){var gZ=gY.ops[gV];if(gZ.cursorActivityHandlers){while(gZ.cursorActivityCalled<gZ.cursorActivityHandlers.length){gZ.cursorActivityHandlers[gZ.cursorActivityCalled++].call(null,gZ.cm)}}}}while(gW<gX.length)}function b7(gW,gV){var i=gW.ownsGroup;if(!i){return}try{c7(i)}finally{bw=null;gV(i)}}var bH=null;function ag(g1,gZ){var gV=eE(g1,gZ);if(!gV.length){return}var gX=Array.prototype.slice.call(arguments,2),g0;if(bw){g0=bw.delayedCallbacks}else{if(bH){g0=bH}else{g0=bH=[];setTimeout(aO,0)}}var gW=function(g2){g0.push(function(){return gV[g2].apply(null,gX)})};for(var gY=0;gY<gV.length;++gY){gW(gY)}}function aO(){var gV=bH;bH=null;for(var gW=0;gW<gV.length;++gW){gV[gW]()}}function ad(i,gW,gY,gZ){for(var gV=0;gV<gW.changes.length;gV++){var gX=gW.changes[gV];if(gX=="text"){fM(i,gW)}else{if(gX=="gutter"){dv(i,gW,gY,gZ)}else{if(gX=="class"){dU(i,gW)}else{if(gX=="widget"){ap(i,gW,gZ)}}}}}gW.changes=null}function gb(i){if(i.node==i.text){i.node=gC("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(dY&&l<8){i.node.style.zIndex=2}}return i.node}function eQ(i,gW){var gV=gW.bgClass?gW.bgClass+" "+(gW.line.bgClass||""):gW.line.bgClass;if(gV){gV+=" CodeMirror-linebackground"}if(gW.background){if(gV){gW.background.className=gV}else{gW.background.parentNode.removeChild(gW.background);gW.background=null}}else{if(gV){var gX=gb(gW);gW.background=gX.insertBefore(gC("div",null,gV),gX.firstChild);i.display.input.setUneditable(gW.background)}}}function ea(i,gV){var gW=i.display.externalMeasured;if(gW&&gW.line==gV.line){i.display.externalMeasured=null;gV.measure=gW.measure;return gW.built}return fi(i,gV)}function fM(i,gX){var gV=gX.text.className;var gW=ea(i,gX);if(gX.text==gX.node){gX.node=gW.pre}gX.text.parentNode.replaceChild(gW.pre,gX.text);gX.text=gW.pre;if(gW.bgClass!=gX.bgClass||gW.textClass!=gX.textClass){gX.bgClass=gW.bgClass;gX.textClass=gW.textClass;dU(i,gX)}else{if(gV){gX.text.className=gV}}}function dU(gV,gW){eQ(gV,gW);if(gW.line.wrapClass){gb(gW).className=gW.line.wrapClass}else{if(gW.node!=gW.text){gW.node.className=""}}var i=gW.textClass?gW.textClass+" "+(gW.line.textClass||""):gW.line.textClass;gW.text.className=i||""}function dv(g2,g0,gZ,g1){if(g0.gutter){g0.node.removeChild(g0.gutter);g0.gutter=null}if(g0.gutterBackground){g0.node.removeChild(g0.gutterBackground);g0.gutterBackground=null}if(g0.line.gutterClass){var gV=gb(g0);g0.gutterBackground=gC("div",null,"CodeMirror-gutter-background "+g0.line.gutterClass,("left: "+(g2.options.fixedGutter?g1.fixedPos:-g1.gutterTotalWidth)+"px; width: "+(g1.gutterTotalWidth)+"px"));g2.display.input.setUneditable(g0.gutterBackground);gV.insertBefore(g0.gutterBackground,g0.text)}var gX=g0.line.gutterMarkers;if(g2.options.lineNumbers||gX){var g3=gb(g0);var gY=g0.gutter=gC("div",null,"CodeMirror-gutter-wrapper",("left: "+(g2.options.fixedGutter?g1.fixedPos:-g1.gutterTotalWidth)+"px"));g2.display.input.setUneditable(gY);g3.insertBefore(gY,g0.text);if(g0.line.gutterClass){gY.className+=" "+g0.line.gutterClass}if(g2.options.lineNumbers&&(!gX||!gX["CodeMirror-linenumbers"])){g0.lineNumber=gY.appendChild(gC("div",eN(g2.options,gZ),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(g1.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(g2.display.lineNumInnerWidth)+"px")))}if(gX){for(var gW=0;gW<g2.options.gutters.length;++gW){var i=g2.options.gutters[gW],g4=gX.hasOwnProperty(i)&&gX[i];if(g4){gY.appendChild(gC("div",[g4],"CodeMirror-gutter-elt",("left: "+(g1.gutterLeft[i])+"px; width: "+(g1.gutterWidth[i])+"px")))}}}}}function ap(i,gV,gY){if(gV.alignable){gV.alignable=null}for(var gX=gV.node.firstChild,gW=(void 0);gX;gX=gW){gW=gX.nextSibling;if(gX.className=="CodeMirror-linewidget"){gV.node.removeChild(gX)}}fT(i,gV,gY)}function aH(i,gW,gX,gY){var gV=ea(i,gW);gW.text=gW.node=gV.pre;if(gV.bgClass){gW.bgClass=gV.bgClass}if(gV.textClass){gW.textClass=gV.textClass}dU(i,gW);dv(i,gW,gX,gY);fT(i,gW,gY);return gW.node}function fT(gV,gX,gY){gF(gV,gX.line,gX,gY,true);if(gX.rest){for(var gW=0;gW<gX.rest.length;gW++){gF(gV,gX.rest[gW],gX,gY,false)}}}function gF(g3,g4,g0,g2,gY){if(!g4.widgets){return}var gV=gb(g0);for(var gX=0,g1=g4.widgets;gX<g1.length;++gX){var gZ=g1[gX],gW=gC("div",[gZ.node],"CodeMirror-linewidget");if(!gZ.handleMouseEvents){gW.setAttribute("cm-ignore-events","true")}bO(gZ,gW,g0,g2);g3.display.input.setUneditable(gW);if(gY&&gZ.above){gV.insertBefore(gW,g0.gutter||g0.text)}else{gV.appendChild(gW)}ag(gZ,"redraw")}}function bO(gX,gW,i,gY){if(gX.noHScroll){(i.alignable||(i.alignable=[])).push(gW);var gV=gY.wrapperWidth;gW.style.left=gY.fixedPos+"px";if(!gX.coverGutter){gV-=gY.gutterTotalWidth;gW.style.paddingLeft=gY.gutterTotalWidth+"px"}gW.style.width=gV+"px"}if(gX.coverGutter){gW.style.zIndex=5;gW.style.position="relative";if(!gX.noHScroll){gW.style.marginLeft=-gY.gutterTotalWidth+"px"}}}function db(gW){if(gW.height!=null){return gW.height}var i=gW.doc.cm;if(!i){return 0}if(!gM(document.body,gW.node)){var gV="position: relative;";if(gW.coverGutter){gV+="margin-left: -"+i.display.gutters.offsetWidth+"px;"}if(gW.noHScroll){gV+="width: "+i.display.wrapper.clientWidth+"px;"}b1(i.display.measure,gC("div",[gW.node],null,gV))}return gW.height=gW.node.parentNode.offsetHeight}function be(gV,i){for(var gW=M(i);gW!=gV.wrapper;gW=gW.parentNode){if(!gW||(gW.nodeType==1&&gW.getAttribute("cm-ignore-events")=="true")||(gW.parentNode==gV.sizer&&gW!=gV.mover)){return true}}}function fA(i){return i.lineSpace.offsetTop}function bR(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function fw(gX){if(gX.cachedPaddingH){return gX.cachedPaddingH}var gW=b1(gX.measure,gC("pre","x"));var i=window.getComputedStyle?window.getComputedStyle(gW):gW.currentStyle;var gV={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};if(!isNaN(gV.left)&&!isNaN(gV.right)){gX.cachedPaddingH=gV}return gV}function c6(i){return dX-i.display.nativeBarWidth}function dB(i){return i.display.scroller.clientWidth-c6(i)-i.display.barWidth}function c8(i){return i.display.scroller.clientHeight-c6(i)-i.display.barHeight}function cs(g2,gY,g1){var gX=g2.options.lineWrapping;var gZ=gX&&dB(g2);if(!gY.measure.heights||gX&&gY.measure.width!=gZ){var g0=gY.measure.heights=[];if(gX){gY.measure.width=gZ;var g4=gY.text.firstChild.getClientRects();for(var gV=0;gV<g4.length-1;gV++){var g3=g4[gV],gW=g4[gV+1];if(Math.abs(g3.bottom-gW.bottom)>2){g0.push((g3.bottom+gW.top)/2-g1.top)}}}g0.push(g1.bottom-g1.top)}}function cG(gX,gV,gY){if(gX.line==gV){return{map:gX.measure.map,cache:gX.measure.cache}}for(var gW=0;gW<gX.rest.length;gW++){if(gX.rest[gW]==gV){return{map:gX.measure.maps[gW],cache:gX.measure.caches[gW]}}}for(var gZ=0;gZ<gX.rest.length;gZ++){if(bW(gX.rest[gZ])>gY){return{map:gX.measure.maps[gZ],cache:gX.measure.caches[gZ],before:true}}}}function df(i,gW){gW=y(gW);var gY=bW(gW);var gV=i.display.externalMeasured=new bD(i.doc,gW,gY);gV.lineN=gY;var gX=gV.built=fi(i,gV);gV.text=gX.pre;b1(i.display.lineMeasure,gX.pre);return gV}function ez(i,gV,gX,gW){return D(i,a8(i,gV),gX,gW)}function fD(i,gW){if(gW>=i.display.viewFrom&&gW<i.display.viewTo){return i.display.view[dG(i,gW)]}var gV=i.display.externalMeasured;if(gV&&gW>=gV.lineN&&gW<gV.lineN+gV.size){return gV}}function a8(i,gW){var gX=bW(gW);var gV=fD(i,gX);if(gV&&!gV.text){gV=null}else{if(gV&&gV.changes){ad(i,gV,gX,fE(i));i.curOp.forceUpdate=true}}if(!gV){gV=df(i,gW)}var gY=cG(gV,gW,gX);return{line:gW,view:gV,rect:null,map:gY.map,cache:gY.cache,before:gY.before,hasHeights:false}}function D(i,g0,gY,gV,gX){if(g0.before){gY=-1}var gW=gY+(gV||""),gZ;if(g0.cache.hasOwnProperty(gW)){gZ=g0.cache[gW]}else{if(!g0.rect){g0.rect=g0.view.text.getBoundingClientRect()}if(!g0.hasHeights){cs(i,g0.view,g0.rect);g0.hasHeights=true}gZ=k(i,g0,gY,gV);if(!gZ.bogus){g0.cache[gW]=gZ}}return{left:gZ.left,right:gZ.right,top:gX?gZ.rtop:gZ.top,bottom:gX?gZ.rbottom:gZ.bottom}}var eY={left:0,right:0,top:0,bottom:0};function aM(gW,gV,g2){var gY,gX,g0,g3,gZ,g4;for(var g1=0;g1<gW.length;g1+=3){gZ=gW[g1];g4=gW[g1+1];if(gV<gZ){gX=0;g0=1;g3="left"}else{if(gV<g4){gX=gV-gZ;g0=gX+1}else{if(g1==gW.length-3||gV==g4&&gW[g1+3]>gV){g0=g4-gZ;gX=g0-1;if(gV>=g4){g3="right"}}}}if(gX!=null){gY=gW[g1+2];if(gZ==g4&&g2==(gY.insertLeft?"left":"right")){g3=g2}if(g2=="left"&&gX==0){while(g1&&gW[g1-2]==gW[g1-3]&&gW[g1-1].insertLeft){gY=gW[(g1-=3)+2];g3="left"}}if(g2=="right"&&gX==g4-gZ){while(g1<gW.length-3&&gW[g1+3]==gW[g1+4]&&!gW[g1+5].insertLeft){gY=gW[(g1+=3)+2];g3="right"}}break}}return{node:gY,start:gX,end:g0,collapse:g3,coverStart:gZ,coverEnd:g4}}function fj(gW,gV){var gY=eY;if(gV=="left"){for(var gX=0;gX<gW.length;gX++){if((gY=gW[gX]).left!=gY.right){break}}}else{for(var gZ=gW.length-1;gZ>=0;gZ--){if((gY=gW[gZ]).left!=gY.right){break}}}return gY}function k(g3,hd,g6,g0){var g4=aM(hd.map,g6,g0);var hb=g4.node,gZ=g4.start,gY=g4.end,gV=g4.collapse;var gW;if(hb.nodeType==3){for(var g1=0;g1<4;g1++){while(gZ&&fP(hd.line.text.charAt(g4.coverStart+gZ))){--gZ}while(g4.coverStart+gY<g4.coverEnd&&fP(hd.line.text.charAt(g4.coverStart+gY))){++gY}if(dY&&l<9&&gZ==0&&gY==g4.coverEnd-g4.coverStart){gW=hb.parentNode.getBoundingClientRect()}else{gW=fj(cy(hb,gZ,gY).getClientRects(),g0)}if(gW.left||gW.right||gZ==0){break}gY=gZ;gZ=gZ-1;gV="right"}if(dY&&l<11){gW=fd(g3.display.measure,gW)}}else{if(gZ>0){gV=g0="right"}var gX;if(g3.options.lineWrapping&&(gX=hb.getClientRects()).length>1){gW=gX[g0=="right"?gX.length-1:0]}else{gW=hb.getBoundingClientRect()}}if(dY&&l<9&&!gZ&&(!gW||!gW.left&&!gW.right)){var g2=hb.parentNode.getClientRects()[0];if(g2){gW={left:g2.left,right:g2.left+dR(g3.display),top:g2.top,bottom:g2.bottom}}else{gW=eY}}var g9=gW.top-hd.rect.top,g7=gW.bottom-hd.rect.top;var hf=(g9+g7)/2;var he=hd.view.measure.heights;var hc=0;for(;hc<he.length-1;hc++){if(hf<he[hc]){break}}var ha=hc?he[hc-1]:0,g8=he[hc];var g5={left:(gV=="right"?gW.right:gW.left)-hd.rect.left,right:(gV=="left"?gW.left:gW.right)-hd.rect.left,top:ha,bottom:g8};if(!gW.left&&!gW.right){g5.bogus=true}if(!g3.options.singleCursorHeightPerLine){g5.rtop=g9;g5.rbottom=g7}return g5}function fd(gW,gX){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aN(gW)){return gX}var gV=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:gX.left*gV,right:gX.right*gV,top:gX.top*i,bottom:gX.bottom*i}}function aw(gW){if(gW.measure){gW.measure.cache={};gW.measure.heights=null;if(gW.rest){for(var gV=0;gV<gW.rest.length;gV++){gW.measure.caches[gV]={}}}}}function aR(gV){gV.display.externalMeasure=null;ei(gV.display.lineMeasure);for(var gW=0;gW<gV.display.view.length;gW++){aw(gV.display.view[gW])}}function al(i){aR(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function cH(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cF(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function fg(g2,gZ,g1,gW,gY){if(!gY&&gZ.widgets){for(var gX=0;gX<gZ.widgets.length;++gX){if(gZ.widgets[gX].above){var g4=db(gZ.widgets[gX]);g1.top+=g4;g1.bottom+=g4}}}if(gW=="line"){return g1}if(!gW){gW="local"}var g0=bV(gZ);if(gW=="local"){g0+=fA(g2.display)}else{g0-=g2.display.viewOffset}if(gW=="page"||gW=="window"){var gV=g2.display.lineSpace.getBoundingClientRect();g0+=gV.top+(gW=="window"?0:cF());var g3=gV.left+(gW=="window"?0:cH());g1.left+=g3;g1.right+=g3}g1.top+=g0;g1.bottom+=g0;return g1}function gQ(gV,gY,gW){if(gW=="div"){return gY}var g0=gY.left,gZ=gY.top;if(gW=="page"){g0-=cH();gZ-=cF()}else{if(gW=="local"||!gW){var gX=gV.display.sizer.getBoundingClientRect();g0+=gX.left;gZ+=gX.top}}var i=gV.display.lineSpace.getBoundingClientRect();return{left:g0-i.left,top:gZ-i.top}}function cX(i,gY,gX,gW,gV){if(!gW){gW=fG(i.doc,gY.line)}return fg(i,gW,ez(i,gW,gY.ch,gV),gX)}function d9(g5,g3,gW,g0,g7,g1){g0=g0||fG(g5.doc,g3.line);if(!g7){g7=a8(g5,g0)}function gY(ha,g9){var g8=D(g5,g7,ha,g9?"right":"left",g1);if(g9){g8.left=g8.right}else{g8.right=g8.left}return fg(g5,g0,g8,gW)}var gZ=a(g0,g5.doc.direction),i=g3.ch,g4=g3.sticky;if(i>=g0.text.length){i=g0.text.length;g4="before"}else{if(i<=0){i=0;g4="after"}}if(!gZ){return gY(g4=="before"?i-1:i,g4=="before")}function g6(hb,g8,hc){var g9=gZ[g8],ha=(g9.level%2)!=0;return gY(hc?hb-1:hb,ha!=hc)}var gV=aJ(gZ,i,g4);var g2=fu;var gX=g6(i,gV,g4=="before");if(g2!=null){gX.other=g6(i,g2,g4!="before")}return gX}function dV(i,gY){var gX=0;gY=ge(i.doc,gY);if(!i.options.lineWrapping){gX=dR(i.display)*gY.ch}var gV=fG(i.doc,gY.line);var gW=bV(gV)+fA(i.display);return{left:gX,right:gX,top:gW,bottom:gW+gV.height}}function gA(i,gV,gX,gW,gZ){var gY=X(i,gV,gX);gY.xRel=gZ;if(gW){gY.outside=true}return gY}function gl(g1,gY,gX){var g0=g1.doc;gX+=g1.display.viewOffset;if(gX<0){return gA(g0.first,0,null,true,-1)}var gW=bQ(g0,gX),g2=g0.first+g0.size-1;if(gW>g2){return gA(g0.first+g0.size-1,fG(g0,g2).text.length,null,true,1)}if(gY<0){gY=0}var gV=fG(g0,gW);for(;;){var g3=dc(g1,gV,gW,gY,gX);var gZ=eR(gV);var i=gZ&&gZ.find(0,true);if(gZ&&(g3.ch>i.from.ch||g3.ch==i.from.ch&&g3.xRel>0)){gW=bW(gV=i.to.line)}else{return g3}}}function bs(i,gW,gZ,g0){var gY=function(g1){return fg(i,gW,D(i,gZ,g1),"line")};var gV=gW.text.length;var gX=cz(function(g1){return gY(g1-1).bottom<=g0},gV,0);gV=cz(function(g1){return gY(g1).top>g0},gX,gV);return{begin:gX,end:gV}}function br(i,gV,gX,gY){var gW=fg(i,gV,D(i,gX,gY),"line").top;return bs(i,gV,gX,gW)}function dc(gY,i,g1,g0,gZ){gZ-=bV(i);var hb=0,gV=i.text.length;var g4=a8(gY,i);var gX;var g9=a(i,gY.doc.direction);if(g9){if(gY.options.lineWrapping){var g8;((g8=bs(gY,i,g4,gZ),hb=g8.begin,gV=g8.end,g8))}gX=new X(g1,hb);var g6=d9(gY,gX,"line",i,g4).left;var g7=g6<g0?1:-1;var g2,g5=g6-g0,gW;do{g2=g5;gW=gX;gX=u(gY,i,gX,g7);if(gX==null||gX.ch<hb||gV<=(gX.sticky=="before"?gX.ch-1:gX.ch)){gX=gW;break}g5=d9(gY,gX,"line",i,g4).left-g0}while((g7<0)!=(g5<0)&&(Math.abs(g5)<=Math.abs(g2)));if(Math.abs(g5)>Math.abs(g2)){if((g5<0)==(g2<0)){throw new Error("Broke out of infinite loop in coordsCharInner")}gX=gW}}else{var g3=cz(function(hc){var hd=fg(gY,i,D(gY,g4,hc),"line");if(hd.top>gZ){gV=Math.min(hc,gV);return true}else{if(hd.bottom<=gZ){return false}else{if(hd.left>g0){return true}else{if(hd.right<g0){return false}else{return(g0-hd.left<hd.right-g0)}}}}},hb,gV);g3=eC(i.text,g3,1);gX=new X(g1,g3,g3==gV?"before":"after")}var ha=d9(gY,gX,"line",i,g4);if(gZ<ha.top||ha.bottom<gZ){gX.outside=true}gX.xRel=g0<ha.left?-1:(g0>ha.right?1:0);return gX}var aI;function a1(gX){if(gX.cachedTextHeight!=null){return gX.cachedTextHeight}if(aI==null){aI=gC("pre");for(var gW=0;gW<49;++gW){aI.appendChild(document.createTextNode("x"));aI.appendChild(gC("br"))}aI.appendChild(document.createTextNode("x"))}b1(gX.measure,aI);var gV=aI.offsetHeight/50;if(gV>3){gX.cachedTextHeight=gV}ei(gX.measure);return gV||1}function dR(gY){if(gY.cachedCharWidth!=null){return gY.cachedCharWidth}var i=gC("span","xxxxxxxxxx");var gX=gC("pre",[i]);b1(gY.measure,gX);var gW=i.getBoundingClientRect(),gV=(gW.right-gW.left)/10;if(gV>2){gY.cachedCharWidth=gV}return gV||10}function fE(gV){var g0=gV.display,gY={},gX={};var gZ=g0.gutters.clientLeft;for(var g1=g0.gutters.firstChild,gW=0;g1;g1=g1.nextSibling,++gW){gY[gV.options.gutters[gW]]=g1.offsetLeft+g1.clientLeft+gZ;gX[gV.options.gutters[gW]]=g1.clientWidth}return{fixedPos:ed(g0),gutterTotalWidth:g0.gutters.offsetWidth,gutterLeft:gY,gutterWidth:gX,wrapperWidth:g0.wrapper.clientWidth}}function ed(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function bh(i){var gW=a1(i.display),gV=i.options.lineWrapping;var gX=gV&&Math.max(5,i.display.scroller.clientWidth/dR(i.display)-3);return function(gZ){if(fW(i.doc,gZ)){return 0}var gY=0;if(gZ.widgets){for(var g0=0;g0<gZ.widgets.length;g0++){if(gZ.widgets[g0].height){gY+=gZ.widgets[g0].height}}}if(gV){return gY+(Math.ceil(gZ.text.length/gX)||1)*gW}else{return gY+gW}}}function aa(i){var gW=i.doc,gV=bh(i);gW.iter(function(gX){var gY=gV(gX);if(gY!=gX.height){gH(gX,gY)}})}function cA(g3,gY,gV,gW){var gZ=g3.display;if(!gV&&M(gY).getAttribute("cm-not-content")=="true"){return null}var g2,g0,i=gZ.lineSpace.getBoundingClientRect();try{g2=gY.clientX-i.left;g0=gY.clientY-i.top}catch(gY){return null}var g1=gl(g3,g2,g0),g4;if(gW&&g1.xRel==1&&(g4=fG(g3.doc,g1.line).text).length==g1.ch){var gX=b0(g4,g4.length,g3.options.tabSize)-g4.length;g1=X(g1.line,Math.max(0,Math.round((g2-fw(g3.display).left)/dR(g3.display))-gX))}return g1}function dG(gV,gY){if(gY>=gV.display.viewTo){return null}gY-=gV.display.viewFrom;if(gY<0){return null}var gW=gV.display.view;for(var gX=0;gX<gW.length;gX++){gY-=gW[gX].size;if(gY<0){return gX}}}function bL(i){i.display.input.showSelection(i.display.input.prepareSelection())}function gc(g2,gV){var g1=g2.doc,g3={};var g0=g3.cursors=document.createDocumentFragment();var gW=g3.selection=document.createDocumentFragment();for(var gY=0;gY<g1.sel.ranges.length;gY++){if(gV===false&&gY==g1.sel.primIndex){continue}var gZ=g1.sel.ranges[gY];if(gZ.from().line>=g2.display.viewTo||gZ.to().line<g2.display.viewFrom){continue}var gX=gZ.empty();if(gX||g2.options.showCursorWhenSelecting){A(g2,gZ.head,g0)}if(!gX){bM(g2,gZ,gW)}}return g3}function A(i,gX,gW){var gZ=d9(i,gX,"div",null,null,!i.options.singleCursorHeightPerLine);var gY=gW.appendChild(gC("div","\u00a0","CodeMirror-cursor"));gY.style.left=gZ.left+"px";gY.style.top=gZ.top+"px";gY.style.height=Math.max(0,gZ.bottom-gZ.top)*i.options.cursorHeight+"px";if(gZ.other){var gV=gW.appendChild(gC("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gV.style.display="";gV.style.left=gZ.other.left+"px";gV.style.top=gZ.other.top+"px";gV.style.height=(gZ.other.bottom-gZ.other.top)*0.85+"px"}}function bM(gY,g4,gZ){var g7=gY.display,hb=gY.doc;var i=document.createDocumentFragment();var g3=fw(gY.display),gX=g3.left;var g8=Math.max(g7.sizerWidth,dB(gY)-g7.sizer.offsetLeft)-g3.right;function g5(hf,he,hd,hc){if(he<0){he=0}he=Math.round(he);hc=Math.round(hc);i.appendChild(gC("div",null,"CodeMirror-selected",("position: absolute; left: "+hf+"px;\n                             top: "+he+"px; width: "+(hd==null?g8-hf:hd)+"px;\n                             height: "+(hc-he)+"px")))}function gV(hd,hf,hi){var he=fG(hb,hd);var hg=he.text.length;var hj,hc;function hh(hl,hk){return cX(gY,X(hd,hl),"div",he,hk)}el(a(he,hb.direction),hf||0,hi==null?hg:hi,function(hr,hq,hk){var hn=hh(hr,"left"),ho,hp,hm;if(hr==hq){ho=hn;hp=hm=hn.left}else{ho=hh(hq-1,"right");if(hk=="rtl"){var hl=hn;hn=ho;ho=hl}hp=hn.left;hm=ho.right}if(hf==null&&hr==0){hp=gX}if(ho.top-hn.top>3){g5(hp,hn.top,null,hn.bottom);hp=gX;if(hn.bottom<ho.top){g5(hp,hn.bottom,null,ho.top)}}if(hi==null&&hq==hg){hm=g8}if(!hj||hn.top<hj.top||hn.top==hj.top&&hn.left<hj.left){hj=hn}if(!hc||ho.bottom>hc.bottom||ho.bottom==hc.bottom&&ho.right>hc.right){hc=ho}if(hp<gX+1){hp=gX}g5(hp,ho.top,hm-hp,ho.bottom)});return{start:hj,end:hc}}var ha=g4.from(),g9=g4.to();if(ha.line==g9.line){gV(ha.line,ha.ch,g9.ch)}else{var gW=fG(hb,ha.line),g1=fG(hb,g9.line);var g0=y(gW)==y(g1);var g2=gV(ha.line,ha.ch,g0?gW.text.length+1:null).end;var g6=gV(g9.line,g0?0:null,g9.ch).start;if(g0){if(g2.top<g6.top-2){g5(g2.right,g2.top,null,g2.bottom);g5(gX,g6.top,g6.left,g6.bottom)}else{g5(g2.right,g2.top,g6.left-g2.right,g2.bottom)}}if(g2.bottom<g6.top){g5(gX,g2.bottom,null,g6.top)}}gZ.appendChild(i)}function p(i){if(!i.state.focused){return}var gW=i.display;clearInterval(gW.blinker);var gV=true;gW.cursorDiv.style.visibility="";if(i.options.cursorBlinkRate>0){gW.blinker=setInterval(function(){return gW.cursorDiv.style.visibility=(gV=!gV)?"":"hidden"},i.options.cursorBlinkRate)}else{if(i.options.cursorBlinkRate<0){gW.cursorDiv.style.visibility="hidden"}}}function s(i){if(!i.state.focused){i.display.input.focus();cO(i)}}function am(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;aY(i)}},100)}function cO(i,gV){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false}if(i.options.readOnly=="nocursor"){return}if(!i.state.focused){aG(i,"focus",i,gV);i.state.focused=true;f3(i.display.wrapper,"CodeMirror-focused");if(!i.curOp&&i.display.selForContextMenu!=i.doc.sel){i.display.input.reset();if(dd){setTimeout(function(){return i.display.input.reset(true)},20)}}i.display.input.receivedFocus()}p(i)}function aY(i,gV){if(i.state.delayingBlurEvent){return}if(i.state.focused){aG(i,"blur",i,gV);i.state.focused=false;h(i.display.wrapper,"CodeMirror-focused")}clearInterval(i.display.blinker);setTimeout(function(){if(!i.state.focused){i.display.shift=false}},150)}function e2(g3){var g1=g3.display,g2=g1.view;if(!g1.alignWidgets&&(!g1.gutters.firstChild||!g3.options.fixedGutter)){return}var gZ=ed(g1)-g1.scroller.scrollLeft+g3.doc.scrollLeft;var gV=g1.gutters.offsetWidth,gW=gZ+"px";for(var gY=0;gY<g2.length;gY++){if(!g2[gY].hidden){if(g3.options.fixedGutter){if(g2[gY].gutter){g2[gY].gutter.style.left=gW}if(g2[gY].gutterBackground){g2[gY].gutterBackground.style.left=gW}}var g0=g2[gY].alignable;if(g0){for(var gX=0;gX<g0.length;gX++){g0[gX].style.left=gW}}}}if(g3.options.fixedGutter){g1.gutters.style.left=(gZ+gV)+"px"}}function em(i){if(!i.options.lineNumbers){return false}var gZ=i.doc,gV=eN(i.options,gZ.first+gZ.size-1),gY=i.display;if(gV.length!=gY.lineNumChars){var g0=gY.measure.appendChild(gC("div",[gC("div",gV)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gW=g0.firstChild.offsetWidth,gX=g0.offsetWidth-gW;gY.lineGutter.style.width="";gY.lineNumInnerWidth=Math.max(gW,gY.lineGutter.offsetWidth-gX)+1;gY.lineNumWidth=gY.lineNumInnerWidth+gX;gY.lineNumChars=gY.lineNumInnerWidth?gV.length:-1;gY.lineGutter.style.width=gY.lineNumWidth+"px";dh(i);return true}return false}function bc(g2){var g0=g2.display;var gW=g0.lineDiv.offsetTop;for(var gX=0;gX<g0.view.length;gX++){var g3=g0.view[gX],g4=(void 0);if(g3.hidden){continue}if(dY&&l<8){var gZ=g3.node.offsetTop+g3.node.offsetHeight;g4=gZ-gW;gW=gZ}else{var gY=g3.node.getBoundingClientRect();g4=gY.bottom-gY.top}var g1=g3.line.height-g4;if(g4<2){g4=a1(g0)}if(g1>0.001||g1<-0.001){gH(g3.line,g4);cl(g3.line);if(g3.rest){for(var gV=0;gV<g3.rest.length;gV++){cl(g3.rest[gV])}}}}}function cl(gV){if(gV.widgets){for(var gW=0;gW<gV.widgets.length;++gW){gV.widgets[gW].height=gV.widgets[gW].node.parentNode.offsetHeight}}}function cg(gX,g1,gW){var gY=gW&&gW.top!=null?Math.max(0,gW.top):gX.scroller.scrollTop;gY=Math.floor(gY-fA(gX));var i=gW&&gW.bottom!=null?gW.bottom:gY+gX.wrapper.clientHeight;var gZ=bQ(g1,gY),g0=bQ(g1,i);if(gW&&gW.ensure){var gV=gW.ensure.from.line,g2=gW.ensure.to.line;if(gV<gZ){gZ=gV;g0=bQ(g1,bV(fG(g1,gV))+gX.wrapper.clientHeight)}else{if(Math.min(g2,g1.lastLine())>=g0){gZ=bQ(g1,bV(fG(g1,g2))-gX.wrapper.clientHeight);g0=g2}}}return{from:gZ,to:Math.max(g0,gZ+1)}}function P(i,gV){if(Math.abs(i.doc.scrollTop-gV)<2){return}i.doc.scrollTop=gV;if(!cB){d8(i,{top:gV})}if(i.display.scroller.scrollTop!=gV){i.display.scroller.scrollTop=gV}i.display.scrollbars.setScrollTop(gV);if(cB){d8(i)}ew(i,100)}function bN(i,gW,gV){if(gV?gW==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-gW)<2){return}gW=Math.min(gW,i.display.scroller.scrollWidth-i.display.scroller.clientWidth);i.doc.scrollLeft=gW;e2(i);if(i.display.scroller.scrollLeft!=gW){i.display.scroller.scrollLeft=gW}i.display.scrollbars.setScrollLeft(gW)}var fN=0;var cr=null;if(dY){cr=-0.53}else{if(cB){cr=15}else{if(ds){cr=-0.7}else{if(aE){cr=-1/3}}}}function c4(gW){var gV=gW.wheelDeltaX,i=gW.wheelDeltaY;if(gV==null&&gW.detail&&gW.axis==gW.HORIZONTAL_AXIS){gV=gW.detail}if(i==null&&gW.detail&&gW.axis==gW.VERTICAL_AXIS){i=gW.detail}else{if(i==null){i=gW.wheelDelta}}return{x:gV,y:i}}function aB(i){var gV=c4(i);gV.x*=cr;gV.y*=cr;return gV}function c(g5,gZ){var g7=c4(gZ),g9=g7.x,g8=g7.y;var g1=g5.display,g4=g1.scroller;var gY=g4.scrollWidth>g4.clientWidth;var gX=g4.scrollHeight>g4.clientHeight;if(!(g9&&gY||g8&&gX)){return}if(g8&&ch&&dd){outer:for(var g6=gZ.target,g3=g1.view;g6!=g4;g6=g6.parentNode){for(var gW=0;gW<g3.length;gW++){if(g3[gW].node==g6){g5.display.currentWheelTarget=g6;break outer}}}}if(g9&&!cB&&!ej&&cr!=null){if(g8&&gX){P(g5,Math.max(0,Math.min(g4.scrollTop+g8*cr,g4.scrollHeight-g4.clientHeight)))}bN(g5,Math.max(0,Math.min(g4.scrollLeft+g9*cr,g4.scrollWidth-g4.clientWidth)));if(!g8||(g8&&gX)){cT(gZ)}g1.wheelStartX=null;return}if(g8&&cr!=null){var gV=g8*cr;var g2=g5.doc.scrollTop,g0=g2+g1.wrapper.clientHeight;if(gV<0){g2=Math.max(0,g2+gV-50)}else{g0=Math.min(g5.doc.height,g0+gV+50)}d8(g5,{top:g2,bottom:g0})}if(fN<20){if(g1.wheelStartX==null){g1.wheelStartX=g4.scrollLeft;g1.wheelStartY=g4.scrollTop;g1.wheelDX=g9;g1.wheelDY=g8;setTimeout(function(){if(g1.wheelStartX==null){return}var i=g4.scrollLeft-g1.wheelStartX;var hb=g4.scrollTop-g1.wheelStartY;var ha=(hb&&g1.wheelDY&&hb/g1.wheelDY)||(i&&g1.wheelDX&&i/g1.wheelDX);g1.wheelStartX=g1.wheelStartY=null;if(!ha){return}cr=(cr*fN+ha)/(fN+1);++fN},200)}else{g1.wheelDX+=g9;g1.wheelDY+=g8}}}function dO(i){var gX=i.display,gW=gX.gutters.offsetWidth;var gV=Math.round(i.doc.height+bR(i.display));return{clientHeight:gX.scroller.clientHeight,viewHeight:gX.wrapper.clientHeight,scrollWidth:gX.scroller.scrollWidth,clientWidth:gX.scroller.clientWidth,viewWidth:gX.wrapper.clientWidth,barLeft:i.options.fixedGutter?gW:0,docHeight:gV,scrollHeight:gV+c6(i)+gX.barHeight,nativeBarWidth:gX.nativeBarWidth,gutterWidth:gW}}var dA=function(gW,gV,i){this.cm=i;var gX=this.vert=gC("div",[gC("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gY=this.horiz=gC("div",[gC("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gW(gX);gW(gY);b6(gX,"scroll",function(){if(gX.clientHeight){gV(gX.scrollTop,"vertical")}});b6(gY,"scroll",function(){if(gY.clientWidth){gV(gY.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(dY&&l<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};dA.prototype.update=function(gX){var gY=gX.scrollWidth>gX.clientWidth+1;var gW=gX.scrollHeight>gX.clientHeight+1;var gZ=gX.nativeBarWidth;if(gW){this.vert.style.display="block";this.vert.style.bottom=gY?gZ+"px":"0";var gV=gX.viewHeight-(gY?gZ:0);this.vert.firstChild.style.height=Math.max(0,gX.scrollHeight-gX.clientHeight+gV)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gY){this.horiz.style.display="block";this.horiz.style.right=gW?gZ+"px":"0";this.horiz.style.left=gX.barLeft+"px";var i=gX.viewWidth-gX.barLeft-(gW?gZ:0);this.horiz.firstChild.style.width=Math.max(0,gX.scrollWidth-gX.clientWidth+i)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gX.clientHeight>0){if(gZ==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gW?gZ:0,bottom:gY?gZ:0}};dA.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}};dA.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}};dA.prototype.zeroWidthHack=function(){var i=ch&&!dk?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gU;this.disableVert=new gU};dA.prototype.enableZeroWidthBar=function(gV,i){gV.style.pointerEvents="auto";function gW(){var gY=gV.getBoundingClientRect();var gX=document.elementFromPoint(gY.left+1,gY.bottom-1);if(gX!=gV){gV.style.pointerEvents="none"}else{i.set(1000,gW)}}i.set(1000,gW)};dA.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var fv=function(){};fv.prototype.update=function(){return{bottom:0,right:0}};fv.prototype.setScrollLeft=function(){};fv.prototype.setScrollTop=function(){};fv.prototype.clear=function(){};function fp(gX,gZ){if(!gZ){gZ=dO(gX)}var gW=gX.display.barWidth,gV=gX.display.barHeight;aX(gX,gZ);for(var gY=0;gY<4&&gW!=gX.display.barWidth||gV!=gX.display.barHeight;gY++){if(gW!=gX.display.barWidth&&gX.options.lineWrapping){bc(gX)}aX(gX,dO(gX));gW=gX.display.barWidth;gV=gX.display.barHeight}}function aX(i,gV){var gX=i.display;var gW=gX.scrollbars.update(gV);gX.sizer.style.paddingRight=(gX.barWidth=gW.right)+"px";gX.sizer.style.paddingBottom=(gX.barHeight=gW.bottom)+"px";gX.heightForcer.style.borderBottom=gW.bottom+"px solid transparent";if(gW.right&&gW.bottom){gX.scrollbarFiller.style.display="block";gX.scrollbarFiller.style.height=gW.bottom+"px";gX.scrollbarFiller.style.width=gW.right+"px"}else{gX.scrollbarFiller.style.display=""}if(gW.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){gX.gutterFiller.style.display="block";gX.gutterFiller.style.height=gW.bottom+"px";gX.gutterFiller.style.width=gV.gutterWidth+"px"}else{gX.gutterFiller.style.display=""}}var bq={"native":dA,"null":fv};function aF(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){h(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new bq[i.options.scrollbarStyle](function(gV){i.display.wrapper.insertBefore(gV,i.display.scrollbarFiller);b6(gV,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});gV.setAttribute("cm-not-content","true")},function(gW,gV){if(gV=="horizontal"){bN(i,gW)}else{P(i,gW)}},i);if(i.display.scrollbars.addClass){f3(i.display.wrapper,i.display.scrollbars.addClass)}}function en(gV,gX){if(aU(gV,"scrollCursorIntoView")){return}var gZ=gV.display,gW=gZ.sizer.getBoundingClientRect(),i=null;if(gX.top+gW.top<0){i=true}else{if(gX.bottom+gW.top>(window.innerHeight||document.documentElement.clientHeight)){i=false}}if(i!=null&&!fU){var gY=gC("div","\u200b",null,("position: absolute;\n                         top: "+(gX.top-gZ.viewOffset-fA(gV.display))+"px;\n                         height: "+(gX.bottom-gX.top+c6(gV)+gZ.barHeight)+"px;\n                         left: "+(gX.left)+"px; width: "+(Math.max(2,gX.right-gX.left))+"px;"));gV.display.lineSpace.appendChild(gY);gY.scrollIntoView(i);gV.display.lineSpace.removeChild(gY)}}function E(g5,g2,gY,gX){if(gX==null){gX=0}var g3;for(var gZ=0;gZ<5;gZ++){var g0=false;var g4=d9(g5,g2);var i=!gY||gY==g2?g4:d9(g5,gY);g3={left:Math.min(g4.left,i.left),top:Math.min(g4.top,i.top)-gX,right:Math.max(g4.left,i.left),bottom:Math.max(g4.bottom,i.bottom)+gX};var gW=I(g5,g3);var g1=g5.doc.scrollTop,gV=g5.doc.scrollLeft;if(gW.scrollTop!=null){P(g5,gW.scrollTop);if(Math.abs(g5.doc.scrollTop-g1)>1){g0=true}}if(gW.scrollLeft!=null){bN(g5,gW.scrollLeft);if(Math.abs(g5.doc.scrollLeft-gV)>1){g0=true}}if(!g0){break}}return g3}function F(i,gV){var gW=I(i,gV);if(gW.scrollTop!=null){P(i,gW.scrollTop)}if(gW.scrollLeft!=null){bN(i,gW.scrollLeft)}}function I(g3,g2){var g0=g3.display,gY=a1(g3.display);if(g2.top<0){g2.top=0}var gW=g3.curOp&&g3.curOp.scrollTop!=null?g3.curOp.scrollTop:g0.scroller.scrollTop;var g5=c8(g3),g7={};if(g2.bottom-g2.top>g5){g2.bottom=g2.top+g5}var gV=g3.doc.height+bR(g0);var i=g2.top<gY,gZ=g2.bottom>gV-gY;if(g2.top<gW){g7.scrollTop=i?0:g2.top}else{if(g2.bottom>gW+g5){var g1=Math.min(g2.top,(gZ?gV:g2.bottom)-g5);if(g1!=gW){g7.scrollTop=g1}}}var g6=g3.curOp&&g3.curOp.scrollLeft!=null?g3.curOp.scrollLeft:g0.scroller.scrollLeft;var g4=dB(g3)-(g3.options.fixedGutter?g0.gutters.offsetWidth:0);var gX=g2.right-g2.left>g4;if(gX){g2.right=g2.left+g4}if(g2.left<10){g7.scrollLeft=0}else{if(g2.left<g6){g7.scrollLeft=Math.max(0,g2.left-(gX?0:10))}else{if(g2.right>g4+g6-3){g7.scrollLeft=g2.right+(gX?0:10)-g4}}}return g7}function cZ(i,gW,gV){if(gW!=null||gV!=null){f5(i)}if(gW!=null){i.curOp.scrollLeft=(i.curOp.scrollLeft==null?i.doc.scrollLeft:i.curOp.scrollLeft)+gW}if(gV!=null){i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+gV}}function f8(i){f5(i);var gV=i.getCursor(),gX=gV,gW=gV;if(!i.options.lineWrapping){gX=gV.ch?X(gV.line,gV.ch-1):gV;gW=X(gV.line,gV.ch+1)}i.curOp.scrollToPos={from:gX,to:gW,margin:i.options.cursorScrollMargin}}function f5(i){var gW=i.curOp.scrollToPos;if(gW){i.curOp.scrollToPos=null;var gY=dV(i,gW.from),gX=dV(i,gW.to);var gV=I(i,{left:Math.min(gY.left,gX.left),top:Math.min(gY.top,gX.top)-gW.margin,right:Math.max(gY.right,gX.right),bottom:Math.max(gY.bottom,gX.bottom)+gW.margin});i.scrollTo(gV.scrollLeft,gV.scrollTop)}}var er=0;function cW(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++er};eU(i.curOp)}function ao(i){var gV=i.curOp;b7(gV,function(gX){for(var gW=0;gW<gX.ops.length;gW++){gX.ops[gW].cm.curOp=null}cY(gX)})}function cY(g0){var gW=g0.ops;for(var gV=0;gV<gW.length;gV++){cf(gW[gV])}for(var g1=0;g1<gW.length;g1++){ar(gW[g1])}for(var gZ=0;gZ<gW.length;gZ++){cb(gW[gZ])}for(var gY=0;gY<gW.length;gY++){aq(gW[gY])}for(var gX=0;gX<gW.length;gX++){fr(gW[gX])}}function cf(gW){var i=gW.cm,gV=i.display;K(i);if(gW.updateMaxLine){f(i)}gW.mustUpdate=gW.viewChanged||gW.forceUpdate||gW.scrollTop!=null||gW.scrollToPos&&(gW.scrollToPos.from.line<gV.viewFrom||gW.scrollToPos.to.line>=gV.viewTo)||gV.maxLineChanged&&i.options.lineWrapping;gW.update=gW.mustUpdate&&new aL(i,gW.mustUpdate&&{top:gW.scrollTop,ensure:gW.scrollToPos},gW.forceUpdate)}function ar(i){i.updatedDisplay=i.mustUpdate&&C(i.cm,i.update)}function cb(gW){var i=gW.cm,gV=i.display;if(gW.updatedDisplay){bc(i)}gW.barMeasure=dO(i);if(gV.maxLineChanged&&!i.options.lineWrapping){gW.adjustWidthTo=ez(i,gV.maxLine,gV.maxLine.text.length).left+3;i.display.sizerWidth=gW.adjustWidthTo;gW.barMeasure.scrollWidth=Math.max(gV.scroller.clientWidth,gV.sizer.offsetLeft+gW.adjustWidthTo+c6(i)+i.display.barWidth);gW.maxScrollLeft=Math.max(0,gV.sizer.offsetLeft+gW.adjustWidthTo-dB(i))}if(gW.updatedDisplay||gW.selectionChanged){gW.preparedSelection=gV.input.prepareSelection(gW.focus)}}function aq(gW){var i=gW.cm;if(gW.adjustWidthTo!=null){i.display.sizer.style.minWidth=gW.adjustWidthTo+"px";if(gW.maxScrollLeft<i.doc.scrollLeft){bN(i,Math.min(i.display.scroller.scrollLeft,gW.maxScrollLeft),true)}i.display.maxLineChanged=false}var gV=gW.focus&&gW.focus==d2()&&(!document.hasFocus||document.hasFocus());if(gW.preparedSelection){i.display.input.showSelection(gW.preparedSelection,gV)}if(gW.updatedDisplay||gW.startHeight!=i.doc.height){fp(i,gW.barMeasure)}if(gW.updatedDisplay){dN(i,gW.barMeasure)}if(gW.selectionChanged){p(i)}if(i.state.focused&&gW.updateInput){i.display.input.reset(gW.typing)}if(gV){s(gW.cm)}}function fr(gY){var g3=gY.cm,g0=g3.display,g2=g3.doc;if(gY.updatedDisplay){cu(g3,gY.update)}if(g0.wheelStartX!=null&&(gY.scrollTop!=null||gY.scrollLeft!=null||gY.scrollToPos)){g0.wheelStartX=g0.wheelStartY=null}if(gY.scrollTop!=null&&(g0.scroller.scrollTop!=gY.scrollTop||gY.forceScroll)){g2.scrollTop=Math.max(0,Math.min(g0.scroller.scrollHeight-g0.scroller.clientHeight,gY.scrollTop));g0.scrollbars.setScrollTop(g2.scrollTop);g0.scroller.scrollTop=g2.scrollTop}if(gY.scrollLeft!=null&&(g0.scroller.scrollLeft!=gY.scrollLeft||gY.forceScroll)){g2.scrollLeft=Math.max(0,Math.min(g0.scroller.scrollWidth-g0.scroller.clientWidth,gY.scrollLeft));g0.scrollbars.setScrollLeft(g2.scrollLeft);g0.scroller.scrollLeft=g2.scrollLeft;e2(g3)}if(gY.scrollToPos){var g1=E(g3,ge(g2,gY.scrollToPos.from),ge(g2,gY.scrollToPos.to),gY.scrollToPos.margin);en(g3,g1)}var gZ=gY.maybeHiddenMarkers,gV=gY.maybeUnhiddenMarkers;if(gZ){for(var gX=0;gX<gZ.length;++gX){if(!gZ[gX].lines.length){aG(gZ[gX],"hide")}}}if(gV){for(var gW=0;gW<gV.length;++gW){if(gV[gW].lines.length){aG(gV[gW],"unhide")}}}if(g0.wrapper.offsetHeight){g2.scrollTop=g3.display.scroller.scrollTop}if(gY.changeObjs){aG(g3,"changes",g3,gY.changeObjs)}if(gY.update){gY.update.finish()}}function c0(i,gV){if(i.curOp){return gV()}cW(i);try{return gV()}finally{ao(i)}}function de(i,gV){return function(){if(i.curOp){return gV.apply(i,arguments)}cW(i);try{return gV.apply(i,arguments)}finally{ao(i)}}}function dn(i){return function(){if(this.curOp){return i.apply(this,arguments)}cW(this);try{return i.apply(this,arguments)}finally{ao(this)}}}function cR(i){return function(){var gV=this.cm;if(!gV||gV.curOp){return i.apply(this,arguments)}cW(gV);try{return i.apply(this,arguments)}finally{ao(gV)}}}function aj(g2,g0,g1,g3){if(g0==null){g0=g2.doc.first}if(g1==null){g1=g2.doc.first+g2.doc.size}if(!g3){g3=0}var gX=g2.display;if(g3&&g1<gX.viewTo&&(gX.updateLineNumbers==null||gX.updateLineNumbers>g0)){gX.updateLineNumbers=g0}g2.curOp.viewChanged=true;if(g0>=gX.viewTo){if(ba&&aZ(g2.doc,g0)<gX.viewTo){eS(g2)}}else{if(g1<=gX.viewFrom){if(ba&&ek(g2.doc,g1+g3)>gX.viewFrom){eS(g2)}else{gX.viewFrom+=g3;gX.viewTo+=g3}}else{if(g0<=gX.viewFrom&&g1>=gX.viewTo){eS(g2)}else{if(g0<=gX.viewFrom){var gZ=du(g2,g1,g1+g3,1);if(gZ){gX.view=gX.view.slice(gZ.index);gX.viewFrom=gZ.lineN;gX.viewTo+=g3}else{eS(g2)}}else{if(g1>=gX.viewTo){var gV=du(g2,g0,g0,-1);if(gV){gX.view=gX.view.slice(0,gV.index);gX.viewTo=gV.lineN}else{eS(g2)}}else{var gY=du(g2,g0,g0,-1);var gW=du(g2,g1,g1+g3,1);if(gY&&gW){gX.view=gX.view.slice(0,gY.index).concat(fm(g2,gY.lineN,gW.lineN)).concat(gX.view.slice(gW.index));gX.viewTo+=g3}else{eS(g2)}}}}}}var i=gX.externalMeasured;if(i){if(g1<i.lineN){i.lineN+=g3}else{if(g0<i.lineN+i.size){gX.externalMeasured=null}}}}function S(gV,gW,gZ){gV.curOp.viewChanged=true;var g0=gV.display,gY=gV.display.externalMeasured;if(gY&&gW>=gY.lineN&&gW<gY.lineN+gY.size){g0.externalMeasured=null}if(gW<g0.viewFrom||gW>=g0.viewTo){return}var gX=g0.view[dG(gV,gW)];if(gX.node==null){return}var i=gX.changes||(gX.changes=[]);if(dy(i,gZ)==-1){i.push(gZ)}}function eS(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function du(g3,gX,gZ,gW){var g0=dG(g3,gX),g2,g1=g3.display.view;if(!ba||gZ==g3.doc.first+g3.doc.size){return{index:g0,lineN:gZ}}var gV=g3.display.viewFrom;for(var gY=0;gY<g0;gY++){gV+=g1[gY].size}if(gV!=gX){if(gW>0){if(g0==g1.length-1){return null}g2=(gV+g1[g0].size)-gX;g0++}else{g2=gV-gX}gX+=g2;gZ+=g2}while(aZ(g3.doc,gZ)!=gZ){if(g0==(gW<0?0:g1.length-1)){return null}gZ+=gW*g1[g0-(gW<0?1:0)].size;g0+=gW}return{index:g0,lineN:gZ}}function c5(i,gY,gX){var gW=i.display,gV=gW.view;if(gV.length==0||gY>=gW.viewTo||gX<=gW.viewFrom){gW.view=fm(i,gY,gX);gW.viewFrom=gY}else{if(gW.viewFrom>gY){gW.view=fm(i,gY,gW.viewFrom).concat(gW.view)}else{if(gW.viewFrom<gY){gW.view=gW.view.slice(dG(i,gY))}}gW.viewFrom=gY;if(gW.viewTo<gX){gW.view=gW.view.concat(fm(i,gW.viewTo,gX))}else{if(gW.viewTo>gX){gW.view=gW.view.slice(0,dG(i,gX))}}}gW.viewTo=gX}function dr(gV){var gW=gV.display.view,gZ=0;for(var gY=0;gY<gW.length;gY++){var gX=gW[gY];if(!gX.hidden&&(!gX.node||gX.changes)){++gZ}}return gZ}function ew(i,gV){if(i.doc.mode.startState&&i.doc.frontier<i.display.viewTo){i.state.highlight.set(gV,cI(c3,i))}}function c3(i){var gY=i.doc;if(gY.frontier<gY.first){gY.frontier=gY.first}if(gY.frontier>=i.display.viewTo){return}var gW=+new Date+i.options.workTime;var gX=cd(gY.mode,dQ(i,gY.frontier));var gV=[];gY.iter(gY.frontier,Math.min(gY.first+gY.size,i.display.viewTo+500),function(gZ){if(gY.frontier>=i.display.viewFrom){var g2=gZ.styles,g6=gZ.text.length>i.options.maxHighlightLength;var g4=f0(i,gZ,g6?cd(gY.mode,gX):gX,true);gZ.styles=g4.styles;var g1=gZ.styleClasses,g3=g4.classes;if(g3){gZ.styleClasses=g3}else{if(g1){gZ.styleClasses=null}}var g5=!g2||g2.length!=gZ.styles.length||g1!=g3&&(!g1||!g3||g1.bgClass!=g3.bgClass||g1.textClass!=g3.textClass);for(var g0=0;!g5&&g0<g2.length;++g0){g5=g2[g0]!=gZ.styles[g0]}if(g5){gV.push(gY.frontier)}gZ.stateAfter=g6?gX:cd(gY.mode,gX)}else{if(gZ.text.length<=i.options.maxHighlightLength){dM(i,gZ.text,gX)}gZ.stateAfter=gY.frontier%5==0?cd(gY.mode,gX):null}++gY.frontier;if(+new Date>gW){ew(i,i.options.workDelay);return true}});if(gV.length){c0(i,function(){for(var gZ=0;gZ<gV.length;gZ++){S(i,gV[gZ],"text")}})}}var aL=function(gV,i,gW){var gX=gV.display;this.viewport=i;this.visible=cg(gX,gV.doc,i);this.editorIsHidden=!gX.wrapper.offsetWidth;this.wrapperHeight=gX.wrapper.clientHeight;this.wrapperWidth=gX.wrapper.clientWidth;this.oldDisplayWidth=dB(gV);this.force=gW;this.dims=fE(gV);this.events=[]};aL.prototype.signal=function(gV,i){if(fL(gV,i)){this.events.push(arguments)}};aL.prototype.finish=function(){var gW=this;for(var gV=0;gV<this.events.length;gV++){aG.apply(null,gW.events[gV])}};function K(i){var gV=i.display;if(!gV.scrollbarsClipped&&gV.scroller.offsetWidth){gV.nativeBarWidth=gV.scroller.offsetWidth-gV.scroller.clientWidth;gV.heightForcer.style.height=c6(i)+"px";gV.sizer.style.marginBottom=-gV.nativeBarWidth+"px";gV.sizer.style.borderRightWidth=c6(i)+"px";gV.scrollbarsClipped=true}}function C(g3,gX){var gY=g3.display,g2=g3.doc;if(gX.editorIsHidden){eS(g3);return false}if(!gX.force&&gX.visible.from>=gY.viewFrom&&gX.visible.to<=gY.viewTo&&(gY.updateLineNumbers==null||gY.updateLineNumbers>=gY.viewTo)&&gY.renderedView==gY.view&&dr(g3)==0){return false}if(em(g3)){eS(g3);gX.dims=fE(g3)}var gW=g2.first+g2.size;var g0=Math.max(gX.visible.from-g3.options.viewportMargin,g2.first);var g1=Math.min(gW,gX.visible.to+g3.options.viewportMargin);if(gY.viewFrom<g0&&g0-gY.viewFrom<20){g0=Math.max(g2.first,gY.viewFrom)}if(gY.viewTo>g1&&gY.viewTo-g1<20){g1=Math.min(gW,gY.viewTo)}if(ba){g0=aZ(g3.doc,g0);g1=ek(g3.doc,g1)}var gV=g0!=gY.viewFrom||g1!=gY.viewTo||gY.lastWrapHeight!=gX.wrapperHeight||gY.lastWrapWidth!=gX.wrapperWidth;c5(g3,g0,g1);gY.viewOffset=bV(fG(g3.doc,gY.viewFrom));g3.display.mover.style.top=gY.viewOffset+"px";var i=dr(g3);if(!gV&&i==0&&!gX.force&&gY.renderedView==gY.view&&(gY.updateLineNumbers==null||gY.updateLineNumbers>=gY.viewTo)){return false}var gZ=d2();if(i>4){gY.lineDiv.style.display="none"}cx(g3,gY.updateLineNumbers,gX.dims);if(i>4){gY.lineDiv.style.display=""}gY.renderedView=gY.view;if(gZ&&d2()!=gZ&&gZ.offsetHeight){gZ.focus()}ei(gY.cursorDiv);ei(gY.selectionDiv);gY.gutters.style.height=gY.sizer.style.minHeight=0;if(gV){gY.lastWrapHeight=gX.wrapperHeight;gY.lastWrapWidth=gX.wrapperWidth;ew(g3,400)}gY.updateLineNumbers=null;return true}function cu(gV,gY){var i=gY.viewport;for(var gX=true;;gX=false){if(!gX||!gV.options.lineWrapping||gY.oldDisplayWidth==dB(gV)){if(i&&i.top!=null){i={top:Math.min(gV.doc.height+bR(gV.display)-c8(gV),i.top)}}gY.visible=cg(gV.display,gV.doc,i);if(gY.visible.from>=gV.display.viewFrom&&gY.visible.to<=gV.display.viewTo){break}}if(!C(gV,gY)){break}bc(gV);var gW=dO(gV);bL(gV);fp(gV,gW);dN(gV,gW)}gY.signal(gV,"update",gV);if(gV.display.viewFrom!=gV.display.reportedViewFrom||gV.display.viewTo!=gV.display.reportedViewTo){gY.signal(gV,"viewportChange",gV,gV.display.viewFrom,gV.display.viewTo);gV.display.reportedViewFrom=gV.display.viewFrom;gV.display.reportedViewTo=gV.display.viewTo}}function d8(gV,i){var gX=new aL(gV,i);if(C(gV,gX)){bc(gV);cu(gV,gX);var gW=dO(gV);bL(gV);fp(gV,gW);dN(gV,gW);gX.finish()}}function cx(g6,gX,g5){var g2=g6.display,g8=g6.options.lineNumbers;var gV=g2.lineDiv,g7=gV.firstChild;function g1(g9){var i=g9.nextSibling;if(dd&&ch&&g6.display.currentWheelTarget==g9){g9.style.display="none"}else{g9.parentNode.removeChild(g9)}return i}var g3=g2.view,g0=g2.viewFrom;for(var gY=0;gY<g3.length;gY++){var gZ=g3[gY];if(gZ.hidden){}else{if(!gZ.node||gZ.node.parentNode!=gV){var gW=aH(g6,gZ,g0,g5);gV.insertBefore(gW,g7)}else{while(g7!=gZ.node){g7=g1(g7)}var g4=g8&&gX!=null&&gX<=g0&&gZ.lineNumber;if(gZ.changes){if(dy(gZ.changes,"gutter")>-1){g4=false}ad(g6,gZ,g0,g5)}if(g4){ei(gZ.lineNumber);gZ.lineNumber.appendChild(document.createTextNode(eN(g6.options,g0)))}g7=gZ.node.nextSibling}}g0+=gZ.size}while(g7){g7=g1(g7)}}function dh(i){var gV=i.display.gutters.offsetWidth;i.display.sizer.style.marginLeft=gV+"px"}function dN(i,gV){i.display.sizer.style.minHeight=gV.docHeight+"px";i.display.heightForcer.style.top=gV.docHeight+"px";i.display.gutters.style.height=(gV.docHeight+i.display.barHeight+c6(i))+"px"}function eu(gV){var gW=gV.display.gutters,g0=gV.options.gutters;ei(gW);var gX=0;for(;gX<g0.length;++gX){var gY=g0[gX];var gZ=gW.appendChild(gC("div",null,"CodeMirror-gutter "+gY));if(gY=="CodeMirror-linenumbers"){gV.display.lineGutter=gZ;gZ.style.width=(gV.display.lineNumWidth||1)+"px"}}gW.style.display=gX?"":"none";dh(gV)}function cp(i){var gV=dy(i.gutters,"CodeMirror-linenumbers");if(gV==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(gV>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(gV,1)}}}var gB=function(i,gV){this.ranges=i;this.primIndex=gV};gB.prototype.primary=function(){return this.ranges[this.primIndex]};gB.prototype.equals=function(gV){var gZ=this;if(gV==this){return true}if(gV.primIndex!=this.primIndex||gV.ranges.length!=this.ranges.length){return false}for(var gX=0;gX<this.ranges.length;gX++){var gW=gZ.ranges[gX],gY=gV.ranges[gX];if(!Y(gW.anchor,gY.anchor)||!Y(gW.head,gY.head)){return false}}return true};gB.prototype.deepCopy=function(){var gX=this;var gV=[];for(var gW=0;gW<this.ranges.length;gW++){gV[gW]=new ec(ct(gX.ranges[gW].anchor),ct(gX.ranges[gW].head))}return new gB(gV,this.primIndex)};gB.prototype.somethingSelected=function(){var gW=this;for(var gV=0;gV<this.ranges.length;gV++){if(!gW.ranges[gV].empty()){return true}}return false};gB.prototype.contains=function(gZ,gV){var gY=this;if(!gV){gV=gZ}for(var gX=0;gX<this.ranges.length;gX++){var gW=gY.ranges[gX];if(cq(gV,gW.from())>=0&&cq(gZ,gW.to())<=0){return gX}}return -1};var ec=function(i,gV){this.anchor=i;this.head=gV};ec.prototype.from=function(){return at(this.anchor,this.head)};ec.prototype.to=function(){return bG(this.anchor,this.head)};ec.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function cJ(gV,g2){var gX=gV[g2];gV.sort(function(g4,i){return cq(g4.from(),i.from())});g2=dy(gV,gX);for(var gZ=1;gZ<gV.length;gZ++){var g3=gV[gZ],gW=gV[gZ-1];if(cq(gW.to(),g3.from())>=0){var g0=at(gW.from(),g3.from()),g1=bG(gW.to(),g3.to());var gY=gW.empty()?g3.from()==g3.head:gW.from()==gW.head;if(gZ<=g2){--g2}gV.splice(--gZ,2,new ec(gY?g1:g0,gY?g0:g1))}}return new gB(gV,g2)}function fh(i,gV){return new gB([new ec(i,gV||i)],0)}function da(i){if(!i.text){return i.to}return X(i.from.line+i.text.length-1,f9(i.text).length+(i.text.length==1?i.from.ch:0))}function b9(gX,gW){if(cq(gX,gW.from)<0){return gX}if(cq(gX,gW.to)<=0){return da(gW)}var i=gX.line+gW.text.length-(gW.to.line-gW.from.line)-1,gV=gX.ch;if(gX.line==gW.to.line){gV+=da(gW).ch-gW.to.ch}return X(i,gV)}function fK(gY,gZ){var gW=[];for(var gX=0;gX<gY.sel.ranges.length;gX++){var gV=gY.sel.ranges[gX];gW.push(new ec(b9(gV.anchor,gZ),b9(gV.head,gZ)))}return cJ(gW,gY.sel.primIndex)}function bC(gW,gV,i){if(gW.line==gV.line){return X(i.line,gW.ch-gV.ch+i.ch)}else{return X(i.line+(gW.line-gV.line),gW.ch)}}function ah(g5,g2,gW){var gX=[];var gV=X(g5.first,0),g6=gV;for(var gZ=0;gZ<g2.length;gZ++){var g1=g2[gZ];var g4=bC(g1.from,gV,g6);var g3=bC(da(g1),gV,g6);gV=g1.to;g6=g3;if(gW=="around"){var g0=g5.sel.ranges[gZ],gY=cq(g0.head,g0.anchor)<0;gX[gZ]=new ec(gY?g3:g4,gY?g4:g3)}else{gX[gZ]=new ec(g4,g4)}}return new gB(gX,g5.sel.primIndex)}function bz(i){i.doc.mode=f2(i.options,i.doc.modeOption);eF(i)}function eF(i){i.doc.iter(function(gV){if(gV.stateAfter){gV.stateAfter=null}if(gV.styles){gV.styles=null}});i.doc.frontier=i.doc.first;ew(i,100);i.state.modeGen++;if(i.curOp){aj(i)}}function d7(i,gV){return gV.from.ch==0&&gV.to.ch==0&&f9(gV.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function fZ(hb,g4,gY,g2){function gX(hc){return gY?gY[hc]:null}function g3(hc,he,hd){eH(hc,he,hd,g2);ag(hc,"change",hc,g4)}function g8(hf,hd){var hc=[];for(var he=hf;he<hd;++he){hc.push(new gG(g6[he],gX(he),g2))}return hc}var g9=g4.from,gV=g4.to,g6=g4.text;var g5=fG(hb,g9.line),i=fG(hb,gV.line);var gW=f9(g6),ha=gX(g6.length-1),g7=gV.line-g9.line;if(g4.full){hb.insert(0,g8(0,g6.length));hb.remove(g6.length,hb.size-g6.length)}else{if(d7(hb,g4)){var g1=g8(0,g6.length-1);g3(i,i.text,ha);if(g7){hb.remove(g9.line,g7)}if(g1.length){hb.insert(g9.line,g1)}}else{if(g5==i){if(g6.length==1){g3(g5,g5.text.slice(0,g9.ch)+gW+g5.text.slice(gV.ch),ha)}else{var g0=g8(1,g6.length-1);g0.push(new gG(gW+g5.text.slice(gV.ch),ha,g2));g3(g5,g5.text.slice(0,g9.ch)+g6[0],gX(0));hb.insert(g9.line+1,g0)}}else{if(g6.length==1){g3(g5,g5.text.slice(0,g9.ch)+g6[0]+i.text.slice(gV.ch),gX(0));hb.remove(g9.line+1,g7)}else{g3(g5,g5.text.slice(0,g9.ch)+g6[0],gX(0));g3(i,gW+i.text.slice(gV.ch),ha);var gZ=g8(1,g6.length-1);if(g7>1){hb.remove(g9.line+1,g7-1)}hb.insert(g9.line+1,gZ)}}}}ag(hb,"change",hb,g4)}function eo(gX,gW,gV){function i(g3,g1,gZ){if(g3.linked){for(var g0=0;g0<g3.linked.length;++g0){var gY=g3.linked[g0];if(gY.doc==g1){continue}var g2=gZ&&gY.sharedHist;if(gV&&!g2){continue}gW(gY.doc,g2);i(gY.doc,g3,g2)}}}i(gX,null,true)}function et(i,gV){if(gV.cm){throw new Error("This document is already in use.")}i.doc=gV;gV.cm=i;aa(i);bz(i);B(i);if(!i.options.lineWrapping){f(i)}i.options.mode=gV.modeOption;aj(i)}function B(i){(i.doc.direction=="rtl"?f3:h)(i.display.lineDiv,"CodeMirror-rtl")}function ef(i){c0(i,function(){B(i);aj(i)})}function gr(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function dK(i,gW){var gV={from:ct(gW.from),to:da(gW),text:gE(i,gW.from,gW.to)};b8(i,gV,gW.from.line,gW.to.line+1);eo(i,function(gX){return b8(gX,gV,gW.from.line,gW.to.line+1)},true);return gV}function f4(gV){while(gV.length){var i=f9(gV);if(i.ranges){gV.pop()}else{break}}}function fc(gV,i){if(i){f4(gV.done);return f9(gV.done)}else{if(gV.done.length&&!f9(gV.done).ranges){return f9(gV.done)}else{if(gV.done.length>1&&!gV.done[gV.done.length-2].ranges){gV.done.pop();return f9(gV.done)}}}}function gg(g0,gY,i,gX){var gW=g0.history;gW.undone.length=0;var gV=+new Date,g1;var g2;if((gW.lastOp==gX||gW.lastOrigin==gY.origin&&gY.origin&&((gY.origin.charAt(0)=="+"&&g0.cm&&gW.lastModTime>gV-g0.cm.options.historyEventDelay)||gY.origin.charAt(0)=="*"))&&(g1=fc(gW,gW.lastOp==gX))){g2=f9(g1.changes);if(cq(gY.from,gY.to)==0&&cq(gY.from,g2.to)==0){g2.to=da(gY)}else{g1.changes.push(dK(g0,gY))}}else{var gZ=f9(gW.done);if(!gZ||!gZ.ranges){c2(g0.sel,gW.done)}g1={changes:[dK(g0,gY)],generation:gW.generation};gW.done.push(g1);while(gW.done.length>gW.undoDepth){gW.done.shift();if(!gW.done[0].ranges){gW.done.shift()}}}gW.done.push(i);gW.generation=++gW.maxGeneration;gW.lastModTime=gW.lastSelTime=gV;gW.lastOp=gW.lastSelOp=gX;gW.lastOrigin=gW.lastSelOrigin=gY.origin;if(!g2){aG(g0,"historyAdded")}}function bJ(gY,i,gW,gX){var gV=i.charAt(0);return gV=="*"||gV=="+"&&gW.ranges.length==gX.ranges.length&&gW.somethingSelected()==gX.somethingSelected()&&new Date-gY.history.lastSelTime<=(gY.cm?gY.cm.options.historyEventDelay:500)}function gO(gZ,gX,i,gW){var gY=gZ.history,gV=gW&&gW.origin;if(i==gY.lastSelOp||(gV&&gY.lastSelOrigin==gV&&(gY.lastModTime==gY.lastSelTime&&gY.lastOrigin==gV||bJ(gZ,gV,f9(gY.done),gX)))){gY.done[gY.done.length-1]=gX}else{c2(gX,gY.done)}gY.lastSelTime=+new Date;gY.lastSelOrigin=gV;gY.lastSelOp=i;if(gW&&gW.clearRedo!==false){f4(gY.undone)}}function c2(gV,i){var gW=f9(i);if(!(gW&&gW.ranges&&gW.equals(gV))){i.push(gV)}}function b8(gV,gZ,gY,gX){var i=gZ["spans_"+gV.id],gW=0;gV.iter(Math.max(gV.first,gY),Math.min(gV.first+gV.size,gX),function(g0){if(g0.markedSpans){(i||(i=gZ["spans_"+gV.id]={}))[gW]=g0.markedSpans}++gW})}function bo(gX){if(!gX){return null}var gV;for(var gW=0;gW<gX.length;++gW){if(gX[gW].marker.explicitlyCleared){if(!gV){gV=gX.slice(0,gW)}}else{if(gV){gV.push(gX[gW])}}}return !gV?gX:gV.length?gV:null}function ce(gY,gZ){var gX=gZ["spans_"+gY.id];if(!gX){return null}var gV=[];for(var gW=0;gW<gZ.text.length;++gW){gV.push(bo(gX[gW]))}return gV}function eq(g3,g1){var gV=ce(g3,g1);var g4=eD(g3,g1);if(!gV){return g4}if(!g4){return gV}for(var gY=0;gY<gV.length;++gY){var gZ=gV[gY],g0=g4[gY];if(gZ&&g0){spans:for(var gX=0;gX<g0.length;++gX){var g2=g0[gX];for(var gW=0;gW<gZ.length;++gW){if(gZ[gW].marker==g2.marker){continue spans}}gZ.push(g2)}}else{if(g0){gV[gY]=g0}}}return gV}function bY(g6,gY,g5){var gW=[];for(var g1=0;g1<g6.length;++g1){var gX=g6[g1];if(gX.ranges){gW.push(g5?gB.prototype.deepCopy.call(gX):gX);continue}var g3=gX.changes,g4=[];gW.push({changes:g4});for(var g0=0;g0<g3.length;++g0){var g2=g3[g0],gZ=(void 0);g4.push({from:g2.from,to:g2.to,text:g2.text});if(gY){for(var gV in g2){if(gZ=gV.match(/^spans_(\d+)$/)){if(dy(gY,Number(gZ[1]))>-1){f9(g4)[gV]=g2[gV];delete g2[gV]}}}}}}return gW}function fV(gZ,gV,gY,i){if(gZ.cm&&gZ.cm.display.shift||gZ.extend){var gX=gV.anchor;if(i){var gW=cq(gY,gX)<0;if(gW!=(cq(i,gX)<0)){gX=gY;gY=i}else{if(gW!=(cq(gY,i)<0)){gY=i}}}return new ec(gX,gY)}else{return new ec(i||gY,gY)}}function gw(gX,gW,i,gV){b3(gX,new gB([fV(gX,gX.sel.primary(),gW,i)],0),gV)}function ax(g0,gZ,gX){var gW=[];for(var gY=0;gY<g0.sel.ranges.length;gY++){gW[gY]=fV(g0,g0.sel.ranges[gY],gZ[gY],null)}var gV=cJ(gW,g0.sel.primIndex);b3(g0,gV,gX)}function e(gZ,gY,gW,gX){var gV=gZ.sel.ranges.slice(0);gV[gY]=gW;b3(gZ,cJ(gV,gZ.sel.primIndex),gX)}function G(gX,gV,gW,i){b3(gX,fh(gV,gW),i)}function b(gX,gV,i){var gW={ranges:gV.ranges,update:function(gY){var g0=this;this.ranges=[];for(var gZ=0;gZ<gY.length;gZ++){g0.ranges[gZ]=new ec(ge(gX,gY[gZ].anchor),ge(gX,gY[gZ].head))}},origin:i&&i.origin};aG(gX,"beforeSelectionChange",gX,gW);if(gX.cm){aG(gX.cm,"beforeSelectionChange",gX.cm,gW)}if(gW.ranges!=gV.ranges){return cJ(gW.ranges,gW.ranges.length-1)}else{return gV}}function fz(gY,gX,gV){var i=gY.history.done,gW=f9(i);if(gW&&gW.ranges){i[i.length-1]=gX;eJ(gY,gX,gV)}else{b3(gY,gX,gV)}}function b3(gW,gV,i){eJ(gW,gV,i);gO(gW,gW.sel,gW.cm?gW.cm.curOp.id:NaN,i)}function eJ(gX,gW,gV){if(fL(gX,"beforeSelectionChange")||gX.cm&&fL(gX.cm,"beforeSelectionChange")){gW=b(gX,gW,gV)}var i=gV&&gV.bias||(cq(gW.primary().head,gX.sel.primary().head)<0?-1:1);dm(gX,o(gX,gW,i,true));if(!(gV&&gV.scroll===false)&&gX.cm){f8(gX.cm)}}function dm(gV,i){if(i.equals(gV.sel)){return}gV.sel=i;if(gV.cm){gV.cm.curOp.updateInput=gV.cm.curOp.selectionChanged=true;W(gV.cm)}ag(gV,"cursorActivity",gV)}function eT(i){dm(i,o(i,i.sel,null,false),ab)}function o(g4,gV,g1,g2){var gY;for(var gZ=0;gZ<gV.ranges.length;gZ++){var g0=gV.ranges[gZ];var gW=gV.ranges.length==g4.sel.ranges.length&&g4.sel.ranges[gZ];var g3=b4(g4,g0.anchor,gW&&gW.anchor,g1,g2);var gX=b4(g4,g0.head,gW&&gW.head,g1,g2);if(gY||g3!=g0.anchor||gX!=g0.head){if(!gY){gY=gV.ranges.slice(0,gZ)}gY[gZ]=new ec(g3,gX)}}return gY?cJ(gY,gV.primIndex):gV}function e8(g5,g3,gY,gX,g1){var g6=fG(g5,g3.line);if(g6.markedSpans){for(var gZ=0;gZ<g6.markedSpans.length;++gZ){var gV=g6.markedSpans[gZ],gW=gV.marker;if((gV.from==null||(gW.inclusiveLeft?gV.from<=g3.ch:gV.from<g3.ch))&&(gV.to==null||(gW.inclusiveRight?gV.to>=g3.ch:gV.to>g3.ch))){if(g1){aG(gW,"beforeCursorEnter");if(gW.explicitlyCleared){if(!g6.markedSpans){break}else{--gZ;continue}}}if(!gW.atomic){continue}if(gY){var g2=gW.find(gX<0?1:-1),g4=(void 0);if(gX<0?gW.inclusiveRight:gW.inclusiveLeft){g2=gR(g5,g2,-gX,g2&&g2.line==g3.line?g6:null)}if(g2&&g2.line==g3.line&&(g4=cq(g2,gY))&&(gX<0?g4<0:g4>0)){return e8(g5,g2,g3,gX,g1)}}var g0=gW.find(gX<0?-1:1);if(gX<0?gW.inclusiveLeft:gW.inclusiveRight){g0=gR(g5,g0,gX,g0.line==g3.line?g6:null)}return g0?e8(g5,g0,g3,gX,g1):null}}}return g3}function b4(gZ,g0,gX,gV,i){var gW=gV||1;var gY=e8(gZ,g0,gX,gW,i)||(!i&&e8(gZ,g0,gX,gW,true))||e8(gZ,g0,gX,-gW,i)||(!i&&e8(gZ,g0,gX,-gW,true));if(!gY){gZ.cantEdit=true;return X(gZ.first,0)}return gY}function gR(gW,gX,gV,i){if(gV<0&&gX.ch==0){if(gX.line>gW.first){return ge(gW,X(gX.line-1))}else{return null}}else{if(gV>0&&gX.ch==(i||fG(gW,gX.line)).text.length){if(gX.line<gW.first+gW.size-1){return X(gX.line+1,0)}else{return null}}else{return new X(gX.line,gX.ch+gV)}}}function an(i){i.setSelection(X(i.firstLine(),0),X(i.lastLine()),ab)}function d5(gV,gX,gW){var i={canceled:false,from:gX.from,to:gX.to,text:gX.text,origin:gX.origin,cancel:function(){return i.canceled=true}};if(gW){i.update=function(g1,g0,gZ,gY){if(g1){i.from=ge(gV,g1)}if(g0){i.to=ge(gV,g0)}if(gZ){i.text=gZ}if(gY!==undefined){i.origin=gY}}}aG(gV,"beforeChange",gV,i);if(gV.cm){aG(gV.cm,"beforeChange",gV.cm,i)}if(i.canceled){return null}return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function bj(gY,gZ,gX){if(gY.cm){if(!gY.cm.curOp){return de(gY.cm,bj)(gY,gZ,gX)}if(gY.cm.state.suppressEdits){return}}if(fL(gY,"beforeChange")||gY.cm&&fL(gY.cm,"beforeChange")){gZ=d5(gY,gZ,true);if(!gZ){return}}var gW=gP&&!gX&&cV(gY,gZ.from,gZ.to);if(gW){for(var gV=gW.length-1;gV>=0;--gV){L(gY,{from:gW[gV].from,to:gW[gV].to,text:gV?[""]:gZ.text})}}else{L(gY,gZ)}}function L(gW,gX){if(gX.text.length==1&&gX.text[0]==""&&cq(gX.from,gX.to)==0){return}var gV=fK(gW,gX);gg(gW,gX,gV,gW.cm?gW.cm.curOp.id:NaN);ev(gW,gX,gV,eD(gW,gX));var i=[];eo(gW,function(gZ,gY){if(!gY&&dy(i,gZ.history)==-1){dS(gZ.history,gX);i.push(gZ.history)}ev(gZ,gX,null,eD(gZ,gX))})}function ci(g6,g5,g8){if(g6.cm&&g6.cm.state.suppressEdits&&!g8){return}var g4=g6.history,gW,gY=g6.sel;var gV=g5=="undo"?g4.done:g4.undone,g7=g5=="undo"?g4.undone:g4.done;var g1=0;for(;g1<gV.length;g1++){gW=gV[g1];if(g8?gW.ranges&&!gW.equals(g6.sel):!gW.ranges){break}}if(g1==gV.length){return}g4.lastOrigin=g4.lastSelOrigin=null;for(;;){gW=gV.pop();if(gW.ranges){c2(gW,g7);if(g8&&!gW.equals(g6.sel)){b3(g6,gW,{clearRedo:false});return}gY=gW}else{break}}var g3=[];c2(gY,g7);g7.push({changes:g3,generation:g4.generation});g4.generation=gW.generation||++g4.maxGeneration;var gX=fL(g6,"beforeChange")||g6.cm&&fL(g6.cm,"beforeChange");var g2=function(g9){var hc=gW.changes[g9];hc.origin=g5;if(gX&&!d5(g6,hc,false)){gV.length=0;return{}}g3.push(dK(g6,hc));var hb=g9?fK(g6,hc):f9(gV);ev(g6,hc,hb,eq(g6,hc));if(!g9&&g6.cm){g6.cm.scrollIntoView({from:hc.from,to:da(hc)})}var ha=[];eo(g6,function(hd,i){if(!i&&dy(ha,hd.history)==-1){dS(hd.history,hc);ha.push(hd.history)}ev(hd,hc,null,eq(hd,hc))})};for(var gZ=gW.changes.length-1;gZ>=0;--gZ){var g0=g2(gZ);if(g0){return g0.v}}}function fO(gV,gX){if(gX==0){return}gV.first+=gX;gV.sel=new gB(b2(gV.sel.ranges,function(gY){return new ec(X(gY.anchor.line+gX,gY.anchor.ch),X(gY.head.line+gX,gY.head.ch))}),gV.sel.primIndex);if(gV.cm){aj(gV.cm,gV.first,gV.first-gX,gX);for(var gW=gV.cm.display,i=gW.viewFrom;i<gW.viewTo;i++){S(gV.cm,i,"gutter")}}}function ev(gY,gZ,gX,gV){if(gY.cm&&!gY.cm.curOp){return de(gY.cm,ev)(gY,gZ,gX,gV)}if(gZ.to.line<gY.first){fO(gY,gZ.text.length-1-(gZ.to.line-gZ.from.line));return}if(gZ.from.line>gY.lastLine()){return}if(gZ.from.line<gY.first){var i=gZ.text.length-1-(gY.first-gZ.from.line);fO(gY,i);gZ={from:X(gY.first,0),to:X(gZ.to.line+i,gZ.to.ch),text:[f9(gZ.text)],origin:gZ.origin}}var gW=gY.lastLine();if(gZ.to.line>gW){gZ={from:gZ.from,to:X(gW,fG(gY,gW).text.length),text:[gZ.text[0]],origin:gZ.origin}}gZ.removed=gE(gY,gZ.from,gZ.to);if(!gX){gX=fK(gY,gZ)}if(gY.cm){aK(gY.cm,gZ,gV)}else{fZ(gY,gZ,gV)}eJ(gY,gX,ab)}function aK(g5,g1,gZ){var g4=g5.doc,g0=g5.display,g2=g1.from,g3=g1.to;var i=false,gY=g2.line;if(!g5.options.lineWrapping){gY=bW(y(fG(g4,g2.line)));g4.iter(gY,g3.line+1,function(g7){if(g7==g0.maxLine){i=true;return true}})}if(g4.sel.contains(g1.from,g1.to)>-1){W(g5)}fZ(g4,g1,gZ,bh(g5));if(!g5.options.lineWrapping){g4.iter(gY,g2.line+g1.text.length,function(g8){var g7=eG(g8);if(g7>g0.maxLineLength){g0.maxLine=g8;g0.maxLineLength=g7;g0.maxLineChanged=true;i=false}});if(i){g5.curOp.updateMaxLine=true}}g4.frontier=Math.min(g4.frontier,g2.line);ew(g5,400);var g6=g1.text.length-(g3.line-g2.line)-1;if(g1.full){aj(g5)}else{if(g2.line==g3.line&&g1.text.length==1&&!d7(g5.doc,g1)){S(g5,g2.line,"text")}else{aj(g5,g2.line,g3.line+1,g6)}}var gW=fL(g5,"changes"),gX=fL(g5,"change");if(gX||gW){var gV={from:g2,to:g3,text:g1.text,removed:g1.removed,origin:g1.origin};if(gX){ag(g5,"change",g5,gV)}if(gW){(g5.curOp.changeObjs||(g5.curOp.changeObjs=[])).push(gV)}}g5.display.selForContextMenu=null}function a4(gX,gW,gZ,gY,i){if(!gY){gY=gZ}if(cq(gY,gZ)<0){var gV=gY;gY=gZ;gZ=gV}if(typeof gW=="string"){gW=gX.splitLines(gW)}bj(gX,{from:gZ,to:gY,text:gW,origin:i})}function J(gX,gW,gV,i){if(gV<gX.line){gX.line+=i}else{if(gW<gX.line){gX.line=gW;gX.ch=0}}}function fI(gZ,g1,g2,g3){for(var gY=0;gY<gZ.length;++gY){var gV=gZ[gY],g0=true;if(gV.ranges){if(!gV.copied){gV=gZ[gY]=gV.deepCopy();gV.copied=true}for(var gX=0;gX<gV.ranges.length;gX++){J(gV.ranges[gX].anchor,g1,g2,g3);J(gV.ranges[gX].head,g1,g2,g3)}continue}for(var gW=0;gW<gV.changes.length;++gW){var g4=gV.changes[gW];if(g2<g4.from.line){g4.from=X(g4.from.line+g3,g4.from.ch);g4.to=X(g4.to.line+g3,g4.to.ch)}else{if(g1<=g4.to.line){g0=false;break}}}if(!g0){gZ.splice(0,gY+1);gY=0}}}function dS(gV,gY){var gX=gY.from.line,gW=gY.to.line,i=gY.text.length-(gW-gX)-1;fI(gV.done,gX,gW,i);fI(gV.undone,gX,gW,i)}function eV(gX,gW,i,gZ){var gY=gW,gV=gW;if(typeof gW=="number"){gV=fG(gX,di(gX,gW))}else{gY=bW(gW)}if(gY==null){return null}if(gZ(gV,gY)&&gX.cm){S(gX.cm,gY,i)}return gV}var fq=function(gW){var gY=this;this.lines=gW;this.parent=null;var gV=0;for(var gX=0;gX<gW.length;++gX){gW[gX].parent=gY;gV+=gW[gX].height}this.height=gV};fq.prototype.chunkSize=function(){return this.lines.length};fq.prototype.removeInner=function(gV,g0){var gZ=this;for(var gX=gV,gY=gV+g0;gX<gY;++gX){var gW=gZ.lines[gX];gZ.height-=gW.height;bK(gW);ag(gW,"delete")}this.lines.splice(gV,g0)};fq.prototype.collapse=function(i){i.push.apply(i,this.lines)};fq.prototype.insertInner=function(gW,gX,gV){var gZ=this;this.height+=gV;this.lines=this.lines.slice(0,gW).concat(gX).concat(this.lines.slice(gW));for(var gY=0;gY<gX.length;++gY){gX[gY].parent=gZ}};fq.prototype.iterN=function(i,gY,gX){var gW=this;for(var gV=i+gY;i<gV;++i){if(gX(gW.lines[i])){return true}}};var fY=function(gY){var g0=this;this.children=gY;var gX=0,gV=0;for(var gW=0;gW<gY.length;++gW){var gZ=gY[gW];gX+=gZ.chunkSize();gV+=gZ.height;gZ.parent=g0}this.size=gX;this.height=gV;this.parent=null};fY.prototype.chunkSize=function(){return this.size};fY.prototype.removeInner=function(gX,gW){var gZ=this;this.size-=gW;for(var gY=0;gY<this.children.length;++gY){var gV=gZ.children[gY],g1=gV.chunkSize();if(gX<g1){var g0=Math.min(gW,g1-gX),g2=gV.height;gV.removeInner(gX,g0);gZ.height-=g2-gV.height;if(g1==g0){gZ.children.splice(gY--,1);gV.parent=null}if((gW-=g0)==0){break}gX=0}else{gX-=g1}}if(this.size-gW<25&&(this.children.length>1||!(this.children[0] instanceof fq))){var g3=[];this.collapse(g3);this.children=[new fq(g3)];this.children[0].parent=this}};fY.prototype.collapse=function(gV){var gX=this;for(var gW=0;gW<this.children.length;++gW){gX.children[gW].collapse(gV)}};fY.prototype.insertInner=function(gW,g4,g3){var gZ=this;this.size+=g4.length;this.height+=g3;for(var gY=0;gY<this.children.length;++gY){var gV=gZ.children[gY],g1=gV.chunkSize();if(gW<=g1){gV.insertInner(gW,g4,g3);if(gV.lines&&gV.lines.length>50){var gX=gV.lines.length%25+25;for(var g2=gX;g2<gV.lines.length;){var g0=new fq(gV.lines.slice(g2,g2+=25));gV.height-=g0.height;gZ.children.splice(++gY,0,g0);g0.parent=gZ}gV.lines=gV.lines.slice(0,gX);gZ.maybeSpill()}break}gW-=g1}};fY.prototype.maybeSpill=function(){if(this.children.length<=10){return}var gX=this;do{var gV=gX.children.splice(gX.children.length-5,5);var gW=new fY(gV);if(!gX.parent){var gY=new fY(gX.children);gY.parent=gX;gX.children=[gY,gW];gX=gY}else{gX.size-=gW.size;gX.height-=gW.height;var i=dy(gX.parent.children,gX);gX.parent.children.splice(i+1,0,gW)}gW.parent=gX.parent}while(gX.children.length>10);gX.parent.maybeSpill()};fY.prototype.iterN=function(gV,g2,g1){var g0=this;for(var gW=0;gW<this.children.length;++gW){var gZ=g0.children[gW],gY=gZ.chunkSize();if(gV<gY){var gX=Math.min(g2,gY-gV);if(gZ.iterN(gV,gX,g1)){return true}if((g2-=gX)==0){break}gV=0}else{gV-=gY}}};var dP=function(gX,gW,i){var gY=this;if(i){for(var gV in i){if(i.hasOwnProperty(gV)){gY[gV]=i[gV]}}}this.doc=gX;this.node=gW};dP.prototype.clear=function(){var g1=this;var gW=this.doc.cm,gY=this.line.widgets,gX=this.line,g0=bW(gX);if(g0==null||!gY){return}for(var gZ=0;gZ<gY.length;++gZ){if(gY[gZ]==g1){gY.splice(gZ--,1)}}if(!gY.length){gX.widgets=null}var gV=db(this);gH(gX,Math.max(0,gX.height-gV));if(gW){c0(gW,function(){ee(gW,gX,-gV);S(gW,g0,"widget")});ag(gW,"lineWidgetCleared",gW,this,g0)}};dP.prototype.changed=function(){var gY=this;var gV=this.height,i=this.doc.cm,gW=this.line;this.height=null;var gX=db(this)-gV;if(!gX){return}gH(gW,gW.height+gX);if(i){c0(i,function(){i.curOp.forceUpdate=true;ee(i,gW,gX);ag(i,"lineWidgetChanged",i,gY,bW(gW))})}};bI(dP);function ee(i,gV,gW){if(bV(gV)<((i.curOp&&i.curOp.scrollTop)||i.doc.scrollTop)){cZ(i,null,gW)}}function bP(gZ,gY,gW,gV){var gX=new dP(gZ,gW,gV);var i=gZ.cm;if(i&&gX.noHScroll){i.display.alignWidgets=true}eV(gZ,gY,"widget",function(g1){var g2=g1.widgets||(g1.widgets=[]);if(gX.insertAt==null){g2.push(gX)}else{g2.splice(Math.min(g2.length-1,Math.max(0,gX.insertAt)),0,gX)}gX.line=g1;if(i&&!fW(gZ,g1)){var g0=bV(g1)<gZ.scrollTop;gH(g1,g1.height+db(gX));if(g0){cZ(i,null,gX.height)}i.curOp.forceUpdate=true}return true});ag(i,"lineWidgetAdded",i,gX,typeof gY=="number"?gY:bW(gY));return gX}var a7=0;var R=function(gV,i){this.lines=[];this.type=i;this.doc=gV;this.id=++a7};R.prototype.clear=function(){var g0=this;if(this.explicitlyCleared){return}var g4=this.doc.cm,gX=g4&&!g4.curOp;if(gX){cW(g4)}if(fL(this,"clear")){var g5=this.find();if(g5){ag(this,"clear",g5.from,g5.to)}}var gY=null,g2=null;for(var gZ=0;gZ<this.lines.length;++gZ){var g6=g0.lines[gZ];var g3=fB(g6.markedSpans,g0);if(g4&&!g0.collapsed){S(g4,bW(g6),"text")}else{if(g4){if(g3.to!=null){g2=bW(g6)}if(g3.from!=null){gY=bW(g6)}}}g6.markedSpans=e6(g6.markedSpans,g3);if(g3.from==null&&g0.collapsed&&!fW(g0.doc,g6)&&g4){gH(g6,a1(g4.display))}}if(g4&&this.collapsed&&!g4.options.lineWrapping){for(var gW=0;gW<this.lines.length;++gW){var gV=y(g0.lines[gW]),g1=eG(gV);if(g1>g4.display.maxLineLength){g4.display.maxLine=gV;g4.display.maxLineLength=g1;g4.display.maxLineChanged=true}}}if(gY!=null&&g4&&this.collapsed){aj(g4,gY,g2+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(g4){eT(g4.doc)}}if(g4){ag(g4,"markerCleared",g4,this,gY,g2)}if(gX){ao(g4)}if(this.parent){this.parent.clear()}};R.prototype.find=function(gY,gW){var g2=this;if(gY==null&&this.type=="bookmark"){gY=1}var g1,g0;for(var gX=0;gX<this.lines.length;++gX){var gV=g2.lines[gX];var gZ=fB(gV.markedSpans,g2);if(gZ.from!=null){g1=X(gW?gV:bW(gV),gZ.from);if(gY==-1){return g1}}if(gZ.to!=null){g0=X(gW?gV:bW(gV),gZ.to);if(gY==1){return g0}}}return g1&&{from:g1,to:g0}};R.prototype.changed=function(){var gX=this;var gW=this.find(-1,true),gV=this,i=this.doc.cm;if(!gW||!i){return}c0(i,function(){var gZ=gW.line,g0=bW(gW.line);var gY=fD(i,g0);if(gY){aw(gY);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!fW(gV.doc,gZ)&&gV.height!=null){var g2=gV.height;gV.height=null;var g1=db(gV)-g2;if(g1){gH(gZ,gZ.height+g1)}}ag(i,"markerChanged",i,gX)})};R.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var gV=this.doc.cm.curOp;if(!gV.maybeHiddenMarkers||dy(gV.maybeHiddenMarkers,this)==-1){(gV.maybeUnhiddenMarkers||(gV.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(i)};R.prototype.detachLine=function(i){this.lines.splice(dy(this.lines,i),1);if(!this.lines.length&&this.doc.cm){var gV=this.doc.cm.curOp;(gV.maybeHiddenMarkers||(gV.maybeHiddenMarkers=[])).push(this)}};bI(R);function e3(g3,g1,g2,g5,gZ){if(g5&&g5.shared){return O(g3,g1,g2,g5,gZ)}if(g3.cm&&!g3.cm.curOp){return de(g3.cm,e3)(g3,g1,g2,g5,gZ)}var gY=new R(g3,gZ),g4=cq(g1,g2);if(g5){aQ(g5,gY,false)}if(g4>0||g4==0&&gY.clearWhenEmpty!==false){return gY}if(gY.replacedWith){gY.collapsed=true;gY.widgetNode=gI("span",[gY.replacedWith],"CodeMirror-widget");if(!g5.handleMouseEvents){gY.widgetNode.setAttribute("cm-ignore-events","true")}if(g5.insertLeft){gY.widgetNode.insertLeft=true}}if(gY.collapsed){if(z(g3,g1.line,g1,g2,gY)||g1.line!=g2.line&&z(g3,g2.line,g1,g2,gY)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bF()}if(gY.addToHistory){gg(g3,{from:g1,to:g2,origin:"markText"},g3.sel,NaN)}var gW=g1.line,g0=g3.cm,gV;g3.iter(gW,g2.line+1,function(i){if(g0&&gY.collapsed&&!g0.options.lineWrapping&&y(i)==g0.display.maxLine){gV=true}if(gY.collapsed&&gW!=g1.line){gH(i,0)}co(i,new eB(gY,gW==g1.line?g1.ch:null,gW==g2.line?g2.ch:null));++gW});if(gY.collapsed){g3.iter(g1.line,g2.line+1,function(i){if(fW(g3,i)){gH(i,0)}})}if(gY.clearOnEnter){b6(gY,"beforeCursorEnter",function(){return gY.clear()})}if(gY.readOnly){f1();if(g3.history.done.length||g3.history.undone.length){g3.clearHistory()}}if(gY.collapsed){gY.id=++a7;gY.atomic=true}if(g0){if(gV){g0.curOp.updateMaxLine=true}if(gY.collapsed){aj(g0,g1.line,g2.line+1)}else{if(gY.className||gY.title||gY.startStyle||gY.endStyle||gY.css){for(var gX=g1.line;gX<=g2.line;gX++){S(g0,gX,"text")}}}if(gY.atomic){eT(g0.doc)}ag(g0,"markerAdded",g0,gY)}return gY}var x=function(gX,gW){var gY=this;this.markers=gX;this.primary=gW;for(var gV=0;gV<gX.length;++gV){gX[gV].parent=gY}};x.prototype.clear=function(){var gW=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gV=0;gV<this.markers.length;++gV){gW.markers[gV].clear()}ag(this,"clear")};x.prototype.find=function(gV,i){return this.primary.find(gV,i)};bI(x);function O(gY,g1,g0,i,gW){i=aQ(i);i.shared=false;var gZ=[e3(gY,g1,g0,i,gW)],gV=gZ[0];var gX=i.widgetNode;eo(gY,function(g3){if(gX){i.widgetNode=gX.cloneNode(true)}gZ.push(e3(g3,ge(g3,g1),ge(g3,g0),i,gW));for(var g2=0;g2<g3.linked.length;++g2){if(g3.linked[g2].isParent){return}}gV=f9(gZ)});return new x(gZ,gV)}function fe(i){return i.findMarks(X(i.first,0),i.clipPos(X(i.lastLine())),function(gV){return gV.parent})}function dT(g0,g1){for(var gY=0;gY<g1.length;gY++){var gW=g1[gY],g2=gW.find();var gV=g0.clipPos(g2.from),gZ=g0.clipPos(g2.to);if(cq(gV,gZ)){var gX=e3(g0,gV,gZ,gW.primary,gW.primary.type);gW.markers.push(gX);gX.parent=gW}}}function eI(gX){var gV=function(g0){var gY=gX[g0],g2=[gY.primary.doc];eo(gY.primary.doc,function(i){return g2.push(i)});for(var gZ=0;gZ<gY.markers.length;gZ++){var g1=gY.markers[gZ];if(dy(g2,g1.doc)==-1){g1.parent=null;gY.markers.splice(gZ--,1)}}};for(var gW=0;gW<gX.length;gW++){gV(gW)}}var cE=0;var av=function(gY,gX,i,gW,gV){if(!(this instanceof av)){return new av(gY,gX,i,gW,gV)}if(i==null){i=0}fY.call(this,[new fq([new gG("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=i;var gZ=X(i,0);this.sel=fh(gZ);this.history=new gr(null);this.id=++cE;this.modeOption=gX;this.lineSep=gW;this.direction=(gV=="rtl")?"rtl":"ltr";this.extend=false;if(typeof gY=="string"){gY=this.splitLines(gY)}fZ(this,{from:gZ,to:gZ,text:gY});b3(this,fh(gZ),ab)};av.prototype=cw(fY.prototype,{constructor:av,iter:function(gW,gV,i){if(i){this.iterN(gW-this.first,gV-gW,i)}else{this.iterN(this.first,this.first+this.size,gW)}},insert:function(gW,gX){var gV=0;for(var gY=0;gY<gX.length;++gY){gV+=gX[gY].height}this.insertInner(gW-this.first,gX,gV)},remove:function(i,gV){this.removeInner(i-this.first,gV)},getValue:function(gV){var i=a5(this,this.first,this.first+this.size);if(gV===false){return i}return i.join(gV||this.lineSeparator())},setValue:cR(function(gV){var gW=X(this.first,0),i=this.first+this.size-1;bj(this,{from:gW,to:X(i,fG(this,i).text.length),text:this.splitLines(gV),origin:"setValue",full:true},true);b3(this,fh(gW))}),replaceRange:function(gV,gX,gW,i){gX=ge(this,gX);gW=gW?ge(this,gW):gX;a4(this,gV,gX,gW,i)},getRange:function(gX,gW,gV){var i=gE(this,ge(this,gX),ge(this,gW));if(gV===false){return i}return i.join(gV||this.lineSeparator())},getLine:function(gV){var i=this.getLineHandle(gV);return i&&i.text},getLineHandle:function(i){if(cj(this,i)){return fG(this,i)}},getLineNumber:function(i){return bW(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=fG(this,i)}return y(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return ge(this,i)},getCursor:function(gW){var i=this.sel.primary(),gV;if(gW==null||gW=="head"){gV=i.head}else{if(gW=="anchor"){gV=i.anchor}else{if(gW=="end"||gW=="to"||gW===false){gV=i.to()}else{gV=i.from()}}}return gV},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cR(function(i,gW,gV){G(this,ge(this,typeof i=="number"?X(i,gW||0):i),null,gV)}),setSelection:cR(function(gV,gW,i){G(this,ge(this,gV),ge(this,gW||gV),i)}),extendSelection:cR(function(gW,i,gV){gw(this,ge(this,gW),i&&ge(this,i),gV)}),extendSelections:cR(function(gV,i){ax(this,eg(this,gV),i)}),extendSelectionsBy:cR(function(gW,i){var gV=b2(this.sel.ranges,gW);ax(this,eg(this,gV),i)}),setSelections:cR(function(gV,gZ,gX){var g0=this;if(!gV.length){return}var gW=[];for(var gY=0;gY<gV.length;gY++){gW[gY]=new ec(ge(g0,gV[gY].anchor),ge(g0,gV[gY].head))}if(gZ==null){gZ=Math.min(gV.length-1,this.sel.primIndex)}b3(this,cJ(gW,gZ),gX)}),addSelection:cR(function(gW,gX,gV){var i=this.sel.ranges.slice(0);i.push(new ec(ge(this,gW),ge(this,gX||gW)));b3(this,cJ(i,i.length-1),gV)}),getSelection:function(gZ){var g0=this;var gW=this.sel.ranges,gV;for(var gX=0;gX<gW.length;gX++){var gY=gE(g0,gW[gX].from(),gW[gX].to());gV=gV?gV.concat(gY):gY}if(gZ===false){return gV}else{return gV.join(gZ||this.lineSeparator())}},getSelections:function(gZ){var g0=this;var gY=[],gV=this.sel.ranges;for(var gW=0;gW<gV.length;gW++){var gX=gE(g0,gV[gW].from(),gV[gW].to());if(gZ!==false){gX=gX.join(gZ||g0.lineSeparator())}gY[gW]=gX}return gY},replaceSelection:function(gX,gZ,gV){var gY=[];for(var gW=0;gW<this.sel.ranges.length;gW++){gY[gW]=gX}this.replaceSelections(gY,gZ,gV||"+input")},replaceSelections:cR(function(gW,g2,g4){var g0=this;var g3=[],gY=this.sel;for(var gZ=0;gZ<gY.ranges.length;gZ++){var g1=gY.ranges[gZ];g3[gZ]={from:g1.from(),to:g1.to(),text:g0.splitLines(gW[gZ]),origin:g4}}var gV=g2&&g2!="end"&&ah(this,g3,g2);for(var gX=g3.length-1;gX>=0;gX--){bj(g0,g3[gX])}if(gV){fz(this,gV)}else{if(this.cm){f8(this.cm)}}}),undo:cR(function(){ci(this,"undo")}),redo:cR(function(){ci(this,"redo")}),undoSelection:cR(function(){ci(this,"undo",true)}),redoSelection:cR(function(){ci(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var gY=this.history,gV=0,gX=0;for(var gW=0;gW<gY.done.length;gW++){if(!gY.done[gW].ranges){++gV}}for(var gZ=0;gZ<gY.undone.length;gZ++){if(!gY.undone[gZ].ranges){++gX}}return{undo:gV,redo:gX}},clearHistory:function(){this.history=new gr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:bY(this.history.done),undone:bY(this.history.undone)}},setHistory:function(gV){var i=this.history=new gr(this.history.maxGeneration);i.done=bY(gV.done.slice(0),null,true);i.undone=bY(gV.undone.slice(0),null,true)},setGutterMarker:cR(function(i,gV,gW){return eV(this,i,"gutter",function(gX){var gY=gX.gutterMarkers||(gX.gutterMarkers={});gY[gV]=gW;if(!gW&&fl(gY)){gX.gutterMarkers=null}return true})}),clearGutter:cR(function(i){var gV=this;this.iter(function(gW){if(gW.gutterMarkers&&gW.gutterMarkers[i]){eV(gV,gW,"gutter",function(){gW.gutterMarkers[i]=null;if(fl(gW.gutterMarkers)){gW.gutterMarkers=null}return true})}})}),lineInfo:function(i){var gV;if(typeof i=="number"){if(!cj(this,i)){return null}gV=i;i=fG(this,i);if(!i){return null}}else{gV=bW(i);if(gV==null){return null}}return{line:gV,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:cR(function(gW,gV,i){return eV(this,gW,gV=="gutter"?"gutter":"class",function(gX){var gY=gV=="text"?"textClass":gV=="background"?"bgClass":gV=="gutter"?"gutterClass":"wrapClass";if(!gX[gY]){gX[gY]=i}else{if(T(i).test(gX[gY])){return false}else{gX[gY]+=" "+i}}return true})}),removeLineClass:cR(function(gW,gV,i){return eV(this,gW,gV=="gutter"?"gutter":"class",function(gY){var g1=gV=="text"?"textClass":gV=="background"?"bgClass":gV=="gutter"?"gutterClass":"wrapClass";var g0=gY[g1];if(!g0){return false}else{if(i==null){gY[g1]=null}else{var gZ=g0.match(T(i));if(!gZ){return false}var gX=gZ.index+gZ[0].length;gY[g1]=g0.slice(0,gZ.index)+(!gZ.index||gX==g0.length?"":" ")+g0.slice(gX)||null}}return true})}),addLineWidget:cR(function(gW,gV,i){return bP(this,gW,gV,i)}),removeLineWidget:function(i){i.clear()},markText:function(gW,gV,i){return e3(this,ge(this,gW),ge(this,gV),i,i&&i.type||"range")},setBookmark:function(gW,i){var gV={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:false,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};gW=ge(this,gW);return e3(this,gW,gW,gV,"bookmark")},findMarksAt:function(gZ){gZ=ge(this,gZ);var gY=[],gW=fG(this,gZ.line).markedSpans;if(gW){for(var gV=0;gV<gW.length;++gV){var gX=gW[gV];if((gX.from==null||gX.from<=gZ.ch)&&(gX.to==null||gX.to>=gZ.ch)){gY.push(gX.marker.parent||gX.marker)}}}return gY},findMarks:function(gY,gX,i){gY=ge(this,gY);gX=ge(this,gX);var gV=[],gW=gY.line;this.iter(gY.line,gX.line+1,function(gZ){var g1=gZ.markedSpans;if(g1){for(var g0=0;g0<g1.length;g0++){var g2=g1[g0];if(!(g2.to!=null&&gW==gY.line&&gY.ch>=g2.to||g2.from==null&&gW!=gY.line||g2.from!=null&&gW==gX.line&&g2.from>=gX.ch)&&(!i||i(g2.marker))){gV.push(g2.marker.parent||g2.marker)}}}++gW});return gV},getAllMarks:function(){var i=[];this.iter(function(gW){var gV=gW.markedSpans;if(gV){for(var gX=0;gX<gV.length;++gX){if(gV[gX].from!=null){i.push(gV[gX].marker)}}}});return i},posFromIndex:function(gW){var i,gX=this.first,gV=this.lineSeparator().length;this.iter(function(gY){var gZ=gY.text.length+gV;if(gZ>gW){i=gW;return true}gW-=gZ;++gX});return ge(this,X(gX,i))},indexFromPos:function(gW){gW=ge(this,gW);var i=gW.ch;if(gW.line<this.first||gW.ch<0){return 0}var gV=this.lineSeparator().length;this.iter(this.first,gW.line,function(gX){i+=gX.text.length+gV});return i},copy:function(i){var gV=new av(a5(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);gV.scrollTop=this.scrollTop;gV.scrollLeft=this.scrollLeft;gV.sel=this.sel;gV.extend=false;if(i){gV.history.undoDepth=this.history.undoDepth;gV.setHistory(this.getHistory())}return gV},linkedDoc:function(i){if(!i){i={}}var gX=this.first,gW=this.first+this.size;if(i.from!=null&&i.from>gX){gX=i.from}if(i.to!=null&&i.to<gW){gW=i.to}var gV=new av(a5(this,gX,gW),i.mode||this.modeOption,gX,this.lineSep,this.direction);if(i.sharedHist){gV.history=this.history}(this.linked||(this.linked=[])).push({doc:gV,sharedHist:i.sharedHist});gV.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];dT(gV,fe(this));return gV},unlinkDoc:function(gW){var gZ=this;if(gW instanceof H){gW=gW.doc}if(this.linked){for(var gX=0;gX<this.linked.length;++gX){var gY=gZ.linked[gX];if(gY.doc!=gW){continue}gZ.linked.splice(gX,1);gW.unlinkDoc(gZ);eI(fe(gZ));break}}if(gW.history==this.history){var gV=[gW.id];eo(gW,function(i){return gV.push(i.id)},true);gW.history=new gr(null);gW.history.done=bY(this.history.done,gV);gW.history.undone=bY(this.history.undone,gV)}},iterLinkedDocs:function(i){eo(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return go(i)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:cR(function(i){if(i!="rtl"){i="ltr"}if(i==this.direction){return}this.direction=i;this.iter(function(gV){return gV.order=null});if(this.cm){ef(this.cm)}})});av.prototype.eachLine=av.prototype.iter;var ai=0;function bn(g3){var g5=this;dq(g5);if(aU(g5,g3)||be(g5.display,g3)){return}cT(g3);if(dY){ai=+new Date}var g4=cA(g5,g3,true),gW=g3.dataTransfer.files;if(!g4||g5.isReadOnly()){return}if(gW&&gW.length&&window.FileReader&&window.File){var gZ=gW.length,g6=Array(gZ),gX=0;var g1=function(g9,g8){if(g5.options.allowDropFileTypes&&dy(g5.options.allowDropFileTypes,g9.type)==-1){return}var g7=new FileReader;g7.onload=de(g5,function(){var i=g7.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(i)){i=""}g6[g8]=i;if(++gX==gZ){g4=ge(g5.doc,g4);var ha={from:g4,to:g4,text:g5.doc.splitLines(g6.join(g5.doc.lineSeparator())),origin:"paste"};bj(g5.doc,ha);fz(g5.doc,fh(g4,da(ha)))}});g7.readAsText(g9)};for(var g2=0;g2<gZ;++g2){g1(gW[g2],g2)}}else{if(g5.state.draggingText&&g5.doc.sel.contains(g4)>-1){g5.state.draggingText(g3);setTimeout(function(){return g5.display.input.focus()},20);return}try{var gV=g3.dataTransfer.getData("Text");if(gV){var g0;if(g5.state.draggingText&&!g5.state.draggingText.copy){g0=g5.listSelections()}eJ(g5.doc,fh(g4,g4));if(g0){for(var gY=0;gY<g0.length;++gY){a4(g5.doc,"",g0[gY].anchor,g0[gY].head,"drag")}}g5.replaceSelection(gV,"around","paste");g5.display.input.focus()}}catch(g3){}}}function Q(i,gW){if(dY&&(!i.state.draggingText||+new Date-ai<100)){eL(gW);return}if(aU(i,gW)||be(i.display,gW)){return}gW.dataTransfer.setData("Text",i.getSelection());gW.dataTransfer.effectAllowed="copyMove";if(gW.dataTransfer.setDragImage&&!aE){var gV=gC("img",null,null,"position: fixed; left: 0; top: 0;");gV.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(ej){gV.width=gV.height=1;i.display.wrapper.appendChild(gV);gV._top=gV.offsetTop}gW.dataTransfer.setDragImage(gV,0,0);if(ej){gV.parentNode.removeChild(gV)}}}function gS(i,gV){var gX=cA(i,gV);if(!gX){return}var gW=document.createDocumentFragment();A(i,gX,gW);if(!i.display.dragCursor){i.display.dragCursor=gC("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}b1(i.display.dragCursor,gW)}function dq(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function aC(gY){if(!document.body.getElementsByClassName){return}var gX=document.body.getElementsByClassName("CodeMirror");for(var gW=0;gW<gX.length;gW++){var gV=gX[gW].CodeMirror;if(gV){gY(gV)}}}var cQ=false;function bm(){if(cQ){return}f7();cQ=true}function f7(){var i;b6(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;aC(aW)},100)}});b6(window,"blur",function(){return aC(aY)})}function aW(i){var gV=i.display;if(gV.lastWrapHeight==gV.wrapper.clientHeight&&gV.lastWrapWidth==gV.wrapper.clientWidth){return}gV.cachedCharWidth=gV.cachedTextHeight=gV.cachedPaddingH=null;gV.scrollbarsClipped=false;i.setSize()}var fH={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var fX=0;fX<10;fX++){fH[fX+48]=fH[fX+96]=String(fX)}for(var gq=65;gq<=90;gq++){fH[gq]=String.fromCharCode(gq)}for(var gp=1;gp<=12;gp++){fH[gp+111]=fH[gp+63235]="F"+gp}var fC={};fC.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fC.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fC.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fC.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fC["default"]=ch?fC.macDefault:fC.pcDefault;function dI(gW){var g2=gW.split(/-(?!$)/);gW=g2[g2.length-1];var g1,g0,gV,gZ;for(var gY=0;gY<g2.length-1;gY++){var gX=g2[gY];if(/^(cmd|meta|m)$/i.test(gX)){gZ=true}else{if(/^a(lt)?$/i.test(gX)){g1=true}else{if(/^(c|ctrl|control)$/i.test(gX)){g0=true}else{if(/^s(hift)?$/i.test(gX)){gV=true}else{throw new Error("Unrecognized modifier name: "+gX)}}}}}if(g1){gW="Alt-"+gW}if(g0){gW="Ctrl-"+gW}if(gZ){gW="Cmd-"+gW}if(gV){gW="Shift-"+gW}return gW}function cU(g2){var gW={};for(var g1 in g2){if(g2.hasOwnProperty(g1)){var g3=g2[g1];if(/^(name|fallthrough|(de|at)tach)$/.test(g1)){continue}if(g3=="..."){delete g2[g1];continue}var g4=b2(g1.split(" "),dI);for(var g0=0;g0<g4.length;g0++){var gY=(void 0),gX=(void 0);if(g0==g4.length-1){gX=g4.join(" ");gY=g3}else{gX=g4.slice(0,g0+1).join(" ");gY="..."}var gZ=gW[gX];if(!gZ){gW[gX]=gY}else{if(gZ!=gY){throw new Error("Inconsistent bindings for "+gX)}}}delete g2[g1]}}for(var gV in gW){g2[gV]=gW[gV]}return g2}function j(gY,g1,g0,gX){g1=gv(g1);var gZ=g1.call?g1.call(gY,gX):g1[gY];if(gZ===false){return"nothing"}if(gZ==="..."){return"multi"}if(gZ!=null&&g0(gZ)){return"handled"}if(g1.fallthrough){if(Object.prototype.toString.call(g1.fallthrough)!="[object Array]"){return j(gY,g1.fallthrough,g0,gX)}for(var gW=0;gW<g1.fallthrough.length;gW++){var gV=j(gY,g1.fallthrough[gW],g0,gX);if(gV){return gV}}}}function eX(gV){var i=typeof gV=="string"?gV:fH[gV.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function fR(gV,gX){if(ej&&gV.keyCode==34&&gV["char"]){return false}var gW=fH[gV.keyCode],i=gW;if(i==null||gV.altGraphKey){return false}if(gV.altKey&&gW!="Alt"){i="Alt-"+i}if((bZ?gV.metaKey:gV.ctrlKey)&&gW!="Ctrl"){i="Ctrl-"+i}if((bZ?gV.ctrlKey:gV.metaKey)&&gW!="Cmd"){i="Cmd-"+i}if(!gX&&gV.shiftKey&&gW!="Shift"){i="Shift-"+i}return i}function gv(i){return typeof i=="string"?fC[i]:i}function fo(gV,g1){var gW=gV.doc.sel.ranges,gZ=[];for(var gY=0;gY<gW.length;gY++){var gX=g1(gW[gY]);while(gZ.length&&cq(gX.from,f9(gZ).to)<=0){var g0=gZ.pop();if(cq(g0.from,gX.from)<0){gX.from=g0.from;break}}gZ.push(gX)}c0(gV,function(){for(var g2=gZ.length-1;g2>=0;g2--){a4(gV.doc,"",gZ[g2].from,gZ[g2].to,"+delete")}f8(gV)})}var e0={selectAll:an,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),ab)},killLine:function(i){return fo(i,function(gW){if(gW.empty()){var gV=fG(i.doc,gW.head.line).text.length;if(gW.head.ch==gV&&gW.head.line<i.lastLine()){return{from:gW.head,to:X(gW.head.line+1,0)}}else{return{from:gW.head,to:X(gW.head.line,gV)}}}else{return{from:gW.from(),to:gW.to()}}})},deleteLine:function(i){return fo(i,function(gV){return({from:X(gV.from().line,0),to:ge(i.doc,X(gV.to().line+1,0))})})},delLineLeft:function(i){return fo(i,function(gV){return({from:X(gV.from().line,0),to:gV.from()})})},delWrappedLineLeft:function(i){return fo(i,function(gV){var gX=i.charCoords(gV.head,"div").top+5;var gW=i.coordsChar({left:0,top:gX},"div");return{from:gW,to:gV.from()}})},delWrappedLineRight:function(i){return fo(i,function(gV){var gX=i.charCoords(gV.head,"div").top+5;var gW=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gX},"div");return{from:gV.from(),to:gW}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(X(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(X(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(gV){return bB(i,gV.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(gV){return dW(i,gV.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(gV){return d4(i,gV.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(gV){var gW=i.charCoords(gV.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gW},"div")},c9)},goLineLeft:function(i){return i.extendSelectionsBy(function(gV){var gW=i.charCoords(gV.head,"div").top+5;return i.coordsChar({left:0,top:gW},"div")},c9)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(gV){var gW=i.charCoords(gV.head,"div").top+5;var gX=i.coordsChar({left:0,top:gW},"div");if(gX.ch<i.getLine(gX.line).search(/\S/)){return dW(i,gV.head)}return gX},c9)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(gV){var gX=[],gW=gV.listSelections(),g0=gV.options.tabSize;for(var gZ=0;gZ<gW.length;gZ++){var g1=gW[gZ].from();var gY=b0(gV.getLine(g1.line),g1.ch,g0);gX.push(cC(g0-gY%g0))}gV.replaceSelections(gX)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return c0(i,function(){var gX=i.listSelections(),gW=[];for(var gY=0;gY<gX.length;gY++){if(!gX[gY].empty()){continue}var g0=gX[gY].head,gV=fG(i.doc,g0.line).text;if(gV){if(g0.ch==gV.length){g0=new X(g0.line,g0.ch-1)}if(g0.ch>0){g0=new X(g0.line,g0.ch+1);i.replaceRange(gV.charAt(g0.ch-1)+gV.charAt(g0.ch-2),X(g0.line,g0.ch-2),g0,"+transpose")}else{if(g0.line>i.doc.first){var gZ=fG(i.doc,g0.line-1).text;if(gZ){g0=new X(g0.line,1);i.replaceRange(gV.charAt(0)+i.doc.lineSeparator()+gZ.charAt(gZ.length-1),X(g0.line-1,gZ.length-1),g0,"+transpose")}}}}gW.push(new ec(g0,g0))}i.setSelections(gW)})},newlineAndIndent:function(i){return c0(i,function(){var gV=i.listSelections();for(var gW=gV.length-1;gW>=0;gW--){i.replaceRange(i.doc.lineSeparator(),gV[gW].anchor,gV[gW].head,"+input")}gV=i.listSelections();for(var gX=0;gX<gV.length;gX++){i.indentLine(gV[gX].from().line,null,true)}f8(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function bB(i,gW){var gV=fG(i.doc,gW);var gX=y(gV);if(gX!=gV){gW=bW(gX)}return eW(true,i,gX,gW,1)}function d4(i,gW){var gV=fG(i.doc,gW);var gX=cv(gV);if(gX!=gV){gW=bW(gX)}return eW(true,i,gV,gW,-1)}function dW(gV,g0){var gZ=bB(gV,g0.line);var gW=fG(gV.doc,gZ.line);var i=a(gW,gV.doc.direction);if(!i||i[0].level==0){var gY=Math.max(0,gW.text.search(/\S/));var gX=g0.line==gZ.line&&g0.ch<=gY&&g0.ch;return X(gZ.line,gX?0:gY,gZ.sticky)}return gZ}function gn(gV,gY,i){if(typeof gY=="string"){gY=e0[gY];if(!gY){return false}}gV.display.input.ensurePolled();var gX=gV.display.shift,gW=false;try{if(gV.isReadOnly()){gV.state.suppressEdits=true}if(i){gV.display.shift=false}gW=gY(gV)!=cm}finally{gV.display.shift=gX;gV.state.suppressEdits=false}return gW}function ep(gW,gX,gZ){for(var gY=0;gY<gW.state.keyMaps.length;gY++){var gV=j(gX,gW.state.keyMaps[gY],gZ,gW);if(gV){return gV}}return(gW.options.extraKeys&&j(gX,gW.options.extraKeys,gZ,gW))||j(gX,gW.options.keyMap,gZ,gW)}var d0=new gU;function bg(gV,gX,gZ,gY){var gW=gV.state.keySeq;if(gW){if(eX(gX)){return"handled"}d0.set(50,function(){if(gV.state.keySeq==gW){gV.state.keySeq=null;gV.display.input.reset()}});gX=gW+" "+gX}var i=ep(gV,gX,gY);if(i=="multi"){gV.state.keySeq=gX}if(i=="handled"){ag(gV,"keyHandled",gV,gX,gZ)}if(i=="handled"||i=="multi"){cT(gZ);p(gV)}if(gW&&!i&&/\'$/.test(gX)){cT(gZ);return true}return !!i}function fJ(i,gW){var gV=fR(gW,true);if(!gV){return false}if(gW.shiftKey&&!i.state.keySeq){return bg(i,"Shift-"+gV,gW,function(gX){return gn(i,gX,true)})||bg(i,gV,gW,function(gX){if(typeof gX=="string"?/^go[A-Z]/.test(gX):gX.motion){return gn(i,gX)}})}else{return bg(i,gV,gW,function(gX){return gn(i,gX)})}}function eA(i,gW,gV){return bg(i,"'"+gV+"'",gW,function(gX){return gn(i,gX,true)})}var dD=null;function q(gX){var i=this;i.curOp.focus=d2();if(aU(i,gX)){return}if(dY&&l<11&&gX.keyCode==27){gX.returnValue=false}var gV=gX.keyCode;i.display.shift=gV==16||gX.shiftKey;var gW=fJ(i,gX);if(ej){dD=gW?gV:null;if(!gW&&gV==88&&!dp&&(ch?gX.metaKey:gX.ctrlKey)){i.replaceSelection("",null,"cut")}}if(gV==18&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)){au(i)}}function au(gV){var gW=gV.display.lineDiv;f3(gW,"CodeMirror-crosshair");function i(gX){if(gX.keyCode==18||!gX.altKey){h(gW,"CodeMirror-crosshair");ex(document,"keyup",i);ex(document,"mouseover",i)}}b6(document,"keyup",i);b6(document,"mouseover",i)}function bk(i){if(i.keyCode==16){this.doc.sel.shift=false}aU(this,i)}function cK(gY){var i=this;if(be(i.display,gY)||aU(i,gY)||gY.ctrlKey&&!gY.altKey||ch&&gY.metaKey){return}var gX=gY.keyCode,gV=gY.charCode;if(ej&&gX==dD){dD=null;cT(gY);return}if((ej&&(!gY.which||gY.which<10))&&fJ(i,gY)){return}var gW=String.fromCharCode(gV==null?gX:gV);if(gW=="\x08"){return}if(eA(i,gY,gW)){return}i.display.input.onKeyPress(gY)}function eP(gW){var i=this,gV=i.display;if(aU(i,gW)||gV.activeTouch&&gV.input.supportsTouch()){return}gV.input.ensurePolled();gV.shift=gW.shiftKey;if(be(gV,gW)){if(!dd){gV.scroller.draggable=false;setTimeout(function(){return gV.scroller.draggable=true},100)}return}if(m(i,gW)){return}var gX=cA(i,gW);window.focus();switch(gj(gW)){case 1:if(i.state.selectingText){i.state.selectingText(gW)}else{if(gX){ay(i,gW,gX)}else{if(M(gW)==gV.scroller){cT(gW)}}}break;case 2:if(dd){i.state.lastMiddleDown=+new Date}if(gX){gw(i.doc,gX)}setTimeout(function(){return gV.input.focus()},20);cT(gW);break;case 3:if(gL){az(i,gW)}else{am(i)}break}}var dC;var dt;function ay(gV,g0,g1){if(dY){setTimeout(cI(s,gV),0)}else{gV.curOp.focus=d2()}var gW=+new Date,gY;if(dt&&dt.time>gW-400&&cq(dt.pos,g1)==0){gY="triple"}else{if(dC&&dC.time>gW-400&&cq(dC.pos,g1)==0){gY="double";dt={time:gW,pos:g1}}else{gY="single";dC={time:gW,pos:g1}}}var gZ=gV.doc.sel,i=ch?g0.metaKey:g0.ctrlKey,gX;if(gV.options.dragDrop&&fb&&!gV.isReadOnly()&&gY=="single"&&(gX=gZ.contains(g1))>-1&&(cq((gX=gZ.ranges[gX]).from(),g1)<0||g1.xRel>0)&&(cq(gX.to(),g1)>0||g1.xRel<0)){a6(gV,g0,g1,i)}else{n(gV,g0,g1,gY,i)}}function a6(gW,gZ,g0,gV){var gY=gW.display,gX=+new Date;var i=de(gW,function(g1){if(dd){gY.scroller.draggable=false}gW.state.draggingText=false;ex(document,"mouseup",i);ex(gY.scroller,"drop",i);if(Math.abs(gZ.clientX-g1.clientX)+Math.abs(gZ.clientY-g1.clientY)<10){cT(g1);if(!gV&&+new Date-200<gX){gw(gW.doc,g0)}if(dd||dY&&l==9){setTimeout(function(){document.body.focus();gY.input.focus()},20)}else{gY.input.focus()}}});if(dd){gY.scroller.draggable=true}gW.state.draggingText=i;i.copy=ch?gZ.altKey:gZ.ctrlKey;if(gY.scroller.dragDrop){gY.scroller.dragDrop()}b6(document,"mouseup",i);b6(gY.scroller,"drop",i)}function n(gY,hc,gX,gV,g0){var g9=gY.display,he=gY.doc;cT(hc);var gW,hd,gZ=he.sel,i=gZ.ranges;if(g0&&!hc.shiftKey){hd=he.sel.contains(gX);if(hd>-1){gW=i[hd]}else{gW=new ec(gX,gX)}}else{gW=he.sel.primary();hd=he.sel.primIndex}if(gd?hc.shiftKey&&hc.metaKey:hc.altKey){gV="rect";if(!g0){gW=new ec(gX,gX)}gX=cA(gY,hc,true,true);hd=-1}else{if(gV=="double"){var ha=gY.findWordAt(gX);if(gY.display.shift||he.extend){gW=fV(he,gW,ha.anchor,ha.head)}else{gW=ha}}else{if(gV=="triple"){var g3=new ec(X(gX.line,0),ge(he,X(gX.line+1,0)));if(gY.display.shift||he.extend){gW=fV(he,gW,g3.anchor,g3.head)}else{gW=g3}}else{gW=fV(he,gW,gX)}}}if(!g0){hd=0;b3(he,new gB([gW],0),N);gZ=he.sel}else{if(hd==-1){hd=i.length;b3(he,cJ(i.concat([gW]),hd),{scroll:false,origin:"*mouse"})}else{if(i.length>1&&i[hd].empty()&&gV=="single"&&!hc.shiftKey){b3(he,cJ(i.slice(0,hd).concat(i.slice(hd+1)),0),{scroll:false,origin:"*mouse"});gZ=he.sel}else{e(he,hd,gW,N)}}}var g8=gX;function g7(hq){if(cq(g8,hq)==0){return}g8=hq;if(gV=="rect"){var hh=[],hn=gY.options.tabSize;var hg=b0(fG(he,gX.line).text,gX.ch,hn);var ht=b0(fG(he,hq.line).text,hq.ch,hn);var hi=Math.min(hg,ht),hr=Math.max(hg,ht);for(var hu=Math.min(gX.line,hq.line),hk=Math.min(gY.lastLine(),Math.max(gX.line,hq.line));hu<=hk;hu++){var hs=fG(he,hu).text,hj=eK(hs,hi,hn);if(hi==hr){hh.push(new ec(X(hu,hj),X(hu,hj)))}else{if(hs.length>hj){hh.push(new ec(X(hu,hj),X(hu,eK(hs,hr,hn))))}}}if(!hh.length){hh.push(new ec(gX,gX))}b3(he,cJ(gZ.ranges.slice(0,hd).concat(hh),hd),{origin:"*mouse",scroll:false});gY.scrollIntoView(hq)}else{var ho=gW;var hl=ho.anchor,hp=hq;if(gV!="single"){var hm;if(gV=="double"){hm=gY.findWordAt(hq)}else{hm=new ec(X(hq.line,0),ge(he,X(hq.line+1,0)))}if(cq(hm.anchor,hl)>0){hp=hm.head;hl=at(ho.from(),hm.anchor)}else{hp=hm.anchor;hl=bG(ho.to(),hm.head)}}var hf=gZ.ranges.slice(0);hf[hd]=new ec(ge(he,hl),hp);b3(he,cJ(hf,hd),N)}}var g5=g9.wrapper.getBoundingClientRect();var g1=0;function hb(hh){var hf=++g1;var hj=cA(gY,hh,true,gV=="rect");if(!hj){return}if(cq(hj,g8)!=0){gY.curOp.focus=d2();g7(hj);var hi=cg(g9,he);if(hj.line>=hi.to||hj.line<hi.from){setTimeout(de(gY,function(){if(g1==hf){hb(hh)}}),150)}}else{var hg=hh.clientY<g5.top?-20:hh.clientY>g5.bottom?20:0;if(hg){setTimeout(de(gY,function(){if(g1!=hf){return}g9.scroller.scrollTop+=hg;hb(hh)}),50)}}}function g4(hf){gY.state.selectingText=false;g1=Infinity;cT(hf);g9.input.focus();ex(document,"mousemove",g6);ex(document,"mouseup",g2);he.history.lastSelOrigin=null}var g6=de(gY,function(hf){if(!gj(hf)){g4(hf)}else{hb(hf)}});var g2=de(gY,g4);gY.state.selectingText=g2;b6(document,"mousemove",g6);b6(document,"mouseup",g2)}function gT(g5,g1,g3,g4){var gW,gV;try{gW=g1.clientX;gV=g1.clientY}catch(g1){return false}if(gW>=Math.floor(g5.display.gutters.getBoundingClientRect().right)){return false}if(g4){cT(g1)}var g2=g5.display;var g0=g2.lineDiv.getBoundingClientRect();if(gV>g0.bottom||!fL(g5,g3)){return bU(g1)}gV-=g0.top-g2.viewOffset;for(var gY=0;gY<g5.options.gutters.length;++gY){var gZ=g2.gutters.childNodes[gY];if(gZ&&gZ.getBoundingClientRect().right>=gW){var g6=bQ(g5.doc,gV);var gX=g5.options.gutters[gY];aG(g5,g3,g5,g6,gX,g1);return bU(g1)}}}function m(i,gV){return gT(i,gV,"gutterClick",true)}function az(i,gV){if(be(i.display,gV)||dw(i,gV)){return}if(aU(i,gV,"contextmenu")){return}i.display.input.onContextMenu(gV)}function dw(i,gV){if(!fL(i,"gutterContextMenu")){return false}return gT(i,gV,"gutterContextMenu",false)}function c1(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");al(i)}var cn={toString:function(){return"CodeMirror.Init"}};var ft={};var bi={};function e5(i){var gW=i.optionHandlers;function gV(gX,g0,gZ,gY){i.defaults[gX]=g0;if(gZ){gW[gX]=gY?function(g1,g3,g2){if(g2!=cn){gZ(g1,g3,g2)}}:gZ}}i.defineOption=gV;i.Init=cn;gV("value","",function(gX,gY){return gX.setValue(gY)},true);gV("mode",null,function(gX,gY){gX.doc.modeOption=gY;bz(gX)},true);gV("indentUnit",2,bz,true);gV("indentWithTabs",false);gV("smartIndent",true);gV("tabSize",4,function(gX){eF(gX);al(gX);aj(gX)},true);gV("lineSeparator",null,function(gX,g0){gX.doc.lineSep=g0;if(!g0){return}var gZ=[],g1=gX.doc.first;gX.doc.iter(function(g2){for(var g4=0;;){var g3=g2.text.indexOf(g0,g4);if(g3==-1){break}g4=g3+g0.length;gZ.push(X(g1,g3))}g1++});for(var gY=gZ.length-1;gY>=0;gY--){a4(gX.doc,g0,gZ[gY],X(gZ[gY].line,gZ[gY].ch+g0.length))}});gV("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(gX,gZ,gY){gX.state.specialChars=new RegExp(gZ.source+(gZ.test("\t")?"":"|\t"),"g");if(gY!=cn){gX.refresh()}});gV("specialCharPlaceholder",fF,function(gX){return gX.refresh()},true);gV("electricChars",true);gV("inputStyle",ey?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);gV("spellcheck",false,function(gX,gY){return gX.getInputField().spellcheck=gY},true);gV("rtlMoveVisually",!aS);gV("wholeLineUpdateBefore",true);gV("theme","default",function(gX){c1(gX);dL(gX)},true);gV("keyMap","default",function(gX,g1,gY){var gZ=gv(g1);var g0=gY!=cn&&gv(gY);if(g0&&g0.detach){g0.detach(gX,gZ)}if(gZ.attach){gZ.attach(gX,g0||null)}});gV("extraKeys",null);gV("lineWrapping",false,e4,true);gV("gutters",[],function(gX){cp(gX.options);dL(gX)},true);gV("fixedGutter",true,function(gX,gY){gX.display.gutters.style.left=gY?ed(gX.display)+"px":"0";gX.refresh()},true);gV("coverGutterNextToScrollbar",false,function(gX){return fp(gX)},true);gV("scrollbarStyle","native",function(gX){aF(gX);fp(gX);gX.display.scrollbars.setScrollTop(gX.doc.scrollTop);gX.display.scrollbars.setScrollLeft(gX.doc.scrollLeft)},true);gV("lineNumbers",false,function(gX){cp(gX.options);dL(gX)},true);gV("firstLineNumber",1,dL,true);gV("lineNumberFormatter",function(gX){return gX},dL,true);gV("showCursorWhenSelecting",false,bL,true);gV("resetSelectionOnContextMenu",true);gV("lineWiseCopyCut",true);gV("readOnly",false,function(gX,gY){if(gY=="nocursor"){aY(gX);gX.display.input.blur();gX.display.disabled=true}else{gX.display.disabled=false}gX.display.input.readOnlyChanged(gY)});gV("disableInput",false,function(gX,gY){if(!gY){gX.display.input.reset()}},true);gV("dragDrop",true,gz);gV("allowDropFileTypes",null);gV("cursorBlinkRate",530);gV("cursorScrollMargin",0);gV("cursorHeight",1,bL,true);gV("singleCursorHeightPerLine",true,bL,true);gV("workTime",100);gV("workDelay",100);gV("flattenSpans",true,eF,true);gV("addModeClass",false,eF,true);gV("pollInterval",100);gV("undoDepth",200,function(gX,gY){return gX.doc.history.undoDepth=gY});gV("historyEventDelay",1250);gV("viewportMargin",10,function(gX){return gX.refresh()},true);gV("maxHighlightLength",10000,eF,true);gV("moveInputWithCursor",true,function(gX,gY){if(!gY){gX.display.input.resetPosition()}});gV("tabindex",null,function(gX,gY){return gX.display.input.getField().tabIndex=gY||""});gV("autofocus",null);gV("direction","ltr",function(gX,gY){return gX.doc.setDirection(gY)},true)}function dL(i){eu(i);aj(i);e2(i)}function gz(gV,gY,gW){var gZ=gW&&gW!=cn;if(!gY!=!gZ){var gX=gV.display.dragFunctions;var i=gY?b6:ex;i(gV.display.scroller,"dragstart",gX.start);i(gV.display.scroller,"dragenter",gX.enter);i(gV.display.scroller,"dragover",gX.over);i(gV.display.scroller,"dragleave",gX.leave);i(gV.display.scroller,"drop",gX.drop)}}function e4(i){if(i.options.lineWrapping){f3(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{h(i.display.wrapper,"CodeMirror-wrap");f(i)}aa(i);aj(i);al(i);setTimeout(function(){return fp(i)},100)}function H(gV,gX){var g2=this;if(!(this instanceof H)){return new H(gV,gX)}this.options=gX=gX?aQ(gX):{};aQ(ft,gX,false);cp(gX);var g1=gX.value;if(typeof g1=="string"){g1=new av(g1,gX.mode,null,gX.lineSeparator,gX.direction)}this.doc=g1;var gW=new H.inputStyles[gX.inputStyle](this);var g0=this.display=new e7(gV,g1,gW);g0.wrapper.CodeMirror=this;eu(this);c1(this);if(gX.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}aF(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gU(),keySeq:null,specialChars:null};if(gX.autofocus&&!ey){g0.input.focus()}if(dY&&l<11){setTimeout(function(){return g2.display.input.reset(true)},20)}gm(this);bm();cW(this);this.curOp.forceUpdate=true;et(this,g1);if((gX.autofocus&&!ey)||this.hasFocus()){setTimeout(cI(cO,this),20)}else{aY(this)}for(var gZ in bi){if(bi.hasOwnProperty(gZ)){bi[gZ](g2,gX[gZ],cn)}}em(this);if(gX.finishInit){gX.finishInit(this)}for(var gY=0;gY<bb.length;++gY){bb[gY](g2)}ao(this);if(dd&&gX.lineWrapping&&getComputedStyle(g0.lineDiv).textRendering=="optimizelegibility"){g0.lineDiv.style.textRendering="auto"}}H.defaults=ft;H.optionHandlers=bi;function gm(gV){var gZ=gV.display;b6(gZ.scroller,"mousedown",de(gV,eP));if(dY&&l<11){b6(gZ.scroller,"dblclick",de(gV,function(g3){if(aU(gV,g3)){return}var g4=cA(gV,g3);if(!g4||m(gV,g3)||be(gV.display,g3)){return}cT(g3);var g2=gV.findWordAt(g4);gw(gV.doc,g2.anchor,g2.head)}))}else{b6(gZ.scroller,"dblclick",function(g2){return aU(gV,g2)||cT(g2)})}if(!gL){b6(gZ.scroller,"contextmenu",function(g2){return az(gV,g2)})}var g1,i={end:0};function g0(){if(gZ.activeTouch){g1=setTimeout(function(){return gZ.activeTouch=null},1000);i=gZ.activeTouch;i.end=+new Date}}function gX(g2){if(g2.touches.length!=1){return false}var g3=g2.touches[0];return g3.radiusX<=1&&g3.radiusY<=1}function gW(g5,g2){if(g2.left==null){return true}var g4=g2.left-g5.left,g3=g2.top-g5.top;return g4*g4+g3*g3>20*20}b6(gZ.scroller,"touchstart",function(g3){if(!aU(gV,g3)&&!gX(g3)){gZ.input.ensurePolled();clearTimeout(g1);var g2=+new Date;gZ.activeTouch={start:g2,moved:false,prev:g2-i.end<=300?i:null};if(g3.touches.length==1){gZ.activeTouch.left=g3.touches[0].pageX;gZ.activeTouch.top=g3.touches[0].pageY}}});b6(gZ.scroller,"touchmove",function(){if(gZ.activeTouch){gZ.activeTouch.moved=true}});b6(gZ.scroller,"touchend",function(g3){var g5=gZ.activeTouch;if(g5&&!be(gZ,g3)&&g5.left!=null&&!g5.moved&&new Date-g5.start<300){var g4=gV.coordsChar(gZ.activeTouch,"page"),g2;if(!g5.prev||gW(g5,g5.prev)){g2=new ec(g4,g4)}else{if(!g5.prev.prev||gW(g5,g5.prev.prev)){g2=gV.findWordAt(g4)}else{g2=new ec(X(g4.line,0),ge(gV.doc,X(g4.line+1,0)))}}gV.setSelection(g2.anchor,g2.head);gV.focus();cT(g3)}g0()});b6(gZ.scroller,"touchcancel",g0);b6(gZ.scroller,"scroll",function(){if(gZ.scroller.clientHeight){P(gV,gZ.scroller.scrollTop);bN(gV,gZ.scroller.scrollLeft,true);aG(gV,"scroll",gV)}});b6(gZ.scroller,"mousewheel",function(g2){return c(gV,g2)});b6(gZ.scroller,"DOMMouseScroll",function(g2){return c(gV,g2)});b6(gZ.wrapper,"scroll",function(){return gZ.wrapper.scrollTop=gZ.wrapper.scrollLeft=0});gZ.dragFunctions={enter:function(g2){if(!aU(gV,g2)){eL(g2)}},over:function(g2){if(!aU(gV,g2)){gS(gV,g2);eL(g2)}},start:function(g2){return Q(gV,g2)},drop:de(gV,bn),leave:function(g2){if(!aU(gV,g2)){dq(gV)}}};var gY=gZ.input.getField();b6(gY,"keyup",function(g2){return bk.call(gV,g2)});b6(gY,"keydown",de(gV,q));b6(gY,"keypress",de(gV,cK));b6(gY,"focus",function(g2){return cO(gV,g2)});b6(gY,"blur",function(g2){return aY(gV,g2)})}var bb=[];H.defineInitHook=function(i){return bb.push(i)};function ae(ha,gZ,g9,gX){var g8=ha.doc,gW;if(g9==null){g9="add"}if(g9=="smart"){if(!g8.mode.indent){g9="prev"}else{gW=dQ(ha,gZ)}}var g3=ha.options.tabSize;var hb=fG(g8,gZ),g2=b0(hb.text,null,g3);if(hb.stateAfter){hb.stateAfter=null}var gV=hb.text.match(/^\s*/)[0],g6;if(!gX&&!/\S/.test(hb.text)){g6=0;g9="not"}else{if(g9=="smart"){g6=g8.mode.indent(gW,hb.text.slice(gV.length),hb.text);if(g6==cm||g6>150){if(!gX){return}g9="prev"}}}if(g9=="prev"){if(gZ>g8.first){g6=b0(fG(g8,gZ-1).text,null,g3)}else{g6=0}}else{if(g9=="add"){g6=g2+ha.options.indentUnit}else{if(g9=="subtract"){g6=g2-ha.options.indentUnit}else{if(typeof g9=="number"){g6=g2+g9}}}}g6=Math.max(0,g6);var g7="",g5=0;if(ha.options.indentWithTabs){for(var g0=Math.floor(g6/g3);g0;--g0){g5+=g3;g7+="\t"}}if(g5<g6){g7+=cC(g6-g5)}if(g7!=gV){a4(g8,g7,X(gZ,0),X(gZ,gV.length),"+input");hb.stateAfter=null;return true}else{for(var gY=0;gY<g8.sel.ranges.length;gY++){var g1=g8.sel.ranges[gY];if(g1.head.line==gZ&&g1.head.ch<gV.length){var g4=X(gZ,gV.length);e(g8,gY,new ec(g4,g4));break}}}}var bp=null;function dj(i){bp=i}function gx(ha,g0,gY,gX,g9){var g8=ha.doc;ha.display.shift=false;if(!gX){gX=g8.sel}var gZ=ha.state.pasteIncoming||g9=="paste";var g3=go(g0),gV=null;if(gZ&&gX.ranges.length>1){if(bp&&bp.text.join("\n")==g0){if(gX.ranges.length%bp.text.length==0){gV=[];for(var g1=0;g1<bp.text.length;g1++){gV.push(g8.splitLines(bp.text[g1]))}}}else{if(g3.length==gX.ranges.length){gV=b2(g3,function(i){return[i]})}}}var g4;for(var gW=gX.ranges.length-1;gW>=0;gW--){var g2=gX.ranges[gW];var g7=g2.from(),g6=g2.to();if(g2.empty()){if(gY&&gY>0){g7=X(g7.line,g7.ch-gY)}else{if(ha.state.overwrite&&!gZ){g6=X(g6.line,Math.min(fG(g8,g6.line).text.length,g6.ch+f9(g3).length))}else{if(bp&&bp.lineWise&&bp.text.join("\n")==g0){g7=g6=X(g7.line,0)}}}}g4=ha.curOp.updateInput;var g5={from:g7,to:g6,text:gV?gV[gW%gV.length]:g3,origin:g9||(gZ?"paste":ha.state.cutIncoming?"cut":"+input")};bj(ha.doc,g5);ag(ha,"inputRead",ha,g5)}if(g0&&!gZ){gu(ha,g0)}f8(ha);ha.curOp.updateInput=g4;ha.curOp.typing=true;ha.state.pasteIncoming=ha.state.cutIncoming=false}function bd(gW,i){var gV=gW.clipboardData&&gW.clipboardData.getData("Text");if(gV){gW.preventDefault();if(!i.isReadOnly()&&!i.options.disableInput){c0(i,function(){return gx(i,gV,0,null,"paste")})}return true}}function gu(gV,gZ){if(!gV.options.electricChars||!gV.options.smartIndent){return}var g0=gV.doc.sel;for(var gY=g0.ranges.length-1;gY>=0;gY--){var gW=g0.ranges[gY];if(gW.head.ch>100||(gY&&g0.ranges[gY-1].head.line==gW.head.line)){continue}var g1=gV.getModeAt(gW.head);var g2=false;if(g1.electricChars){for(var gX=0;gX<g1.electricChars.length;gX++){if(gZ.indexOf(g1.electricChars.charAt(gX))>-1){g2=ae(gV,gW.head.line,"smart");break}}}else{if(g1.electricInput){if(g1.electricInput.test(fG(gV.doc,gW.head.line).text.slice(0,gW.head.ch))){g2=ae(gV,gW.head.line,"smart")}}}if(g2){ag(gV,"electricInput",gV,gW.head.line)}}}function dx(gV){var g0=[],gX=[];for(var gY=0;gY<gV.doc.sel.ranges.length;gY++){var gW=gV.doc.sel.ranges[gY].head.line;var gZ={anchor:X(gW,0),head:X(gW+1,0)};gX.push(gZ);g0.push(gV.getRange(gZ.anchor,gZ.head))}return{text:g0,ranges:gX}}function gk(gV,i){gV.setAttribute("autocorrect","off");gV.setAttribute("autocapitalize","off");gV.setAttribute("spellcheck",!!i)}function a0(){var i=gC("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var gV=gC("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(dd){i.style.width="1000px"}else{i.setAttribute("wrap","off")}if(fs){i.style.border="1px solid black"}gk(i);return gV}function d3(i){var gV=i.optionHandlers;var gW=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(gZ,g0){var gY=this.options,gX=gY[gZ];if(gY[gZ]==g0&&gZ!="mode"){return}gY[gZ]=g0;if(gV.hasOwnProperty(gZ)){de(this,gV[gZ])(this,g0,gX)}aG(this,"optionChange",this,gZ)},getOption:function(gX){return this.options[gX]},getDoc:function(){return this.doc},addKeyMap:function(gY,gX){this.state.keyMaps[gX?"push":"unshift"](gv(gY))},removeKeyMap:function(gY){var gZ=this.state.keyMaps;for(var gX=0;gX<gZ.length;++gX){if(gZ[gX]==gY||gZ[gX].name==gY){gZ.splice(gX,1);return true}}},addOverlay:dn(function(gX,gY){var gZ=gX.token?gX:i.getMode(this.options,gX);if(gZ.startState){throw new Error("Overlays may not be stateful.")}ck(this.state.overlays,{mode:gZ,modeSpec:gX,opaque:gY&&gY.opaque,priority:(gY&&gY.priority)||0},function(g0){return g0.priority});this.state.modeGen++;aj(this)}),removeOverlay:dn(function(gX){var g1=this;var gZ=this.state.overlays;for(var gY=0;gY<gZ.length;++gY){var g0=gZ[gY].modeSpec;if(g0==gX||typeof gX=="string"&&g0.name==gX){gZ.splice(gY,1);g1.state.modeGen++;aj(g1);return}}}),indentLine:dn(function(gZ,gX,gY){if(typeof gX!="string"&&typeof gX!="number"){if(gX==null){gX=this.options.smartIndent?"smart":"prev"}else{gX=gX?"add":"subtract"}}if(cj(this.doc,gZ)){ae(this,gZ,gX,gY)}}),indentSelection:dn(function(g7){var g3=this;var gX=this.doc.sel.ranges,g0=-1;for(var g2=0;g2<gX.length;g2++){var g4=gX[g2];if(!g4.empty()){var g5=g4.from(),g6=g4.to();var gY=Math.max(g0,g5.line);g0=Math.min(g3.lastLine(),g6.line-(g6.ch?0:1))+1;for(var g1=gY;g1<g0;++g1){ae(g3,g1,g7)}var gZ=g3.doc.sel.ranges;if(g5.ch==0&&gX.length==gZ.length&&gZ[g2].from().ch>0){e(g3.doc,g2,new ec(g5,gZ[g2].to()),ab)}}else{if(g4.head.line>g0){ae(g3,g4.head.line,g7,true);g0=g4.head.line;if(g2==g3.doc.sel.primIndex){f8(g3)}}}}}),getTokenAt:function(gY,gX){return cD(this,gY,gX)},getLineTokens:function(gY,gX){return cD(this,X(gY),gX,true)},getTokenTypeAt:function(g4){g4=ge(this.doc,g4);var g0=dl(this,fG(this.doc,g4.line));var g2=0,g3=(g0.length-1)/2,gZ=g4.ch;var gY;if(gZ==0){gY=g0[2]}else{for(;;){var gX=(g2+g3)>>1;if((gX?g0[gX*2-1]:0)>=gZ){g3=gX}else{if(g0[gX*2+1]<gZ){g2=gX+1}else{gY=g0[gX*2+2];break}}}}var g1=gY?gY.indexOf("overlay "):-1;return g1<0?gY:g1==0?null:gY.slice(0,g1-1)},getModeAt:function(gY){var gX=this.doc.mode;if(!gX.innerMode){return gX}return i.innerMode(gX,this.getTokenAt(gY).state).mode},getHelper:function(gY,gX){return this.getHelpers(gY,gX)[0]},getHelpers:function(g4,g3){var g1=this;var g6=[];if(!gW.hasOwnProperty(g3)){return g6}var gZ=gW[g3],g2=this.getModeAt(g4);if(typeof g2[g3]=="string"){if(gZ[g2[g3]]){g6.push(gZ[g2[g3]])}}else{if(g2[g3]){for(var g0=0;g0<g2[g3].length;g0++){var gY=gZ[g2[g3][g0]];if(gY){g6.push(gY)}}}else{if(g2.helperType&&gZ[g2.helperType]){g6.push(gZ[g2.helperType])}else{if(gZ[g2.name]){g6.push(gZ[g2.name])}}}}for(var gX=0;gX<gZ._global.length;gX++){var g5=gZ._global[gX];if(g5.pred(g2,g1)&&dy(g6,g5.val)==-1){g6.push(g5.val)}}return g6},getStateAfter:function(gY,gX){var gZ=this.doc;gY=di(gZ,gY==null?gZ.first+gZ.size-1:gY);return dQ(this,gY+1,gX)},cursorCoords:function(g0,gY){var gZ,gX=this.doc.sel.primary();if(g0==null){gZ=gX.head}else{if(typeof g0=="object"){gZ=ge(this.doc,g0)}else{gZ=g0?gX.from():gX.to()}}return d9(this,gZ,gY||"page")},charCoords:function(gY,gX){return cX(this,ge(this.doc,gY),gX||"page")},coordsChar:function(gX,gY){gX=gQ(this,gX,gY||"page");return gl(this,gX.left,gX.top)},lineAtHeight:function(gX,gY){gX=gQ(this,{top:gX,left:0},gY||"page").top;return bQ(this.doc,gX+this.display.viewOffset)},heightAtLine:function(gY,g2,g1){var gX=false,gZ;if(typeof gY=="number"){var g0=this.doc.first+this.doc.size-1;if(gY<this.doc.first){gY=this.doc.first}else{if(gY>g0){gY=g0;gX=true}}gZ=fG(this.doc,gY)}else{gZ=gY}return fg(this,gZ,{top:0,left:0},g2||"page",g1||gX).top+(gX?this.doc.height-bV(gZ):0)},defaultTextHeight:function(){return a1(this.display)},defaultCharWidth:function(){return dR(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(g2,gZ,g4,g0,g6){var g1=this.display;g2=d9(this,ge(this.doc,g2));var g3=g2.bottom,gY=g2.left;gZ.style.position="absolute";gZ.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gZ);g1.sizer.appendChild(gZ);if(g0=="over"){g3=g2.top}else{if(g0=="above"||g0=="near"){var gX=Math.max(g1.wrapper.clientHeight,this.doc.height),g5=Math.max(g1.sizer.clientWidth,g1.lineSpace.clientWidth);if((g0=="above"||g2.bottom+gZ.offsetHeight>gX)&&g2.top>gZ.offsetHeight){g3=g2.top-gZ.offsetHeight}else{if(g2.bottom+gZ.offsetHeight<=gX){g3=g2.bottom}}if(gY+gZ.offsetWidth>g5){gY=g5-gZ.offsetWidth}}}gZ.style.top=g3+"px";gZ.style.left=gZ.style.right="";if(g6=="right"){gY=g1.sizer.clientWidth-gZ.offsetWidth;gZ.style.right="0px"}else{if(g6=="left"){gY=0}else{if(g6=="middle"){gY=(g1.sizer.clientWidth-gZ.offsetWidth)/2}}gZ.style.left=gY+"px"}if(g4){F(this,{left:gY,top:g3,right:gY+gZ.offsetWidth,bottom:g3+gZ.offsetHeight})}},triggerOnKeyDown:dn(q),triggerOnKeyPress:dn(cK),triggerOnKeyUp:bk,execCommand:function(gX){if(e0.hasOwnProperty(gX)){return e0[gX].call(null,this)}},triggerElectric:dn(function(gX){gu(this,gX)}),findPosH:function(g4,g0,g1,gY){var g3=this;var gX=1;if(g0<0){gX=-1;g0=-g0}var g2=ge(this.doc,g4);for(var gZ=0;gZ<g0;++gZ){g2=bE(g3.doc,g2,gX,g1,gY);if(g2.hitSide){break}}return g2},moveH:dn(function(gX,gY){var gZ=this;this.extendSelectionsBy(function(g0){if(gZ.display.shift||gZ.doc.extend||g0.empty()){return bE(gZ.doc,g0.head,gX,gY,gZ.options.rtlMoveVisually)}else{return gX<0?g0.from():g0.to()}},c9)}),deleteH:dn(function(gX,gY){var gZ=this.doc.sel,g0=this.doc;if(gZ.somethingSelected()){g0.replaceSelection("",null,"+delete")}else{fo(this,function(g2){var g1=bE(g0,g2.head,gX,gY,false);return gX<0?{from:g1,to:g2.head}:{from:g2.head,to:g1}})}}),findPosV:function(g3,g0,g4,g6){var gZ=this;var gX=1,g2=g6;if(g0<0){gX=-1;g0=-g0}var g5=ge(this.doc,g3);for(var gY=0;gY<g0;++gY){var g1=d9(gZ,g5,"div");if(g2==null){g2=g1.left}else{g1.left=g2}g5=by(gZ,g1,gX,g4);if(g5.hitSide){break}}return g5},moveV:dn(function(gX,gZ){var g3=this;var g1=this.doc,g0=[];var g2=!this.display.shift&&!g1.extend&&g1.sel.somethingSelected();g1.extendSelectionsBy(function(g4){if(g2){return gX<0?g4.from():g4.to()}var g6=d9(g3,g4.head,"div");if(g4.goalColumn!=null){g6.left=g4.goalColumn}g0.push(g6.left);var g5=by(g3,g6,gX,gZ);if(gZ=="page"&&g4==g1.sel.primary()){cZ(g3,null,cX(g3,g5,"div").top-g6.top)}return g5},c9);if(g0.length){for(var gY=0;gY<g1.sel.ranges.length;gY++){g1.sel.ranges[gY].goalColumn=g0[gY]}}}),findWordAt:function(g4){var g2=this.doc,g0=fG(g2,g4.line).text;var g3=g4.ch,gZ=g4.ch;if(g0){var g1=this.getHelper(g4,"wordChars");if((g4.sticky=="before"||gZ==g0.length)&&g3){--g3}else{++gZ}var gY=g0.charAt(g3);var gX=cN(gY,g1)?function(g5){return cN(g5,g1)}:/\s/.test(gY)?function(g5){return/\s/.test(g5)}:function(g5){return(!/\s/.test(g5)&&!cN(g5))};while(g3>0&&gX(g0.charAt(g3-1))){--g3}while(gZ<g0.length&&gX(g0.charAt(gZ))){++gZ}}return new ec(X(g4.line,g3),X(g4.line,gZ))},toggleOverwrite:function(gX){if(gX!=null&&gX==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){f3(this.display.cursorDiv,"CodeMirror-overwrite")}else{h(this.display.cursorDiv,"CodeMirror-overwrite")}aG(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==d2()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dn(function(gX,gY){if(gX!=null||gY!=null){f5(this)}if(gX!=null){this.curOp.scrollLeft=gX}if(gY!=null){this.curOp.scrollTop=gY}}),getScrollInfo:function(){var gX=this.display.scroller;return{left:gX.scrollLeft,top:gX.scrollTop,height:gX.scrollHeight-c6(this)-this.display.barHeight,width:gX.scrollWidth-c6(this)-this.display.barWidth,clientHeight:c8(this),clientWidth:dB(this)}},scrollIntoView:dn(function(gY,gZ){if(gY==null){gY={from:this.doc.sel.primary().head,to:null};if(gZ==null){gZ=this.options.cursorScrollMargin}}else{if(typeof gY=="number"){gY={from:X(gY,0),to:null}}else{if(gY.from==null){gY={from:gY,to:null}}}}if(!gY.to){gY.to=gY.from}gY.margin=gZ||0;if(gY.from.line!=null){f5(this);this.curOp.scrollToPos=gY}else{var gX=I(this,{left:Math.min(gY.from.left,gY.to.left),top:Math.min(gY.from.top,gY.to.top)-gY.margin,right:Math.max(gY.from.right,gY.to.right),bottom:Math.max(gY.from.bottom,gY.to.bottom)+gY.margin});this.scrollTo(gX.scrollLeft,gX.scrollTop)}}),setSize:dn(function(gZ,gX){var g1=this;var gY=function(g2){return typeof g2=="number"||/^\d+$/.test(String(g2))?g2+"px":g2};if(gZ!=null){this.display.wrapper.style.width=gY(gZ)}if(gX!=null){this.display.wrapper.style.height=gY(gX)}if(this.options.lineWrapping){aR(this)}var g0=this.display.viewFrom;this.doc.iter(g0,this.display.viewTo,function(g2){if(g2.widgets){for(var g3=0;g3<g2.widgets.length;g3++){if(g2.widgets[g3].noHScroll){S(g1,g0,"widget");break}}}++g0});this.curOp.forceUpdate=true;aG(this,"refresh",this)}),operation:function(gX){return c0(this,gX)},refresh:dn(function(){var gX=this.display.cachedTextHeight;aj(this);this.curOp.forceUpdate=true;al(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);dh(this);if(gX==null||Math.abs(gX-a1(this.display))>0.5){aa(this)}aG(this,"refresh",this)}),swapDoc:dn(function(gY){var gX=this.doc;gX.cm=null;et(this,gY);al(this);this.display.input.reset();this.scrollTo(gY.scrollLeft,gY.scrollTop);this.curOp.forceScroll=true;ag(this,"swapDoc",this,gX);return gX}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bI(i);i.registerHelper=function(gY,gX,gZ){if(!gW.hasOwnProperty(gY)){gW[gY]=i[gY]={_global:[]}}gW[gY][gX]=gZ};i.registerGlobalHelper=function(gZ,gY,gX,g0){i.registerHelper(gZ,gY,g0);gW[gZ]._global.push({pred:gX,val:g0})}}function bE(g6,g5,gX,g7,gV){var gY=g5;var g2=gX;var g1=fG(g6,g5.line);function i(){var hb=g5.line+gX;if(hb<g6.first||hb>=g6.first+g6.size){return false}g5=new X(hb,g5.ch,g5.sticky);return g1=fG(g6,hb)}function gZ(hc){var hb;if(gV){hb=u(g6.cm,g1,g5,gX)}else{hb=ak(g1,g5,gX)}if(hb==null){if(!hc&&i()){g5=eW(gV,g6.cm,g1,g5.line,gX)}else{return false}}else{g5=hb}return true}if(g7=="char"){gZ()}else{if(g7=="column"){gZ(true)}else{if(g7=="word"||g7=="group"){var g4=null,g9=g7=="group";var gW=g6.cm&&g6.cm.getHelper(g5,"wordChars");for(var g0=true;;g0=false){if(gX<0&&!gZ(!g0)){break}var g8=g1.text.charAt(g5.ch)||"\n";var g3=cN(g8,gW)?"w":g9&&g8=="\n"?"n":!g9||/\s/.test(g8)?null:"p";if(g9&&!g0&&!g3){g3="s"}if(g4&&g4!=g3){if(gX<0){gX=1;gZ();g5.sticky="after"}break}if(g3){g4=g3}if(gX>0&&!gZ(!g0)){break}}}}}var ha=b4(g6,g5,gY,g2,true);if(Y(gY,ha)){ha.hitSide=true}return ha}function by(g3,gY,gV,g2){var g1=g3.doc,g0=gY.left,gZ;if(g2=="page"){var gX=Math.min(g3.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var i=Math.max(gX-0.5*a1(g3.display),3);gZ=(gV>0?gY.bottom:gY.top)+gV*i}else{if(g2=="line"){gZ=gV>0?gY.bottom+3:gY.top-3}}var gW;for(;;){gW=gl(g3,g0,gZ);if(!gW.outside){break}if(gV<0?gZ<=0:gZ>=g1.height){gW.hitSide=true;break}gZ+=gV*5}return gW}var dJ=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gU();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};dJ.prototype.init=function(gX){var gZ=this;var gW=this,i=gW.cm;var gY=gW.div=gX.lineDiv;gk(gY,i.options.spellcheck);b6(gY,"paste",function(g0){if(aU(i,g0)||bd(g0,i)){return}if(l<=11){setTimeout(de(i,function(){return gZ.updateFromDOM()}),20)}});b6(gY,"compositionstart",function(g0){gZ.composing={data:g0.data,done:false}});b6(gY,"compositionupdate",function(g0){if(!gZ.composing){gZ.composing={data:g0.data,done:false}}});b6(gY,"compositionend",function(g0){if(gZ.composing){if(g0.data!=gZ.composing.data){gZ.readFromDOMSoon()}gZ.composing.done=true}});b6(gY,"touchstart",function(){return gW.forceCompositionEnd()});b6(gY,"input",function(){if(!gZ.composing){gZ.readFromDOMSoon()}});function gV(g4){if(aU(i,g4)){return}if(i.somethingSelected()){dj({lineWise:false,text:i.getSelections()});if(g4.type=="cut"){i.replaceSelection("",null,"cut")}}else{if(!i.options.lineWiseCopyCut){return}else{var g1=dx(i);dj({lineWise:true,text:g1.text});if(g4.type=="cut"){i.operation(function(){i.setSelections(g1.ranges,0,ab);i.replaceSelection("",null,"cut")})}}}if(g4.clipboardData){g4.clipboardData.clearData();var g3=bp.text.join("\n");g4.clipboardData.setData("Text",g3);if(g4.clipboardData.getData("Text")==g3){g4.preventDefault();return}}var g2=a0(),g5=g2.firstChild;i.display.lineSpace.insertBefore(g2,i.display.lineSpace.firstChild);g5.value=bp.text.join("\n");var g0=document.activeElement;dZ(g5);setTimeout(function(){i.display.lineSpace.removeChild(g2);g0.focus();if(g0==gY){gW.showPrimarySelection()}},50)}b6(gY,"copy",gV);b6(gY,"cut",gV)};dJ.prototype.prepareSelection=function(){var i=gc(this.cm,false);i.focus=this.cm.state.focused;return i};dJ.prototype.showSelection=function(gV,i){if(!gV||!this.cm.display.view.length){return}if(gV.focus||i){this.showPrimarySelection()}this.showMultipleSelections(gV)};dJ.prototype.showPrimarySelection=function(){var gY=window.getSelection(),g1=this.cm.doc.sel.primary();var gZ=aA(this.cm,gY.anchorNode,gY.anchorOffset);var g3=aA(this.cm,gY.focusNode,gY.focusOffset);if(gZ&&!gZ.bad&&g3&&!g3.bad&&cq(at(gZ,g3),g1.from())==0&&cq(bG(gZ,g3),g1.to())==0){return}var gX=cM(this.cm,g1.from());var g2=cM(this.cm,g1.to());if(!gX&&!g2){gY.removeAllRanges();return}var g5=this.cm.display.view;var g0=gY.rangeCount&&gY.getRangeAt(0);if(!gX){gX={node:g5[0].measure.map[2],offset:0}}else{if(!g2){var gW=g5[g5.length-1].measure;var gV=gW.maps?gW.maps[gW.maps.length-1]:gW.map;g2={node:gV[gV.length-1],offset:gV[gV.length-2]-gV[gV.length-3]}}}var i;try{i=cy(gX.node,gX.offset,g2.offset,g2.node)}catch(g4){}if(i){if(!cB&&this.cm.state.focused){gY.collapse(gX.node,gX.offset);if(!i.collapsed){gY.removeAllRanges();gY.addRange(i)}}else{gY.removeAllRanges();gY.addRange(i)}if(g0&&gY.anchorNode==null){gY.addRange(g0)}else{if(cB){this.startGracePeriod()}}}this.rememberSelection()};dJ.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};dJ.prototype.showMultipleSelections=function(i){b1(this.cm.display.cursorDiv,i.cursors);b1(this.cm.display.selectionDiv,i.selection)};dJ.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};dJ.prototype.selectionInEditor=function(){var gV=window.getSelection();if(!gV.rangeCount){return false}var i=gV.getRangeAt(0).commonAncestorContainer;return gM(this.div,i)};dJ.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};dJ.prototype.blur=function(){this.div.blur()};dJ.prototype.getField=function(){return this.div};dJ.prototype.supportsTouch=function(){return true};dJ.prototype.receivedFocus=function(){var i=this;if(this.selectionInEditor()){this.pollSelection()}else{c0(this.cm,function(){return i.cm.curOp.selectionChanged=true})}function gV(){if(i.cm.state.focused){i.pollSelection();i.polling.set(i.cm.options.pollInterval,gV)}}this.polling.set(this.cm.options.pollInterval,gV)};dJ.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};dJ.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var gX=window.getSelection(),i=this.cm;if(aP&&ds&&this.cm.options.gutters.length&&gD(gX.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var gV=aA(i,gX.anchorNode,gX.anchorOffset);var gW=aA(i,gX.focusNode,gX.focusOffset);if(gV&&gW){c0(i,function(){b3(i.doc,fh(gV,gW),ab);if(gV.bad||gW.bad){i.curOp.selectionChanged=true}})}};dJ.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var g4=this.cm,he=g4.display,hc=g4.doc.sel.primary();var hd=hc.from(),gY=hc.to();if(hd.ch==0&&hd.line>g4.firstLine()){hd=X(hd.line-1,fG(g4.doc,hd.line-1).length)}if(gY.ch==fG(g4.doc,gY.line).text.length&&gY.line<g4.lastLine()){gY=X(gY.line+1,0)}if(hd.line<he.viewFrom||gY.line>he.viewTo-1){return false}var g1,gZ,g3;if(hd.line==he.viewFrom||(g1=dG(g4,hd.line))==0){gZ=bW(he.view[0].line);g3=he.view[0].node}else{gZ=bW(he.view[g1].line);g3=he.view[g1-1].node.nextSibling}var hb=dG(g4,gY.line);var g6,g9;if(hb==he.view.length-1){g6=he.viewTo-1;g9=he.lineDiv.lastChild}else{g6=bW(he.view[hb+1].line)-1;g9=he.view[hb+1].node.previousSibling}if(!g3){return false}var hf=g4.doc.splitLines(gy(g4,g3,g9,gZ,g6));var g8=gE(g4.doc,X(gZ,0),X(g6,fG(g4.doc,g6).text.length));while(hf.length>1&&g8.length>1){if(f9(hf)==f9(g8)){hf.pop();g8.pop();g6--}else{if(hf[0]==g8[0]){hf.shift();g8.shift();gZ++}else{break}}}var ha=0,gW=0;var g5=hf[0],gV=g8[0],i=Math.min(g5.length,gV.length);while(ha<i&&g5.charCodeAt(ha)==gV.charCodeAt(ha)){++ha}var g2=f9(hf),hg=f9(g8);var gX=Math.min(g2.length-(hf.length==1?ha:0),hg.length-(g8.length==1?ha:0));while(gW<gX&&g2.charCodeAt(g2.length-gW-1)==hg.charCodeAt(hg.length-gW-1)){++gW}if(hf.length==1&&g8.length==1&&gZ==hd.line){while(ha&&ha>hd.ch&&g2.charCodeAt(g2.length-gW-1)==hg.charCodeAt(hg.length-gW-1)){ha--;gW++}}hf[hf.length-1]=g2.slice(0,g2.length-gW).replace(/^\u200b+/,"");hf[0]=hf[0].slice(ha).replace(/\u200b+$/,"");var g0=X(gZ,ha);var g7=X(g6,g8.length?f9(g8).length-gW:0);if(hf.length>1||hf[0]||cq(g0,g7)){a4(g4.doc,hf,g0,g7,"+input");return true}};dJ.prototype.ensurePolled=function(){this.forceCompositionEnd()};dJ.prototype.reset=function(){this.forceCompositionEnd()};dJ.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};dJ.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}i.updateFromDOM()},80)};dJ.prototype.updateFromDOM=function(){var i=this;if(this.cm.isReadOnly()||!this.pollContent()){c0(this.cm,function(){return aj(i.cm)})}};dJ.prototype.setUneditable=function(i){i.contentEditable="false"};dJ.prototype.onKeyPress=function(i){if(i.charCode==0){return}i.preventDefault();if(!this.cm.isReadOnly()){de(this.cm,gx)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};dJ.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};dJ.prototype.onContextMenu=function(){};dJ.prototype.resetPosition=function(){};dJ.prototype.needsContentAttribute=true;function cM(g0,gY){var gZ=fD(g0,gY.line);if(!gZ||gZ.hidden){return null}var g2=fG(g0.doc,gY.line);var gV=cG(gZ,g2,gY.line);var gW=a(g2,g0.doc.direction),gX="left";if(gW){var i=aJ(gW,gY.ch);gX=i%2?"right":"left"}var g1=aM(gV.map,gY.ch,gX);g1.offset=g1.collapse=="right"?g1.end:g1.start;return g1}function gD(gV){for(var i=gV;i;i=i.parentNode){if(/CodeMirror-gutter-wrapper/.test(i.className)){return true}}return false}function eM(gV,i){if(i){gV.bad=true}return gV}function gy(g2,g0,g1,gX,gV){var g4="",gW=false,i=g2.doc.lineSeparator();function gY(g6){return function(g7){return g7.id==g6}}function g5(){if(gW){g4+=i;gW=false}}function g3(g6){if(g6){g5();g4+=g6}}function gZ(hb){if(hb.nodeType==1){var g8=hb.getAttribute("cm-text");if(g8!=null){g3(g8||hb.textContent.replace(/\u200b/g,""));return}var ha=hb.getAttribute("cm-marker"),g7;if(ha){var hc=g2.findMarks(X(gX,0),X(gV+1,0),gY(+ha));if(hc.length&&(g7=hc[0].find())){g3(gE(g2.doc,g7.from,g7.to).join(i))}return}if(hb.getAttribute("contenteditable")=="false"){return}var g6=/^(pre|div|p)$/i.test(hb.nodeName);if(g6){g5()}for(var g9=0;g9<hb.childNodes.length;g9++){gZ(hb.childNodes[g9])}if(g6){gW=true}}else{if(hb.nodeType==3){g3(hb.nodeValue)}}}for(;;){gZ(g0);if(g0==g1){break}g0=g0.nextSibling}return g4}function aA(gV,gY,g0){var gZ;if(gY==gV.display.lineDiv){gZ=gV.display.lineDiv.childNodes[g0];if(!gZ){return eM(gV.clipPos(X(gV.display.viewTo-1)),true)}gY=null;g0=0}else{for(gZ=gY;;gZ=gZ.parentNode){if(!gZ||gZ==gV.display.lineDiv){return null}if(gZ.parentNode&&gZ.parentNode==gV.display.lineDiv){break}}}for(var gX=0;gX<gV.display.view.length;gX++){var gW=gV.display.view[gX];if(gW.node==gZ){return ac(gW,gY,g0)}}}function ac(g3,gZ,g1){var gW=g3.text.firstChild,gY=false;if(!gZ||!gM(gW,gZ)){return eM(X(bW(g3.line),0),true)}if(gZ==gW){gY=true;gZ=gW.childNodes[g1];g1=0;if(!gZ){var g9=g3.rest?f9(g3.rest):g3.line;return eM(X(bW(g9),g9.text.length),gY)}}var g0=gZ.nodeType==3?gZ:null,g7=gZ;if(!g0&&gZ.childNodes.length==1&&gZ.firstChild.nodeType==3){g0=gZ.firstChild;if(g1){g1=g0.nodeValue.length}}while(g7.parentNode!=gW){g7=g7.parentNode}var gV=g3.measure,g5=gV.maps;function g2(hc,hh,he){for(var hg=-1;hg<(g5?g5.length:0);hg++){var hb=hg<0?gV.map:g5[hg];for(var hf=0;hf<hb.length;hf+=3){var hd=hb[hf+2];if(hd==hc||hd==hh){var hi=bW(hg<0?g3.line:g3.rest[hg]);var ha=hb[hf]+he;if(he<0||hd!=hc){ha=hb[hf+(he?1:0)]}return X(hi,ha)}}}}var g8=g2(g0,g7,g1);if(g8){return eM(g8,gY)}for(var i=g7.nextSibling,g4=g0?g0.nodeValue.length-g1:0;i;i=i.nextSibling){g8=g2(i,i.firstChild,0);if(g8){return eM(X(g8.line,g8.ch-g4),gY)}else{g4+=i.textContent.length}}for(var g6=g7.previousSibling,gX=g1;g6;g6=g6.previousSibling){g8=g2(g6,g6.firstChild,-1);if(g8){return eM(X(g8.line,g8.ch+gX),gY)}else{gX+=g6.textContent.length}}}var Z=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new gU();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null};Z.prototype.init=function(gW){var g0=this;var gV=this,i=this.cm;var gZ=this.wrapper=a0();var gX=this.textarea=gZ.firstChild;gW.wrapper.insertBefore(gZ,gW.wrapper.firstChild);if(fs){gX.style.width="0px"}b6(gX,"input",function(){if(dY&&l>=9&&g0.hasSelection){g0.hasSelection=null}gV.poll()});b6(gX,"paste",function(g1){if(aU(i,g1)||bd(g1,i)){return}i.state.pasteIncoming=true;gV.fastPoll()});function gY(g2){if(aU(i,g2)){return}if(i.somethingSelected()){dj({lineWise:false,text:i.getSelections()});if(gV.inaccurateSelection){gV.prevInput="";gV.inaccurateSelection=false;gX.value=bp.text.join("\n");dZ(gX)}}else{if(!i.options.lineWiseCopyCut){return}else{var g1=dx(i);dj({lineWise:true,text:g1.text});if(g2.type=="cut"){i.setSelections(g1.ranges,null,ab)}else{gV.prevInput="";gX.value=g1.text.join("\n");dZ(gX)}}}if(g2.type=="cut"){i.state.cutIncoming=true}}b6(gX,"cut",gY);b6(gX,"copy",gY);b6(gW.scroller,"paste",function(g1){if(be(gW,g1)||aU(i,g1)){return}i.state.pasteIncoming=true;gV.focus()});b6(gW.lineSpace,"selectstart",function(g1){if(!be(gW,g1)){cT(g1)}});b6(gX,"compositionstart",function(){var g1=i.getCursor("from");if(gV.composing){gV.composing.range.clear()}gV.composing={start:g1,range:i.markText(g1,i.getCursor("to"),{className:"CodeMirror-composing"})}});b6(gX,"compositionend",function(){if(gV.composing){gV.poll();gV.composing.range.clear();gV.composing=null}})};Z.prototype.prepareSelection=function(){var gV=this.cm,gZ=gV.display,gY=gV.doc;var i=gc(gV);if(gV.options.moveInputWithCursor){var g0=d9(gV,gY.sel.primary().head,"div");var gW=gZ.wrapper.getBoundingClientRect(),gX=gZ.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(gZ.wrapper.clientHeight-10,g0.top+gX.top-gW.top));i.teLeft=Math.max(0,Math.min(gZ.wrapper.clientWidth-10,g0.left+gX.left-gW.left))}return i};Z.prototype.showSelection=function(gW){var i=this.cm,gV=i.display;b1(gV.cursorDiv,gW.cursors);b1(gV.selectionDiv,gW.selection);if(gW.teTop!=null){this.wrapper.style.top=gW.teTop+"px";this.wrapper.style.left=gW.teLeft+"px"}};Z.prototype.reset=function(gY){if(this.contextMenuPending){return}var gV,gX,i=this.cm,g0=i.doc;if(i.somethingSelected()){this.prevInput="";var gW=g0.sel.primary();gV=dp&&(gW.to().line-gW.from().line>100||(gX=i.getSelection()).length>1000);var gZ=gV?"-":gX||i.getSelection();this.textarea.value=gZ;if(i.state.focused){dZ(this.textarea)}if(dY&&l>=9){this.hasSelection=gZ}}else{if(!gY){this.prevInput=this.textarea.value="";if(dY&&l>=9){this.hasSelection=null}}}this.inaccurateSelection=gV};Z.prototype.getField=function(){return this.textarea};Z.prototype.supportsTouch=function(){return false};Z.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ey||d2()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};Z.prototype.blur=function(){this.textarea.blur()};Z.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};Z.prototype.receivedFocus=function(){this.slowPoll()};Z.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};Z.prototype.fastPoll=function(){var gV=false,i=this;i.pollingFast=true;function gW(){var gX=i.poll();if(!gX&&!gV){gV=true;i.polling.set(60,gW)}else{i.pollingFast=false;i.slowPoll()}}i.polling.set(20,gW)};Z.prototype.poll=function(){var g1=this;var i=this.cm,gW=this.textarea,gX=this.prevInput;if(this.contextMenuPending||!i.state.focused||(bA(gW)&&!gX&&!this.composing)||i.isReadOnly()||i.options.disableInput||i.state.keySeq){return false}var gZ=gW.value;if(gZ==gX&&!i.somethingSelected()){return false}if(dY&&l>=9&&this.hasSelection===gZ||ch&&/[\uf700-\uf7ff]/.test(gZ)){i.display.input.reset();return false}if(i.doc.sel==i.display.selForContextMenu){var gY=gZ.charCodeAt(0);if(gY==8203&&!gX){gX="\u200b"}if(gY==8666){this.reset();return this.cm.execCommand("undo")}}var g0=0,gV=Math.min(gX.length,gZ.length);while(g0<gV&&gX.charCodeAt(g0)==gZ.charCodeAt(g0)){++g0}c0(i,function(){gx(i,gZ.slice(g0),gX.length-g0,null,g1.composing?"*compose":null);if(gZ.length>1000||gZ.indexOf("\n")>-1){gW.value=g1.prevInput=""}else{g1.prevInput=gZ}if(g1.composing){g1.composing.range.clear();g1.composing.range=i.markText(g1.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"})}});return true};Z.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};Z.prototype.onKeyPress=function(){if(dY&&l>=9){this.hasSelection=null}this.fastPoll()};Z.prototype.onContextMenu=function(gZ){var g4=this,g5=g4.cm,g1=g5.display,gV=g4.textarea;var g3=cA(g5,gZ),i=g1.scroller.scrollTop;if(!g3||ej){return}var gY=g5.options.resetSelectionOnContextMenu;if(gY&&g5.doc.sel.contains(g3)==-1){de(g5,b3)(g5.doc,fh(g3),ab)}var g0=gV.style.cssText,g8=g4.wrapper.style.cssText;g4.wrapper.style.cssText="position: absolute";var g7=g4.wrapper.getBoundingClientRect();gV.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(gZ.clientY-g7.top-5)+"px; left: "+(gZ.clientX-g7.left-5)+"px;\n      z-index: 1000; background: "+(dY?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var g6;if(dd){g6=window.scrollY}g1.input.focus();if(dd){window.scrollTo(null,g6)}g1.input.reset();if(!g5.somethingSelected()){gV.value=g4.prevInput=" "}g4.contextMenuPending=true;g1.selForContextMenu=g5.doc.sel;clearTimeout(g1.detectingSelectAll);function gX(){if(gV.selectionStart!=null){var g9=g5.somethingSelected();var ha="\u200b"+(g9?gV.value:"");gV.value="\u21da";gV.value=ha;g4.prevInput=g9?"":"\u200b";gV.selectionStart=1;gV.selectionEnd=ha.length;g1.selForContextMenu=g5.doc.sel}}function g2(){g4.contextMenuPending=false;g4.wrapper.style.cssText=g8;gV.style.cssText=g0;if(dY&&l<9){g1.scrollbars.setScrollTop(g1.scroller.scrollTop=i)}if(gV.selectionStart!=null){if(!dY||(dY&&l<9)){gX()}var g9=0,ha=function(){if(g1.selForContextMenu==g5.doc.sel&&gV.selectionStart==0&&gV.selectionEnd>0&&g4.prevInput=="\u200b"){de(g5,an)(g5)}else{if(g9++<10){g1.detectingSelectAll=setTimeout(ha,500)}else{g1.selForContextMenu=null;g1.input.reset()}}};g1.detectingSelectAll=setTimeout(ha,200)}}if(dY&&l>=9){gX()}if(gL){eL(gZ);var gW=function(){ex(window,"mouseup",gW);setTimeout(g2,20)};b6(window,"mouseup",gW)}else{setTimeout(g2,50)}};Z.prototype.readOnlyChanged=function(i){if(!i){this.reset()}};Z.prototype.setUneditable=function(){};Z.prototype.needsContentAttribute=false;function ga(g1,g2){g2=g2?aQ(g2):{};g2.value=g1.value;if(!g2.tabindex&&g1.tabIndex){g2.tabindex=g1.tabIndex}if(!g2.placeholder&&g1.placeholder){g2.placeholder=g1.placeholder}if(g2.autofocus==null){var i=d2();g2.autofocus=i==g1||g1.getAttribute("autofocus")!=null&&i==document.body}function gY(){g1.value=g0.getValue()}var gZ;if(g1.form){b6(g1.form,"submit",gY);if(!g2.leaveSubmitMethodAlone){var gV=g1.form;gZ=gV.submit;try{var gX=gV.submit=function(){gY();gV.submit=gZ;gV.submit();gV.submit=gX}}catch(gW){}}}g2.finishInit=function(g3){g3.save=gY;g3.getTextArea=function(){return g1};g3.toTextArea=function(){g3.toTextArea=isNaN;gY();g1.parentNode.removeChild(g3.getWrapperElement());g1.style.display="";if(g1.form){ex(g1.form,"submit",gY);if(typeof g1.form.submit=="function"){g1.form.submit=gZ}}}};g1.style.display="none";var g0=H(function(g3){return g1.parentNode.insertBefore(g3,g1.nextSibling)},g2);return g0}function gf(i){i.off=ex;i.on=b6;i.wheelEventPixels=aB;i.Doc=av;i.splitLines=go;i.countColumn=b0;i.findColumn=eK;i.isWordChar=f6;i.Pass=cm;i.signal=aG;i.Line=gG;i.changeEnd=da;i.scrollbarModel=bq;i.Pos=X;i.cmpPos=cq;i.modes=dH;i.mimeModes=aV;i.resolveMode=gN;i.getMode=f2;i.modeExtensions=dE;i.extendMode=e1;i.copyState=cd;i.startState=ca;i.innerMode=gJ;i.commands=e0;i.keyMap=fC;i.keyName=fR;i.isModifierKey=eX;i.lookupKey=j;i.normalizeKeyMap=cU;i.StringStream=fk;i.SharedTextMarker=x;i.TextMarker=R;i.LineWidget=dP;i.e_preventDefault=cT;i.e_stopPropagation=dF;i.e_stop=eL;i.addClass=f3;i.contains=gM;i.rmClass=h;i.keyNames=fH}e5(H);d3(H);var d="iter insert remove copy getEditor constructor".split(" ");for(var bT in av.prototype){if(av.prototype.hasOwnProperty(bT)&&dy(d,bT)<0){H.prototype[bT]=(function(i){return function(){return i.apply(this.doc,arguments)}})(av.prototype[bT])}}bI(av);H.inputStyles={textarea:Z,contenteditable:dJ};H.defineMode=function(i){if(!H.defaults.mode&&i!="null"){H.defaults.mode=i}eO.apply(this,arguments)};H.defineMIME=bt;H.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});H.defineMIME("text/plain","null");H.defineExtension=function(i,gV){H.prototype[i]=gV};H.defineDocExtension=function(i,gV){av.prototype[i]=gV};H.fromTextArea=ga;gf(H);H.version="5.25.0";return H})));!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.defineMode("rpm-changes",function(){var e=/^-+$/,d=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)  ?\d{1,2} \d{2}:\d{2}(:\d{2})? [A-Z]{3,4} \d{4} - /,f=/^[\w+.-]+@[\w.-]+/;return{token:function(a){if(a.sol()){if(a.match(e)){return"tag"}if(a.match(d)){return"tag"}}return a.match(f)?"string":(a.next(),null)}}}),b.defineMIME("text/x-rpm-changes","rpm-changes"),b.defineMode("rpm-spec",function(){var h=/^(i386|i586|i686|x86_64|ppc64le|ppc64|ppc|ia64|s390x|s390|sparc64|sparcv9|sparc|noarch|alphaev6|alpha|hppa|mipsel)/,g=/^[a-zA-Z0-9()]+:/,l=/^%(debug_package|package|description|prep|build|install|files|clean|changelog|preinstall|preun|postinstall|postun|pretrans|posttrans|pre|post|triggerin|triggerun|verifyscript|check|triggerpostun|triggerprein|trigger)/,k=/^%(ifnarch|ifarch|if)/,j=/^%(else|endif)/,i=/^(\!|\?|\<\=|\<|\>\=|\>|\=\=|\&\&|\|\|)/;return{startState:function(){return{controlFlow:!1,macroParameters:!1,section:!1}},token:function(d,c){var a=d.peek();if("#"==a){return d.skipToEnd(),"comment"}if(d.sol()){if(d.match(g)){return"header"}if(d.match(l)){return"atom"}}if(d.match(/^\$\w+/)){return"def"}if(d.match(/^\$\{\w+\}/)){return"def"}if(d.match(j)){return"keyword"}if(d.match(k)){return c.controlFlow=!0,"keyword"}if(c.controlFlow){if(d.match(i)){return"operator"}if(d.match(/^(\d+)/)){return"number"}d.eol()&&(c.controlFlow=!1)}if(d.match(h)){return d.eol()&&(c.controlFlow=!1),"number"}if(d.match(/^%[\w]+/)){return d.match(/^\(/)&&(c.macroParameters=!0),"keyword"}if(c.macroParameters){if(d.match(/^\d+/)){return"number"}if(d.match(/^\)/)){return c.macroParameters=!1,"keyword"}}return d.match(/^%\{\??[\w \-\:\!]+\}/)?(d.eol()&&(c.controlFlow=!1),"def"):(d.next(),null)}}}),b.defineMIME("text/x-rpm-spec","rpm-spec")});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(e){function d(h,g,k){var i,j=h.getWrapperElement();return i=j.appendChild(document.createElement("div")),i.className=k?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof g?i.innerHTML=g:i.appendChild(g),i}function f(g,c){g.state.currentNotificationClose&&g.state.currentNotificationClose(),g.state.currentNotificationClose=c}e.defineExtension("openDialog",function(r,q,p){function c(g){if("string"==typeof g){b.value=g}else{if(n){return}n=!0,o.parentNode.removeChild(o),m.focus(),p.onClose&&p.onClose(o)}}p||(p={}),f(this,null);var a,o=d(this,r,p.bottom),n=!1,m=this,b=o.getElementsByTagName("input")[0];return b?(b.focus(),p.value&&(b.value=p.value,p.selectValueOnOpen!==!1&&b.select()),p.onInput&&e.on(b,"input",function(g){p.onInput(g,b.value,c)}),p.onKeyUp&&e.on(b,"keyup",function(g){p.onKeyUp(g,b.value,c)}),e.on(b,"keydown",function(g){p&&p.onKeyDown&&p.onKeyDown(g,b.value,c)||((27==g.keyCode||p.closeOnEnter!==!1&&13==g.keyCode)&&(b.blur(),e.e_stop(g),c()),13==g.keyCode&&q(b.value,g))}),p.closeOnBlur!==!1&&e.on(b,"blur",c)):(a=o.getElementsByTagName("button")[0])&&(e.on(a,"click",function(){c(),m.focus()}),p.closeOnBlur!==!1&&e.on(a,"blur",c),a.focus()),c}),e.defineExtension("openConfirm",function(v,u,t){function c(){q||(q=!0,s.parentNode.removeChild(s),p.focus())}f(this,null);var s=d(this,v,t&&t.bottom),r=s.getElementsByTagName("button"),q=!1,p=this,o=1;r[0].focus();for(var b=0;b<r.length;++b){var a=r[b];!function(g){e.on(a,"click",function(h){e.e_preventDefault(h),c(),g&&g(p)})}(u[b]),e.on(a,"blur",function(){--o,setTimeout(function(){o<=0&&c()},200)}),e.on(a,"focus",function(){++o})}}),e.defineExtension("openNotification",function(n,m){function a(){k||(k=!0,clearTimeout(c),l.parentNode.removeChild(l))}f(this,a);var c,l=d(this,n,m&&m.bottom),k=!1,b=m&&"undefined"!==typeof m.duration?m.duration:5000;return e.on(l,"click",function(g){e.e_preventDefault(g),a()}),b&&(c=setTimeout(a,b)),a})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],b):b(CodeMirror)}(function(P){function O(d,c){return"string"==typeof d?d=new RegExp(d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c?"gi":"g"):d.global||(d=new RegExp(d.source,d.ignoreCase?"gi":"g")),{token:function(a){d.lastIndex=a.pos;var e=d.exec(a.string);return e&&e.index==a.pos?(a.pos+=e[0].length||1,"searching"):void (e?a.pos=e.index:a.skipToEnd())}}}function N(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function M(b){return b.state.search||(b.state.search=new N)}function L(b){return"string"==typeof b&&b==b.toLowerCase()}function K(e,d,f){return e.getSearchCursor(d,f,L(d))}function J(f,e,h,g){f.openDialog(e,g,{value:h,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){A(f)}})}function I(g,f,j,i,h){g.openDialog?g.openDialog(f,h,{value:i,selectValueOnOpen:!0}):h(prompt(j,i))}function H(f,e,h,g){f.openConfirm?f.openConfirm(e,g):confirm(h)&&g[0]()}function G(b){return b.replace(/\\(.)/g,function(d,c){return"n"==c?"\n":"r"==c?"\r":c})}function F(e){var d=e.match(/^\/(.*)\/([a-z]*)$/);if(d){try{e=new RegExp(d[1],-1==d[2].indexOf("i")?"":"i")}catch(f){}}else{e=G(e)}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function D(b,f,e){f.queryText=e,f.query=F(e),b.removeOverlay(f.overlay,L(f.query)),f.overlay=O(f.query,L(f.query)),b.addOverlay(f.overlay),b.showMatchesOnScrollbar&&(f.annotate&&(f.annotate.clear(),f.annotate=null),f.annotate=b.showMatchesOnScrollbar(f.query,L(f.query)))}function C(a,l,k){var h=M(a);if(h.query){return B(a,l)}var g=a.getSelection()||h.lastQuery;if(k&&a.openDialog){var d=null;J(a,E,g,function(e,b){P.e_stop(b),e&&(e!=h.queryText&&D(a,h,e),d&&(d.style.opacity=1),B(a,b.shiftKey,function(f,j){var i;j.line<3&&document.querySelector&&(i=a.display.wrapper.querySelector(".CodeMirror-dialog"))&&i.getBoundingClientRect().bottom-4>a.cursorCoords(j,"window").top&&((d=i).style.opacity=0.4)}))})}else{I(a,E,"Search for:",g,function(b){b&&!h.query&&a.operation(function(){D(a,h,b),h.posFrom=h.posTo=a.getCursor(),B(a,l)})})}}function B(a,f,d){a.operation(function(){var c=M(a),b=K(a,c.query,f?c.posFrom:c.posTo);(b.find(f)||(b=K(a,c.query,f?P.Pos(a.lastLine()):P.Pos(a.firstLine(),0)),b.find(f)))&&(a.setSelection(b.from(),b.to()),a.scrollIntoView({from:b.from(),to:b.to()},20),c.posFrom=b.from(),c.posTo=b.to(),d&&d(b.from(),b.to()))})}function A(b){b.operation(function(){var a=M(b);a.lastQuery=a.query,a.query&&(a.query=a.queryText=null,b.removeOverlay(a.overlay),a.annotate&&(a.annotate.clear(),a.annotate=null))})}function w(e,d,f){e.operation(function(){for(var b=K(e,d);b.findNext();){if("string"!=typeof d){var a=e.getRange(b.from(),b.to()).match(d);b.replace(f.replace(/\$(\d)/g,function(g,c){return a[c]}))}else{b.replace(f)}}})}function v(f,d){if(!f.getOption("readOnly")){var h=f.getSelection()||M(f).lastQuery,g=d?"Replace all:":"Replace:";I(f,g+z,g,h,function(a){a&&(a=F(a),I(f,y,"Replace with:","",function(j){if(j=G(j),d){w(f,a,j)}else{A(f);var i=K(f,a,f.getCursor()),c=function(){var k,e=i.from();!(k=i.findNext())&&(i=K(f,a),!(k=i.findNext())||e&&i.from().line==e.line&&i.from().ch==e.ch)||(f.setSelection(i.from(),i.to()),f.scrollIntoView({from:i.from(),to:i.to()}),H(f,x,"Replace?",[function(){b(k)},c,function(){w(f,a,j)}]))},b=function(e){i.replace("string"==typeof a?j:j.replace(/\$(\d)/g,function(k,l){return e[l]})),c()};c()}}))})}}var E='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',z=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',x="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";P.commands.find=function(b){A(b),C(b)},P.commands.findPersistent=function(b){A(b),C(b,!1,!0)},P.commands.findNext=C,P.commands.findPrev=function(b){C(b,!0)},P.commands.clearSearch=A,P.commands.replace=v,P.commands.replaceAll=function(b){v(b,!0)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(f){function h(b,p,o,n){if(this.atOccurrence=!1,this.doc=b,null==n&&"string"==typeof p&&(n=!1),o=o?b.clipPos(o):e(0,0),this.pos={from:o,to:o},"string"!=typeof p){p.global||(p=new RegExp(p.source,p.ignoreCase?"ig":"g")),this.matches=function(v,u){if(v){p.lastIndex=0;for(var r,q,t=b.getLine(u.line).slice(0,u.ch),s=0;;){p.lastIndex=s;var c=p.exec(t);if(!c){break}if(r=c,q=r.index,s=r.index+(r[0].length||1),s==t.length){break}}var a=r&&r[0].length||0;a||(0==q&&0==t.length?r=void 0:q!=b.getLine(u.line).length&&a++)}else{p.lastIndex=u.ch;var t=b.getLine(u.line),r=p.exec(t),a=r&&r[0].length||0,q=r&&r.index;q+a==t.length||a||(a=1)}return r&&a?{from:e(u.line,q),to:e(u.line,q+a),match:r}:void 0}}else{var m=p;n&&(p=p.toLowerCase());var l=n?function(c){return c.toLowerCase()}:function(c){return c},k=p.split("\n");if(1==k.length){this.matches=p.length?function(s,r){if(s){var q=b.getLine(r.line).slice(0,r.ch),c=l(q),a=c.lastIndexOf(p);if(a>-1){return a=g(q,c,a),{from:e(r.line,a),to:e(r.line,a+m.length)}}}else{var q=b.getLine(r.line).slice(r.ch),c=l(q),a=c.indexOf(p);if(a>-1){return a=g(q,c,a)+r.ch,{from:e(r.line,a),to:e(r.line,a+m.length)}}}}:function(){}}else{var d=m.split("\n");this.matches=function(v,u){var t=k.length-1;if(v){if(u.line-(k.length-1)<b.firstLine()){return}if(l(b.getLine(u.line).slice(0,d[t].length))!=k[k.length-1]){return}for(var s=e(u.line,d[t].length),r=u.line-1,q=t-1;q>=1;--q,--r){if(k[q]!=l(b.getLine(r))){return}}var j=b.getLine(r),i=j.length-d[0].length;if(l(j.slice(i))!=k[0]){return}return{from:e(r,i),to:s}}if(!(u.line+(k.length-1)>b.lastLine())){var j=b.getLine(u.line),i=j.length-d[0].length;if(l(j.slice(i))==k[0]){for(var a=e(u.line,i),r=u.line+1,q=1;q<t;++q,++r){if(k[q]!=l(b.getLine(r))){return}}if(l(b.getLine(r).slice(0,d[t].length))==k[t]){return{from:a,to:e(r,d[t].length)}}}}}}}}function g(j,i,m){if(j.length==i.length){return m}for(var l=Math.min(m,j.length);;){var k=j.slice(0,l).toLowerCase().length;if(k<m){++l}else{if(!(k>m)){return l}--l}}}var e=f.Pos;h.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){function j(c){var m=e(c,0);return l.pos={from:m,to:m},l.atOccurrence=!1,!1}for(var l=this,k=this.doc.clipPos(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,k)){return this.atOccurrence=!0,this.pos.match||!0}if(b){if(!k.line){return j(0)}k=e(k.line-1,this.doc.getLine(k.line-1).length)}else{var i=this.doc.lineCount();if(k.line==i-1){return j(i)}k=e(k.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(i,b){if(this.atOccurrence){var a=f.splitLines(i);this.doc.replaceRange(a,this.pos.from,this.pos.to,b),this.pos.to=e(this.pos.from.line+a.length-1,a[a.length-1].length+(1==a.length?this.pos.from.ch:0))}}},f.defineExtension("getSearchCursor",function(i,c,j){return new h(this.doc,i,c,j)}),f.defineDocExtension("getSearchCursor",function(i,c,j){return new h(this,i,c,j)}),f.defineExtension("selectMatches",function(a,k){for(var j=[],i=this.getSearchCursor(a,this.getCursor("from"),k);i.findNext()&&!(f.cmpPos(i.to(),this.getCursor("to"))>0);){j.push({anchor:i.from(),head:i.to()})}j.length&&this.setSelections(j,0)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],b):b(CodeMirror)}(function(f){function e(j,i,m,l,k){j.openDialog?j.openDialog(i,k,{value:l,selectValueOnOpen:!0}):k(prompt(m,l))}function g(i,d){var j=Number(d);return/^[-+]/.test(d)?i.getCursor().line+j:j-1}var h='Jump to line: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use line:column or scroll% syntax)</span>';f.commands.jumpToLine=function(b){var c=b.getCursor();e(b,h,"Jump to line:",c.line+1+":"+c.ch,function(a){if(a){var i;if(i=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(a)){b.setCursor(g(b,i[1]),Number(i[2]))}else{if(i=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(a)){var d=Math.round(b.lineCount()*Number(i[1])/100);/^[-+]/.test(i[1])&&(d=c.line+d+1),b.setCursor(d-1,c.ch)}else{(i=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(a))&&b.setCursor(g(b,i[1]),c.ch)}}}})},f.keyMap["default"]["Alt-G"]="jumpToLine"});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],b):b(CodeMirror)}(function(f){function e(j,i,o,n){this.cm=j,this.options=n;var m={listenForChanges:!1};for(var l in n){m[l]=n[l]}m.className||(m.className="CodeMirror-search-match"),this.annotation=j.annotateScrollbar(m),this.query=i,this.caseFold=o,this.gap={from:j.firstLine(),to:j.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var k=this;j.on("change",this.changeHandler=function(d,c){k.onChange(c)})}function g(i,d,j){return i<=d?i:Math.max(d,i+j)}f.defineExtension("showMatchesOnScrollbar",function(b,j,i){return"string"==typeof i&&(i={className:i}),i||(i={}),new e(this,b,j,i)});var h=1000;e.prototype.findMatches=function(){if(this.gap){for(var a=0;a<this.matches.length;a++){var j=this.matches[a];if(j.from.line>=this.gap.to){break}j.to.line>=this.gap.from&&this.matches.splice(a--,1)}for(var i=this.cm.getSearchCursor(this.query,f.Pos(this.gap.from,0),this.caseFold),c=this.options&&this.options.maxMatches||h;i.findNext();){var j={from:i.from(),to:i.to()};if(j.from.line>=this.gap.to){break}if(this.matches.splice(a++,0,j),this.matches.length>c){break}}this.gap=null}},e.prototype.onChange=function(r){var q=r.from.line,p=f.changeEnd(r).line,o=p-r.to.line;if(this.gap?(this.gap.from=Math.min(g(this.gap.from,q,o),r.from.line),this.gap.to=Math.max(g(this.gap.to,q,o),r.from.line)):this.gap={from:r.from.line,to:p+1},o){for(var n=0;n<this.matches.length;n++){var m=this.matches[n],l=g(m.from.line,q,o);l!=m.from.line&&(m.from=f.Pos(l,m.from.ch));var d=g(m.to.line,q,o);d!=m.to.line&&(m.to=f.Pos(d,m.to.ch))}}clearTimeout(this.update);var a=this;this.update=setTimeout(function(){a.updateAfterChange()},250)},e.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},e.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],b):b(CodeMirror)}(function(z){function u(b){"object"==typeof b&&(this.minChars=b.minChars,this.style=b.style,this.showToken=b.showToken,this.delay=b.delay,this.wordsOnly=b.wordsOnly,this.annotateScrollbar=b.annotateScrollbar),null==this.style&&(this.style=x),null==this.minChars&&(this.minChars=y),null==this.delay&&(this.delay=w),null==this.wordsOnly&&(this.wordsOnly=v),this.overlay=this.timeout=null,this.matchesonscroll=null}function t(d){var c=d.state.matchHighlighter;clearTimeout(c.timeout),c.timeout=setTimeout(function(){q(d)},c.delay)}function s(h,g,l,k){var j=h.state.matchHighlighter;if(h.addOverlay(j.overlay=n(g,l,k)),j.annotateScrollbar){var i=l?new RegExp("\\b"+g+"\\b"):g;j.matchesonscroll=h.showMatchesOnScrollbar(i,!0,{className:"CodeMirror-selection-highlight-scrollbar"})}}function r(d){var c=d.state.matchHighlighter;c.overlay&&(d.removeOverlay(c.overlay),c.overlay=null,c.annotateScrollbar&&(c.matchesonscroll.clear(),c.matchesonscroll=null))}function q(b){b.operation(function(){var E=b.state.matchHighlighter;if(r(b),!b.somethingSelected()&&E.showToken){for(var D=E.showToken===!0?/[\w$]/:E.showToken,C=b.getCursor(),B=b.getLine(C.line),A=C.ch,k=A;A&&D.test(B.charAt(A-1));){--A}for(;k<B.length&&D.test(B.charAt(k));){++k}return void (A<k&&s(b,B.slice(A,k),D,E.style))}var i=b.getCursor("from"),h=b.getCursor("to");if(i.line==h.line&&(!E.wordsOnly||p(b,i,h))){var a=b.getRange(i,h).replace(/^\s+|\s+$/g,"");a.length>=E.minChars&&s(b,a,!1,E.style)}})}function p(h,g,l){var k=h.getRange(g,l);if(null!==k.match(/^\w+$/)){if(g.ch>0){var j={line:g.line,ch:g.ch-1},i=h.getRange(j,g);if(null===i.match(/\W/)){return !1}}if(l.ch<h.getLine(g.line).length){var j={line:l.line,ch:l.ch+1},i=h.getRange(l,j);if(null===i.match(/\W/)){return !1}}return !0}return !1}function o(d,c){return(!d.start||!c.test(d.string.charAt(d.start-1)))&&(d.pos==d.string.length||!c.test(d.string.charAt(d.pos)))}function n(e,d,f){return{token:function(a){return !a.match(e)||d&&!o(a,d)?(a.next(),void (a.skipTo(e.charAt(0))||a.skipToEnd())):f}}}var y=2,x="matchhighlight",w=100,v=!1;z.defineOption("highlightSelectionMatches",!1,function(a,f,e){e&&e!=z.Init&&(r(a),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",t)),f&&(a.state.matchHighlighter=new u(f),q(a),a.on("cursorActivity",t))})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(d){function c(f,e){function h(b){clearTimeout(g.doRedraw),g.doRedraw=setTimeout(function(){g.redraw()},b)}this.cm=f,this.options=e,this.buttonHeight=e.scrollButtonHeight||f.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=f.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var g=this;f.on("refresh",this.resizeHandler=function(){clearTimeout(g.doUpdate),g.doUpdate=setTimeout(function(){g.computeScale()&&h(20)},100)}),f.on("markerAdded",this.resizeHandler),f.on("markerCleared",this.resizeHandler),e.listenForChanges!==!1&&f.on("change",this.changeHandler=function(){h(250)})}d.defineExtension("annotateScrollbar",function(b){return"string"==typeof b&&(b={className:b}),new c(this,b)}),d.defineOption("scrollButtonHeight",0),c.prototype.computeScale=function(){var f=this.cm,e=(f.getWrapperElement().clientHeight-f.display.barHeight-2*this.buttonHeight)/f.getScrollerElement().scrollHeight;return e!=this.hScale?(this.hScale=e,!0):void 0},c.prototype.update=function(b){this.annotations=b,this.redraw()},c.prototype.redraw=function(H){function y(b,f){if(A!=b.line&&(A=b.line,z=G.getLineHandle(A)),C&&z.height>B){return G.charCoords(b,"local")[f?"top":"bottom"]}var e=G.heightAtLine(z,"local");return e+(f?0:z.height)}H!==!1&&this.computeScale();var G=this.cm,F=this.hScale,E=document.createDocumentFragment(),D=this.annotations,C=G.getOption("lineWrapping"),B=C&&1.5*G.defaultTextHeight(),A=null,z=null;if(G.display.barWidth){for(var w,x=0;x<D.length;x++){for(var v=D[x],u=w||y(v.from,!0)*F,t=y(v.to,!1)*F;x<D.length-1&&(w=y(D[x+1].from,!0)*F,!(w>t+0.9));){v=D[++x],t=y(v.to,!1)*F}if(t!=u){var s=Math.max(t-u,3),r=E.appendChild(document.createElement("div"));r.style.cssText="position: absolute; right: 0px; width: "+Math.max(G.display.barWidth-1,2)+"px; top: "+(u+this.buttonHeight)+"px; height: "+s+"px",r.className=this.options.className,v.id&&r.setAttribute("annotation-id",v.id)}}}this.div.textContent="",this.div.appendChild(E)},c.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],b):b(CodeMirror)}(function(J){function D(M,L,K){if(K<0&&0==L.ch){return M.clipPos(G(L.line-1))}var s=M.getLine(L.line);if(K>0&&L.ch>=s.length){return M.clipPos(G(L.line+1,0))}for(var q,r="start",p=L.ch,o=K<0?0:s.length,n=0;p!=o;p+=K,n++){var d=s.charAt(K<0?p-1:p),a="_"!=d&&J.isWordChar(d)?"w":"o";if("w"==a&&d.toUpperCase()==d&&(a="W"),"start"==r){"o"!=a&&(r="in",q=a)}else{if("in"==r&&q!=a){if("w"==q&&"W"==a&&K<0&&p--,"W"==q&&"w"==a&&K>0){q="w";continue}break}}}return G(L.line,p)}function C(d,c){d.extendSelectionsBy(function(a){return d.display.shift||d.doc.extend||a.empty()?D(d.doc,a.head,c):c<0?a.from():a.to()})}function A(a,k){for(var i=k.ch,h=i,d=a.getLine(k.line);i&&J.isWordChar(d.charAt(i-1));){--i}for(;h<d.length&&J.isWordChar(d.charAt(h));){++h}return{from:G(k.line,i),to:G(k.line,h),word:d.slice(i,h)}}function y(f){var d=f.getCursor(),h=f.scanForBracket(d,-1);if(h){for(;;){var g=f.scanForBracket(d,1);if(!g){return}if(g.ch==z.charAt(z.indexOf(h.ch)+1)){return f.setSelection(G(h.pos.line,h.pos.ch+1),g.pos,!1),!0}d=G(g.pos.line,g.pos.ch+1)}}}function w(r,q){if(r.isReadOnly()){return J.Pass}for(var n,p=r.listSelections(),o=[],m=0;m<p.length;m++){var l=p[m];if(!l.empty()){for(var d=l.from().line,a=l.to().line;m<p.length-1&&p[m+1].from().line==a;){a=l[++m].to().line}o.push(d,a)}}o.length?n=!0:o.push(r.firstLine(),r.lastLine()),r.operation(function(){for(var c=[],L=0;L<o.length;L+=2){var K=o[L],s=o[L+1],g=G(K,0),f=G(s),b=r.getRange(g,f,!1);q?b.sort():b.sort(function(h,e){var k=h.toUpperCase(),i=e.toUpperCase();return k!=i&&(h=k,e=i),h<e?-1:h==e?0:1}),r.replaceRange(b,g,f),n&&c.push({anchor:g,head:f})}n&&r.setSelections(c,0)})}function u(a,d){a.operation(function(){for(var o=a.listSelections(),n=[],m=[],l=0;l<o.length;l++){var k=o[l];k.empty()?(n.push(l),m.push("")):m.push(d(a.getRange(k.from(),k.to())))}a.replaceSelections(m,"around","case");for(var c,l=n.length-1;l>=0;l--){var k=o[n[l]];if(!(c&&J.cmpPos(k.head,c)>0)){var b=A(a,k.head);c=b.from,a.replaceRange(d(b.word),b.from,b.to)}}})}function t(a){var h=a.getCursor("from"),g=a.getCursor("to");if(0==J.cmpPos(h,g)){var f=A(a,h);if(!f.word){return}h=f.from,g=f.to}return{from:h,to:g,query:a.getRange(h,g),word:f}}function j(g,d){var k=t(g);if(k){var i=k.query,h=g.getSearchCursor(i,d?k.to:k.from);(d?h.findNext():h.findPrevious())?g.setSelection(h.from(),h.to()):(h=g.getSearchCursor(i,d?G(g.firstLine(),0):g.clipPos(G(g.lastLine()))),(d?h.findNext():h.findPrevious())?g.setSelection(h.from(),h.to()):k.word&&g.setSelection(k.from,k.to))}}var I=J.keyMap.sublime={fallthrough:"default"},H=J.commands,G=J.Pos,F=J.keyMap["default"]==J.keyMap.macDefault,E=F?"Cmd-":"Ctrl-";H[I["Alt-Left"]="goSubwordLeft"]=function(b){C(b,-1)},H[I["Alt-Right"]="goSubwordRight"]=function(b){C(b,1)};var B=F?"Ctrl-Alt-":"Ctrl-";H[I[B+"Up"]="scrollLineUp"]=function(e){var d=e.getScrollInfo();if(!e.somethingSelected()){var f=e.lineAtHeight(d.top+d.clientHeight,"local");e.getCursor().line>=f&&e.execCommand("goLineUp")}e.scrollTo(null,d.top-e.defaultTextHeight())},H[I[B+"Down"]="scrollLineDown"]=function(e){var d=e.getScrollInfo();if(!e.somethingSelected()){var f=e.lineAtHeight(d.top,"local")+1;e.getCursor().line<=f&&e.execCommand("goLineDown")}e.scrollTo(null,d.top+e.defaultTextHeight())},H[I["Shift-"+E+"L"]="splitSelectionByLine"]=function(i){for(var d=i.listSelections(),o=[],n=0;n<d.length;n++){for(var m=d[n].from(),l=d[n].to(),k=m.line;k<=l.line;++k){l.line>m.line&&k==l.line&&0==l.ch||o.push({anchor:k==m.line?m:G(k,0),head:k==l.line?l:G(k)})}}i.setSelections(o,0)},I["Shift-Tab"]="indentLess",H[I.Esc="singleSelectionTop"]=function(d){var c=d.listSelections()[0];d.setSelection(c.anchor,c.head,{scroll:!1})},H[I[E+"L"]="selectLine"]=function(g){for(var d=g.listSelections(),k=[],i=0;i<d.length;i++){var h=d[i];k.push({anchor:G(h.from().line,0),head:G(h.to().line+1,0)})}g.setSelections(k)},I["Shift-Ctrl-K"]="deleteLine",H[I[E+"D"]="selectNextOccurrence"]=function(a){var p=a.getCursor("from"),o=a.getCursor("to"),n=a.state.sublimeFindFullWord==a.doc.sel;if(0==J.cmpPos(p,o)){var m=A(a,p);if(!m.word){return}a.setSelection(m.from,m.to),n=!0}else{var l=a.getRange(p,o),k=n?new RegExp("\\b"+l+"\\b"):l,d=a.getSearchCursor(k,o);d.findNext()?a.addSelection(d.from(),d.to()):(d=a.getSearchCursor(k,G(a.firstLine(),0)),d.findNext()&&a.addSelection(d.from(),d.to()))}n&&(a.state.sublimeFindFullWord=a.doc.sel)};var z="(){}[]";H[I["Shift-"+E+"Space"]="selectScope"]=function(b){y(b)||b.execCommand("selectAll")},H[I["Shift-"+E+"M"]="selectBetweenBrackets"]=function(a){return y(a)?void 0:J.Pass},H[I[E+"M"]="goToBracket"]=function(a){a.extendSelectionsBy(function(g){var d=a.scanForBracket(g.head,1);if(d&&0!=J.cmpPos(d.pos,g.head)){return d.pos}var b=a.scanForBracket(g.head,-1);return b&&G(b.pos.line,b.pos.ch+1)||g.head})};var x=F?"Cmd-Ctrl-":"Shift-Ctrl-";H[I[x+"Up"]="swapLineUp"]=function(r){if(r.isReadOnly()){return J.Pass}for(var q=r.listSelections(),p=[],o=r.firstLine()-1,n=[],m=0;m<q.length;m++){var l=q[m],d=l.from().line-1,a=l.to().line;n.push({anchor:G(l.anchor.line-1,l.anchor.ch),head:G(l.head.line-1,l.head.ch)}),0!=l.to().ch||l.empty()||--a,d>o?p.push(d,a):p.length&&(p[p.length-1]=a),o=a}r.operation(function(){for(var b=0;b<p.length;b+=2){var i=p[b],g=p[b+1],e=r.getLine(i);r.replaceRange("",G(i,0),G(i+1,0),"+swapLine"),g>r.lastLine()?r.replaceRange("\n"+e,G(r.lastLine()),null,"+swapLine"):r.replaceRange(e+"\n",G(g,0),null,"+swapLine")}r.setSelections(n),r.scrollIntoView()})},H[I[x+"Down"]="swapLineDown"]=function(a){if(a.isReadOnly()){return J.Pass}for(var p=a.listSelections(),o=[],n=a.lastLine()+1,m=p.length-1;m>=0;m--){var l=p[m],k=l.to().line+1,d=l.from().line;0!=l.to().ch||l.empty()||k--,k<n?o.push(k,d):o.length&&(o[o.length-1]=d),n=d}a.operation(function(){for(var b=o.length-2;b>=0;b-=2){var i=o[b],h=o[b+1],e=a.getLine(i);i==a.lastLine()?a.replaceRange("",G(i-1),G(i),"+swapLine"):a.replaceRange("",G(i,0),G(i+1,0),"+swapLine"),a.replaceRange(e+"\n",G(h,0),null,"+swapLine")}a.scrollIntoView()})},H[I[E+"/"]="toggleCommentIndented"]=function(b){b.toggleComment({indent:!0})},H[I[E+"J"]="joinLines"]=function(k){for(var d=k.listSelections(),q=[],p=0;p<d.length;p++){for(var o=d[p],n=o.from(),m=n.line,l=o.to().line;p<d.length-1&&d[p+1].from().line==l;){l=d[++p].to().line}q.push({start:m,end:l,anchor:!o.empty()&&n})}k.operation(function(){for(var a=0,N=[],M=0;M<q.length;M++){for(var s,L=q[M],K=L.anchor&&G(L.anchor.line-a,L.anchor.ch),r=L.start;r<=L.end;r++){var c=r-a;r==L.end&&(s=G(c,k.getLine(c).length+1)),c<k.lastLine()&&(k.replaceRange(" ",G(c),G(c+1,/^\s*/.exec(k.getLine(c+1))[0].length)),++a)}N.push({anchor:K||s,head:s})}k.setSelections(N,0)})},H[I["Shift-"+E+"D"]="duplicateLine"]=function(b){b.operation(function(){for(var a=b.listSelections().length,f=0;f<a;f++){var d=b.listSelections()[f];d.empty()?b.replaceRange(b.getLine(d.head.line)+"\n",G(d.head.line,0)):b.replaceRange(b.getRange(d.from(),d.to()),d.from())}b.scrollIntoView()})},I[E+"T"]="transposeChars",H[I.F9="sortLines"]=function(b){w(b,!0)},H[I[E+"F9"]="sortLinesInsensitive"]=function(b){w(b,!1)},H[I.F2="nextBookmark"]=function(f){var e=f.state.sublimeBookmarks;if(e){for(;e.length;){var h=e.shift(),g=h.find();if(g){return e.push(h),f.setSelection(g.from,g.to)}}}},H[I["Shift-F2"]="prevBookmark"]=function(e){var d=e.state.sublimeBookmarks;if(d){for(;d.length;){d.unshift(d.pop());var f=d[d.length-1].find();if(f){return e.setSelection(f.from,f.to)}d.pop()}}},H[I[E+"F2"]="toggleBookmark"]=function(s){for(var r=s.listSelections(),q=s.state.sublimeBookmarks||(s.state.sublimeBookmarks=[]),p=0;p<r.length;p++){for(var o=r[p].from(),n=r[p].to(),m=s.findMarks(o,n),l=0;l<m.length;l++){if(m[l].sublimeBookmark){m[l].clear();for(var k=0;k<q.length;k++){q[k]==m[l]&&q.splice(k--,1)}break}}l==m.length&&q.push(s.markText(o,n,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},H[I["Shift-"+E+"F2"]="clearBookmarks"]=function(e){var d=e.state.sublimeBookmarks;if(d){for(var f=0;f<d.length;f++){d[f].clear()}}d.length=0},H[I["Alt-F2"]="selectBookmarks"]=function(g){var f=g.state.sublimeBookmarks,k=[];if(f){for(var i=0;i<f.length;i++){var h=f[i].find();h?k.push({anchor:h.from,head:h.to}):f.splice(i--,0)}}k.length&&g.setSelections(k,0)},I["Alt-Q"]="wrapLines";var v=E+"K ";I[v+E+"Backspace"]="delLineLeft",H[I.Backspace="smartBackspace"]=function(a){if(a.somethingSelected()){return J.Pass}var m=a.getCursor(),l=a.getRange({line:m.line,ch:0},m),k=J.countColumn(l,null,a.getOption("tabSize")),i=a.getOption("indentUnit");if(l&&!/\S/.test(l)&&k%i==0){var d=new G(m.line,J.findColumn(l,k-i,i));return d.ch==m.ch?J.Pass:a.replaceRange("",d,m,"+delete")}return J.Pass},H[I[v+E+"K"]="delLineRight"]=function(b){b.operation(function(){for(var a=b.listSelections(),d=a.length-1;d>=0;d--){b.replaceRange("",a[d].anchor,G(a[d].to().line),"+delete")}b.scrollIntoView()})},H[I[v+E+"U"]="upcaseAtCursor"]=function(b){u(b,function(c){return c.toUpperCase()})},H[I[v+E+"L"]="downcaseAtCursor"]=function(b){u(b,function(c){return c.toLowerCase()})},H[I[v+E+"Space"]="setSublimeMark"]=function(b){b.state.sublimeMark&&b.state.sublimeMark.clear(),b.state.sublimeMark=b.setBookmark(b.getCursor())},H[I[v+E+"A"]="selectToSublimeMark"]=function(d){var c=d.state.sublimeMark&&d.state.sublimeMark.find();c&&d.setSelection(d.getCursor(),c)},H[I[v+E+"W"]="deleteToSublimeMark"]=function(a){var k=a.state.sublimeMark&&a.state.sublimeMark.find();if(k){var i=a.getCursor(),h=k;if(J.cmpPos(i,h)>0){var g=h;h=i,i=g}a.state.sublimeKilled=a.getRange(i,h),a.replaceRange("",i,h)}},H[I[v+E+"X"]="swapWithSublimeMark"]=function(d){var c=d.state.sublimeMark&&d.state.sublimeMark.find();c&&(d.state.sublimeMark.clear(),d.state.sublimeMark=d.setBookmark(d.getCursor()),d.setCursor(c))},H[I[v+E+"Y"]="sublimeYank"]=function(b){null!=b.state.sublimeKilled&&b.replaceSelection(b.state.sublimeKilled,null,"paste")},I[v+E+"G"]="clearBookmarks",H[I[v+E+"C"]="showInCenter"]=function(d){var c=d.cursorCoords(null,"local");d.scrollTo(null,(c.top+c.bottom)/2-d.getScrollInfo().clientHeight/2)},H[I["Shift-Alt-Up"]="selectLinesUpward"]=function(b){b.operation(function(){for(var a=b.listSelections(),f=0;f<a.length;f++){var d=a[f];d.head.line>b.firstLine()&&b.addSelection(G(d.head.line-1,d.head.ch))}})},H[I["Shift-Alt-Down"]="selectLinesDownward"]=function(b){b.operation(function(){for(var a=b.listSelections(),f=0;f<a.length;f++){var d=a[f];d.head.line<b.lastLine()&&b.addSelection(G(d.head.line+1,d.head.ch))}})},H[I[E+"F3"]="findUnder"]=function(b){j(b,!0)},H[I["Shift-"+E+"F3"]="findUnderPrevious"]=function(b){j(b,!1)},H[I["Alt-F3"]="findAllUnder"]=function(g){var f=t(g);if(f){for(var k=g.getSearchCursor(f.query),i=[],h=-1;k.findNext();){i.push({anchor:k.from(),head:k.to()}),k.from().line<=f.from.line&&k.from().ch<=f.from.ch&&h++}g.setSelections(i,h)}},I["Shift-"+E+"["]="fold",I["Shift-"+E+"]"]="unfold",I[v+E+"0"]=I[v+E+"j"]="unfoldAll",I[E+"I"]="findIncremental",I["Shift-"+E+"I"]="findIncrementalReverse",I[E+"H"]="replace",I.F3="findNext",I["Shift-F3"]="findPrev",J.normalizeKeyMap(I)});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],b):b(CodeMirror)}(function(aC){function aA(d,c){return d.line==c.line&&d.ch==c.ch}function ay(b){az.push(b),az.length>50&&az.shift()}function ax(b){return az.length?void (az[az.length-1]+=b):ay(b)}function aw(b){return az[az.length-(b?Math.min(b,1):1)]||""}function av(){return az.length>1&&az.pop(),aw()}function at(e,c,j,i,f){null==f&&(f=e.getRange(c,j)),i&&au&&au.cm==e&&aA(c,au.pos)&&e.isClean(au.gen)?ax(f):ay(f),e.replaceRange("",c,j,"+delete"),au=i?{cm:e,pos:c,gen:e.changeGeneration()}:null}function ar(e,d,f){return e.findPosH(d,f,"char",!0)}function aq(e,d,f){return e.findPosH(d,f,"word",!0)}function ap(e,d,f){return e.findPosV(d,f,"line",e.doc.sel.goalColumn)}function ao(e,d,f){return e.findPosV(d,f,"page",e.doc.sel.goalColumn)}function an(r,q,p){for(var o=q.line,n=r.getLine(o),m=/\S/.test(p<0?n.slice(0,q.ch):n.slice(q.ch)),l=r.firstLine(),k=r.lastLine();;){if(o+=p,o<l||o>k){return r.clipPos(aB(o-p,p<0?0:null))}n=r.getLine(o);var b=/\S/.test(n);if(b){m=!0}else{if(m){return aB(o,0)}}}}function am(b,p,o){for(var n=p.line,m=p.ch,l=b.getLine(p.line),k=!1;;){var j=l.charAt(m+(o<0?-1:0));if(j){if(k&&/[!?.]/.test(j)){return aB(n,m+(o>0?1:0))}k||(k=/\w/.test(j)),m+=o}else{if(n==(o<0?b.firstLine():b.lastLine())){return aB(n,m)}if(l=b.getLine(n+o),!/\S/.test(l)){return aB(n,m)}n+=o,m=o<0?l.length:0}}}function al(b,p,o){var n;if(b.findMatchingBracket&&(n=b.findMatchingBracket(p,!0))&&n.match&&(n.forward?1:-1)==o){return o>0?aB(n.to.line,n.to.ch+1):n.to}for(var m=!0;;m=!1){var l=b.getTokenAt(p),k=aB(p.line,o<0?l.start:l.end);if(!(m&&o>0&&l.end==p.ch)&&/\w/.test(l.string)){return k}var c=b.findPosH(k,o,"char");if(aA(k,c)){return p}p=c}}function ak(e,d){var f=e.state.emacsPrefix;return f?(ab(e),"-"==f?-1:Number(f)):d?null:1}function aj(d){var c="string"==typeof d?function(a){a.execCommand(d)}:d;return function(b){var f=ak(b);c(b);for(var e=1;e<f;++e){c(b)}}}function ai(i,c,n,m){var l=ak(i);l<0&&(m=-m,l=-l);for(var k=0;k<l;++k){var j=n(i,c,m);if(aA(j,c)){break}c=j}return c}function ah(e,d){var f=function(a){a.extendSelection(ai(a,a.getCursor(),e,d))};return f.motion=!0,f}function ag(h,g,l){for(var j,k=h.listSelections(),i=k.length;i--;){j=k[i].head,at(h,j,ai(h,j,g,l),!0)}}function af(f){if(f.somethingSelected()){for(var h,e=f.listSelections(),g=e.length;g--;){h=e[g],at(f,h.anchor,h.head)}return !0}}function ae(d,c){return d.state.emacsPrefix?void ("-"!=c&&(d.state.emacsPrefix+=c)):(d.state.emacsPrefix=c,d.on("keyHandled",ac),void d.on("inputRead",aa))}function ac(d,c){d.state.emacsPrefixMap||ad.hasOwnProperty(c)||ab(d)}function ab(b){b.state.emacsPrefix=null,b.off("keyHandled",ac),b.off("inputRead",aa)}function aa(h,g){var l=ak(h);if(l>1&&"+input"==g.origin){for(var k=g.text.join("\n"),j="",i=1;i<l;++i){j+=k}h.replaceSelection(j)}}function Z(b){b.state.emacsPrefixMap=!0,b.addKeyMap(Q),b.on("keyHandled",Y),b.on("inputRead",Y)}function Y(d,c){("string"!=typeof c||!/^\d$/.test(c)&&"Ctrl-U"!=c)&&(d.removeKeyMap(Q),d.state.emacsPrefixMap=!1,d.off("keyHandled",Y),d.off("inputRead",Y))}function X(b){b.setCursor(b.getCursor()),b.setExtending(!b.getExtending()),b.on("change",function(){b.setExtending(!1)})}function W(b){b.setExtending(!1),b.setCursor(b.getCursor())}function V(e,d,f){e.openDialog?e.openDialog(d+': <input type="text" style="width: 10em"/>',f,{bottom:!0}):f(prompt(d,""))}function U(f,e){var h=f.getCursor(),g=f.findPosH(h,1,"word");f.replaceRange(e(f.getRange(h,g)),h,g),f.setCursor(g)}function T(b){for(var n=b.getCursor(),m=n.line,l=n.ch,k=[];m>=b.firstLine();){for(var j=b.getLine(m),i=null==l?j.length:l;i>0;){var l=j.charAt(--i);if(")"==l){k.push("(")}else{if("]"==l){k.push("[")}else{if("}"==l){k.push("{")}else{if(/[\(\{\[]/.test(l)&&(!k.length||k.pop()!=l)){return b.extendSelection(aB(m,i))}}}}}--m,l=null}}function S(b){b.execCommand("clearSearch"),W(b)}function P(b){Q[b]=function(a){ae(a,b)},R["Ctrl-"+b]=function(a){ae(a,b)},ad["Ctrl-"+b]=!0}for(var aB=aC.Pos,az=[],au=null,ad={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0},R=aC.keyMap.emacs=aC.normalizeKeyMap({"Ctrl-W":function(b){at(b,b.getCursor("start"),b.getCursor("end"))},"Ctrl-K":aj(function(b){var h=b.getCursor(),g=b.clipPos(aB(h.line)),f=b.getRange(h,g);/\S/.test(f)||(f+="\n",g=aB(h.line+1,0)),at(b,h,g,!0,f)}),"Alt-W":function(b){ay(b.getSelection()),W(b)},"Ctrl-Y":function(d){var c=d.getCursor();d.replaceRange(aw(ak(d)),c,c,"paste"),d.setSelection(c,d.getCursor())},"Alt-Y":function(b){b.replaceSelection(av(),"around","paste")},"Ctrl-Space":X,"Ctrl-Shift-2":X,"Ctrl-F":ah(ar,1),"Ctrl-B":ah(ar,-1),Right:ah(ar,1),Left:ah(ar,-1),"Ctrl-D":function(b){ag(b,ar,1)},Delete:function(b){af(b)||ag(b,ar,1)},"Ctrl-H":function(b){ag(b,ar,-1)},Backspace:function(b){af(b)||ag(b,ar,-1)},"Alt-F":ah(aq,1),"Alt-B":ah(aq,-1),"Alt-D":function(b){ag(b,aq,1)},"Alt-Backspace":function(b){ag(b,aq,-1)},"Ctrl-N":ah(ap,1),"Ctrl-P":ah(ap,-1),Down:ah(ap,1),Up:ah(ap,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":ah(ao,-1),"Ctrl-V":ah(ao,1),PageUp:ah(ao,-1),PageDown:ah(ao,1),"Ctrl-Up":ah(an,-1),"Ctrl-Down":ah(an,1),"Alt-A":ah(am,-1),"Alt-E":ah(am,1),"Alt-K":function(b){ag(b,am,1)},"Ctrl-Alt-K":function(b){ag(b,al,1)},"Ctrl-Alt-Backspace":function(b){ag(b,al,-1)},"Ctrl-Alt-F":ah(al,1),"Ctrl-Alt-B":ah(al,-1),"Shift-Ctrl-Alt-2":function(d){var c=d.getCursor();d.setSelection(ai(d,c,al,1),c)},"Ctrl-Alt-T":function(g){var f=al(g,g.getCursor(),-1),j=al(g,f,1),i=al(g,j,1),h=al(g,i,-1);g.replaceRange(g.getRange(h,i)+g.getRange(j,h)+g.getRange(f,j),f,i)},"Ctrl-Alt-U":aj(T),"Alt-Space":function(b){for(var j=b.getCursor(),i=j.ch,h=j.ch,g=b.getLine(j.line);i&&/\s/.test(g.charAt(i-1));){--i}for(;h<g.length&&/\s/.test(g.charAt(h));){++h}b.replaceRange(" ",aB(j.line,i),aB(j.line,h))},"Ctrl-O":aj(function(b){b.replaceSelection("\n","start")}),"Ctrl-T":aj(function(b){b.execCommand("transposeChars")}),"Alt-C":aj(function(b){U(b,function(d){var c=d.search(/\w/);return -1==c?d:d.slice(0,c)+d.charAt(c).toUpperCase()+d.slice(c+1).toLowerCase()})}),"Alt-U":aj(function(b){U(b,function(c){return c.toUpperCase()})}),"Alt-L":aj(function(b){U(b,function(c){return c.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":aj("undo"),"Shift-Ctrl--":aj("undo"),"Ctrl-Z":aj("undo"),"Cmd-Z":aj("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":S,"Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:!1,Tab:"indentAuto","Alt-G G":function(d){var c=ak(d,!0);return null!=c&&c>0?d.setCursor(c-1):void V(d,"Goto line",function(a){var e;a&&!isNaN(e=Number(a))&&e==(0|e)&&e>0&&d.setCursor(e-1)})},"Ctrl-X Tab":function(b){b.indentSelection(ak(b,!0)||b.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(b){b.setSelection(b.getCursor("head"),b.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":aj("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(b){at(b,b.getCursor(),am(b,b.getCursor(),1),!0)},"Ctrl-X H":"selectAll","Ctrl-Q Tab":aj("insertTab"),"Ctrl-U":Z}),Q={"Ctrl-G":ab},O=0;O<10;++O){P(String(O))}P("-")});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(r){function n(y,x,w,v){var u=y.getLineHandle(x.line),t=x.ch-1,s=t>=0&&o[u.text.charAt(t)]||o[u.text.charAt(++t)];if(!s){return null}var f=">"==s.charAt(1)?1:-1;if(w&&f>0!=(t==x.ch)){return null}var d=y.getTokenTypeAt(p(x.line,t+1)),c=m(y,p(x.line,t+(f>0?1:0)),f,d||null,v);return null==c?null:{from:p(x.line,t),to:c&&c.pos,match:c&&c.ch==s.charAt(0),forward:f>0}}function m(F,E,D,C,B){for(var A=B&&B.maxScanLineLength||10000,z=B&&B.maxScanLines||1000,y=[],x=B&&B.bracketRegex?B.bracketRegex:/[(){}[\]]/,w=D>0?Math.min(E.line+z,F.lastLine()+1):Math.max(F.firstLine()-1,E.line-z),v=E.line;v!=w;v+=D){var u=F.getLine(v);if(u){var t=D>0?0:u.length-1,s=D>0?u.length:-1;if(!(u.length>A)){for(v==E.line&&(t=E.ch-(D<0?1:0));t!=s;t+=D){var d=u.charAt(t);if(x.test(d)&&(void 0===C||F.getTokenTypeAt(p(v,t+1))==C)){var c=o[d];if(">"==c.charAt(1)==D>0){y.push(d)}else{if(!y.length){return{pos:p(v,t),ch:d}}y.pop()}}}}}}return v-D==(D>0?F.lastLine():F.firstLine())?!1:null}function l(y,x,w){for(var v=y.state.matchBrackets.maxHighlightLineLength||1000,u=[],t=y.listSelections(),s=0;s<t.length;s++){var e=t[s].empty()&&n(y,t[s].head,!1,w);if(e&&y.getLine(e.from.line).length<=v){var c=e.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(y.markText(e.from,p(e.from.line,e.from.ch+1),{className:c})),e.to&&y.getLine(e.to.line).length<=v&&u.push(y.markText(e.to,p(e.to.line,e.to.ch+1),{className:c}))}}if(u.length){q&&y.state.focused&&y.focus();var b=function(){y.operation(function(){for(var d=0;d<u.length;d++){u[d].clear()}})};if(!x){return b}setTimeout(b,800)}}function j(b){b.operation(function(){k&&(k(),k=null),k=l(b,!1,b.state.matchBrackets)})}var q=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),p=r.Pos,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},k=null;r.defineOption("matchBrackets",!1,function(a,f,e){e&&e!=r.Init&&a.off("cursorActivity",j),f&&(a.state.matchBrackets="object"==typeof f?f:{},a.on("cursorActivity",j))}),r.defineExtension("matchBrackets",function(){l(this,!0)}),r.defineExtension("findMatchingBracket",function(e,d,f){return n(this,e,d,f)}),r.defineExtension("scanForBracket",function(f,e,h,g){return m(this,f,e,h,g)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(F){function C(b,d){return"pairs"==d&&"string"==typeof b?b:"object"==typeof b&&null!=b[d]?b[d]:E[d]}function y(b){return function(a){return t(a,b)}}function x(e){var d=e.state.closeBrackets;if(!d){return null}var f=e.getModeAt(e.getCursor());return f.closeBrackets||d}function w(a){var n=x(a);if(!n||a.getOption("disableInput")){return F.Pass}for(var m=C(n,"pairs"),l=a.listSelections(),i=0;i<l.length;i++){if(!l[i].empty()){return F.Pass}var d=r(a,l[i].head);if(!d||m.indexOf(d)%2!=0){return F.Pass}}for(var i=l.length-1;i>=0;i--){var c=l[i].head;a.replaceRange("",D(c.line,c.ch-1),D(c.line,c.ch+1),"+delete")}}function v(a){var l=x(a),k=l&&C(l,"explode");if(!k||a.getOption("disableInput")){return F.Pass}for(var j=a.listSelections(),i=0;i<j.length;i++){if(!j[i].empty()){return F.Pass}var d=r(a,j[i].head);if(!d||k.indexOf(d)%2!=0){return F.Pass}}a.operation(function(){a.replaceSelection("\n\n",null),a.execCommand("goCharLeft"),j=a.listSelections();for(var b=0;b<j.length;b++){var e=j[b].head.line;a.indentLine(e,null,!0),a.indentLine(e+1,null,!0)}})}function u(a){var c=F.cmpPos(a.anchor,a.head)>0;return{anchor:new D(a.anchor.line,a.anchor.ch+(c?-1:1)),head:new D(a.head.line,a.head.ch+(c?1:-1))}}function t(J,I){var H=x(J);if(!H||J.getOption("disableInput")){return F.Pass}var G=C(H,"pairs"),p=G.indexOf(I);if(-1==p){return F.Pass}for(var c,a,n=C(H,"triples"),l=G.charAt(p+1)==I,i=J.listSelections(),d=p%2==0,P=0;P<i.length;P++){var M,O=i[P],N=O.head,a=J.getRange(N,D(N.line,N.ch+1));if(d&&!O.empty()){M="surround"}else{if(!l&&d||a!=I){if(l&&N.ch>1&&n.indexOf(I)>=0&&J.getRange(D(N.line,N.ch-2),N)==I+I&&(N.ch<=2||J.getRange(D(N.line,N.ch-3),D(N.line,N.ch-2))!=I)){M="addFour"}else{if(l){if(F.isWordChar(a)||!q(J,N,I)){return F.Pass}M="both"}else{if(!d||J.getLine(N.line).length!=N.ch&&!s(a,G)&&!/\s/.test(a)){return F.Pass}M="both"}}}else{M=n.indexOf(I)>=0&&J.getRange(N,D(N.line,N.ch+3))==I+I+I?"skipThree":"skip"}}if(c){if(c!=M){return F.Pass}}else{c=M}}var L=p%2?G.charAt(p-1):I,K=p%2?I:G.charAt(p+1);J.operation(function(){if("skip"==c){J.execCommand("goCharRight")}else{if("skipThree"==c){for(var b=0;b<3;b++){J.execCommand("goCharRight")}}else{if("surround"==c){for(var e=J.getSelections(),b=0;b<e.length;b++){e[b]=L+e[b]+K}J.replaceSelections(e,"around"),e=J.listSelections().slice();for(var b=0;b<e.length;b++){e[b]=u(e[b])}J.setSelections(e)}else{"both"==c?(J.replaceSelection(L+K,null),J.triggerElectric(L+K),J.execCommand("goCharLeft")):"addFour"==c&&(J.replaceSelection(L+L+L+L,"before"),J.execCommand("goCharRight"))}}}})}function s(e,d){var f=d.lastIndexOf(e);return f>-1&&f%2==1}function r(e,c){var f=e.getRange(D(c.line,c.ch-1),D(c.line,c.ch+1));return 2==f.length?f:null}function q(a,n,m){var l=a.getLine(n.line),k=a.getTokenAt(n);if(/\bstring2?\b/.test(k.type)){return !1}var j=new F.StringStream(l.slice(0,n.ch)+m+l.slice(n.ch),4);for(j.pos=j.start=k.start;;){var i=a.getMode().token(j,k.state);if(j.pos>=n.ch+1){return/\bstring2?\b/.test(i)}j.start=j.pos}}var E={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},D=F.Pos;F.defineOption("autoCloseBrackets",!1,function(a,f,e){e&&e!=F.Init&&(a.removeKeyMap(A),a.state.closeBrackets=null),f&&(a.state.closeBrackets=f,a.addKeyMap(A))});for(var B=E.pairs+"`",A={Backspace:w,Enter:v},z=0;z<B.length;z++){A["'"+B.charAt(z)+"'"]=y(B.charAt(z))}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","brace",function(J,I){function D(g){for(var e=I.ch,d=0;;){var c=e<=0?-1:G.lastIndexOf(g,e-1);if(-1!=c){if(1==d&&c<I.ch){break}if(E=J.getTokenTypeAt(b.Pos(H,c+1)),!/^(comment|string)/.test(E)){return c+1}e=c-1}else{if(1==d){break}d=1,e=G.length}}}var F,E,H=I.line,G=J.getLine(H),C="{",B="}",F=D("{");if(null==F&&(C="[",B="]",F=D("[")),null!=F){var y,x,A=1,z=J.lastLine();b:for(var w=H;w<=z;++w){for(var v=J.getLine(w),u=w==H?F:0;;){var t=v.indexOf(C,u),a=v.indexOf(B,u);if(t<0&&(t=v.length),a<0&&(a=v.length),u=Math.min(t,a),u==v.length){break}if(J.getTokenTypeAt(b.Pos(w,u+1))==E){if(u==t){++A}else{if(!--A){y=w,x=u;break b}}}++u}}if(null!=y&&(H!=y||x!=F)){return{from:b.Pos(H,F),to:b.Pos(y,x)}}}}),b.registerHelper("fold","import",function(a,n){function m(t){if(t<a.firstLine()||t>a.lastLine()){return null}var s=a.getTokenAt(b.Pos(t,1));if(/\S/.test(s.string)||(s=a.getTokenAt(b.Pos(t,s.end+1))),"keyword"!=s.type||"import"!=s.string){return null}for(var r=t,q=Math.min(a.lastLine(),t+10);r<=q;++r){var p=a.getLine(r),o=p.indexOf(";");if(-1!=o){return{startCh:s.end,end:b.Pos(r,o)}}}}var k,n=n.line,l=m(n);if(!l||m(n-1)||(k=m(n-2))&&k.end.line==n-1){return null}for(var j=l.end;;){var i=m(j.line+1);if(null==i){break}j=i.end}return{from:a.clipPos(b.Pos(n,l.startCh+1)),to:j}}),b.registerHelper("fold","include",function(a,l){function k(f){if(f<a.firstLine()||f>a.lastLine()){return null}var e=a.getTokenAt(b.Pos(f,1));return/\S/.test(e.string)||(e=a.getTokenAt(b.Pos(f,e.end+1))),"meta"==e.type&&"#include"==e.string.slice(0,8)?e.start+8:void 0}var l=l.line,j=k(l);if(null==j||null!=k(l-1)){return null}for(var i=l;;){var h=k(i+1);if(null==h){break}++i}return{from:b.Pos(l,j+1),to:a.clipPos(b.Pos(i))}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerGlobalHelper("fold","comment",function(c){return c.blockCommentStart&&c.blockCommentEnd},function(N,M){var L=N.getModeAt(M),K=L.blockCommentStart,J=L.blockCommentEnd;if(K&&J){for(var G,I=M.line,H=N.getLine(I),F=M.ch,E=0;;){var D=F<=0?-1:H.lastIndexOf(K,F-1);if(-1!=D){if(1==E&&D<M.ch){return}if(/comment/.test(N.getTokenTypeAt(b.Pos(I,D+1)))&&(H.slice(D-J.length,D)==J||!/comment/.test(N.getTokenTypeAt(b.Pos(I,D))))){G=D+K.length;break}F=D-1}else{if(1==E){return}E=1,F=H.length}}var A,z,C=1,B=N.lastLine();b:for(var y=I;y<=B;++y){for(var x=N.getLine(y),w=y==I?G:0;;){var v=x.indexOf(K,w),a=x.indexOf(J,w);if(v<0&&(v=x.length),a<0&&(a=x.length),w=Math.min(v,a),w==x.length){break}if(w==v){++C}else{if(!--C){A=y,z=w;break b}}++w}}if(null!=A&&(I!=A||z!=G)){return{from:b.Pos(I,G),to:b.Pos(A,z)}}}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function f(t,s,r,q){function n(b){var l=p(t,s);if(!l||l.to.line-l.from.line<o){return null}for(var k=t.findMarksAt(l.from),d=0;d<k.length;++d){if(k[d].__isFold&&"fold"!==q){if(!b){return null}l.cleared=!0,k[d].clear()}}return l}if(r&&r.call){var p=r;r=null}else{var p=h(t,r,"rangeFinder")}"number"==typeof s&&(s=g.Pos(s,0));var o=h(t,r,"minFoldSize"),e=n(!0);if(h(t,r,"scanUp")){for(;!e&&s.line>t.firstLine();){s=g.Pos(s.line-1,0),e=n(!1)}}if(e&&!e.cleared&&"unfold"!==q){var c=j(t,r);g.on(c,"mousedown",function(d){a.clear(),g.e_preventDefault(d)});var a=t.markText(e.from,e.to,{replacedWith:c,clearOnEnter:!0,__isFold:!0});a.on("clear",function(k,b){g.signal(t,"unfold",t,k,b)}),g.signal(t,"fold",t,e.from,e.to)}}function j(k,e){var m=h(k,e,"widget");if("string"==typeof m){var l=document.createTextNode(m);m=document.createElement("span"),m.appendChild(l),m.className="CodeMirror-foldmarker"}return m}function h(k,d,m){if(d&&void 0!==d[m]){return d[m]}var l=k.options.foldOptions;return l&&void 0!==l[m]?l[m]:i[m]}g.newFoldFunction=function(b,d){return function(c,a){f(c,a,{rangeFinder:b,widget:d})}},g.defineExtension("foldCode",function(b,k,e){f(this,b,k,e)}),g.defineExtension("isFolded",function(e){for(var d=this.findMarksAt(e),k=0;k<d.length;++k){if(d[k].__isFold){return !0}}}),g.commands.toggleFold=function(b){b.foldCode(b.getCursor())},g.commands.fold=function(b){b.foldCode(b.getCursor(),null,"fold")},g.commands.unfold=function(b){b.foldCode(b.getCursor(),null,"unfold")},g.commands.foldAll=function(a){a.operation(function(){for(var e=a.firstLine(),b=a.lastLine();e<=b;e++){a.foldCode(g.Pos(e,0),null,"fold")}})},g.commands.unfoldAll=function(a){a.operation(function(){for(var e=a.firstLine(),b=a.lastLine();e<=b;e++){a.foldCode(g.Pos(e,0),null,"unfold")}})},g.registerHelper("fold","combine",function(){var b=Array.prototype.slice.call(arguments,0);return function(a,m){for(var l=0;l<b.length;++l){var k=b[l](a,m);if(k){return k}}}}),g.registerHelper("fold","auto",function(l,k){for(var o=l.getHelpers(k,"fold"),n=0;n<o.length;n++){var m=o[n](l,k);if(m){return m}}});var i={rangeFinder:g.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1};g.defineOption("foldOptions",null),g.defineExtension("foldOption",function(d,c){return h(this,d,c)})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],b):b(CodeMirror)}(function(x){function v(b){this.options=b,this.from=this.to=0}function u(b){return b===!0&&(b={}),null==b.gutter&&(b.gutter="CodeMirror-foldgutter"),null==b.indicatorOpen&&(b.indicatorOpen="CodeMirror-foldgutter-open"),null==b.indicatorFolded&&(b.indicatorFolded="CodeMirror-foldgutter-folded"),b}function t(b,h){for(var g=b.findMarksAt(w(h)),f=0;f<g.length;++f){if(g[f].__isFold&&g[f].find().from.line==h){return g[f]}}}function s(d){if("string"==typeof d){var c=document.createElement("div");return c.className=d+" CodeMirror-guttermarker-subtle",c}return d.cloneNode(!0)}function r(b,z,y){var l=b.state.foldGutter.options,k=z,f=b.foldOption(l,"minFoldSize"),e=b.foldOption(l,"rangeFinder");b.eachLine(z,y,function(i){var h=null;if(t(b,k)){h=s(l.indicatorFolded)}else{var g=w(k,0),a=e&&e(b,g);a&&a.to.line-a.from.line>=f&&(h=s(l.indicatorOpen))}b.setGutterMarker(i,l.gutter,h),++k})}function q(e){var d=e.getViewport(),f=e.state.foldGutter;f&&(e.operation(function(){r(e,d.from,d.to)}),f.from=d.from,f.to=d.to)}function p(b,l,k){var j=b.state.foldGutter;if(j){var i=j.options;if(k==i.gutter){var e=t(b,l);e?e.clear():b.foldCode(w(l,0),i.rangeFinder)}}}function o(e){var d=e.state.foldGutter;if(d){var f=d.options;d.from=d.to=0,clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){q(e)},f.foldOnChangeTimeSpan||600)}}function n(e){var d=e.state.foldGutter;if(d){var f=d.options;clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){var a=e.getViewport();d.from==d.to||a.from-d.to>20||d.from-a.to>20?q(e):e.operation(function(){a.from<d.from&&(r(e,a.from,d.from),d.from=a.from),a.to>d.to&&(r(e,d.to,a.to),d.to=a.to)})},f.updateViewportTimeSpan||400)}}function m(f,e){var h=f.state.foldGutter;if(h){var g=e.line;g>=h.from&&g<h.to&&r(f,g,g+1)}}x.defineOption("foldGutter",!1,function(a,d,c){c&&c!=x.Init&&(a.clearGutter(a.state.foldGutter.options.gutter),a.state.foldGutter=null,a.off("gutterClick",p),a.off("change",o),a.off("viewportChange",n),a.off("fold",m),a.off("unfold",m),a.off("swapDoc",o)),d&&(a.state.foldGutter=new v(u(d)),q(a),a.on("gutterClick",p),a.on("change",o),a.on("viewportChange",n),a.on("fold",m),a.on("unfold",m),a.on("swapDoc",o))});var w=x.Pos}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","indent",function(v,u){var t=v.getOption("tabSize"),s=v.getLine(u.line);if(/\S/.test(s)){for(var r=function(c){return b.countColumn(c,null,t)},q=r(s),p=null,o=u.line+1,n=v.lastLine();o<=n;++o){var m=v.getLine(o),a=r(m);if(a>q){p=o}else{if(/\S/.test(m)){break}}}return p?{from:b.Pos(u.line,s.length),to:b.Pos(p,v.getLine(p).length)}:void 0}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","markdown",function(v,u){function s(f){var e=v.getTokenTypeAt(b.Pos(f,0));return e&&/\bheader\b/.test(e)}function r(e,d,h){var g=d&&d.match(/^#+/);return g&&s(e)?g[0].length:(g=h&&h.match(/^[=\-]+\s*$/),g&&s(e+1)?"="==h[0]?1:2:t)}var t=100,q=v.getLine(u.line),p=v.getLine(u.line+1),o=r(u.line,q,p);if(o===t){return void 0}for(var n=v.lastLine(),m=u.line,a=v.getLine(m+2);m<n&&!(r(m+1,p,a)<=o);){++m,p=a,a=v.getLine(m+2)}return{from:b.Pos(u.line,q.length),to:b.Pos(m,v.getLine(m).length)}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(F){function D(d,c){return d.line-c.line||d.ch-c.ch}function z(f,e,h,g){this.line=e,this.ch=h,this.cm=f,this.text=f.getLine(e),this.min=g?g.from:f.firstLine(),this.max=g?g.to-1:f.lastLine()}function y(b,f){var e=b.cm.getTokenTypeAt(E(b.line,f));return e&&/\btag\b/.test(e)}function x(b){return b.line>=b.max?void 0:(b.ch=0,b.text=b.cm.getLine(++b.line),!0)}function w(b){return b.line<=b.min?void 0:(b.text=b.cm.getLine(--b.line),b.ch=b.text.length,!0)}function v(f){for(;;){var e=f.text.indexOf(">",f.ch);if(-1==e){if(x(f)){continue}return}if(y(f,e+1)){var h=f.text.lastIndexOf("/",e),g=h>-1&&!/\S/.test(f.text.slice(h+1,e));return f.ch=e+1,g?"selfClose":"regular"}f.ch=e+1}}function u(e){for(;;){var d=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==d){if(w(e)){continue}return}if(y(e,d+1)){A.lastIndex=d,e.ch=d;var f=A.exec(e.text);if(f&&f.index==d){return f}}else{e.ch=d}}}function t(d){for(;;){A.lastIndex=d.ch;var c=A.exec(d.text);if(!c){if(x(d)){continue}return}if(y(d,c.index+1)){return d.ch=c.index+c[0].length,c}d.ch=c.index+1}}function s(f){for(;;){var e=f.ch?f.text.lastIndexOf(">",f.ch-1):-1;if(-1==e){if(w(f)){continue}return}if(y(f,e+1)){var h=f.text.lastIndexOf("/",e),g=h>-1&&!/\S/.test(f.text.slice(h+1,e));return f.ch=e+1,g?"selfClose":"regular"}f.ch=e}}function r(b,p){for(var o=[];;){var m,n=t(b),l=b.line,k=b.ch-(n?n[0].length:0);if(!n||!(m=v(b))){return}if("selfClose"!=m){if(n[1]){for(var j=o.length-1;j>=0;--j){if(o[j]==n[2]){o.length=j;break}}if(j<0&&(!p||p==n[2])){return{tag:n[2],from:E(l,k),to:E(b.line,b.ch)}}}else{o.push(n[2])}}}}function q(b,p){for(var o=[];;){var n=s(b);if(!n){return}if("selfClose"!=n){var m=b.line,l=b.ch,k=u(b);if(!k){return}if(k[1]){o.push(k[2])}else{for(var j=o.length-1;j>=0;--j){if(o[j]==k[2]){o.length=j;break}}if(j<0&&(!p||p==k[2])){return{tag:k[2],from:E(b.line,b.ch),to:E(m,l)}}}}else{u(b)}}}var E=F.Pos,C="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",B=C+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",A=new RegExp("<(/?)(["+C+"]["+B+"]*)","g");F.registerHelper("fold","xml",function(b,l){for(var k=new z(b,l.line,0);;){var i,j=t(k);if(!j||k.line!=l.line||!(i=v(k))){return}if(!j[1]&&"selfClose"!=i){var l=E(k.line,k.ch),g=r(k,j[2]);return g&&{from:l,to:g.from}}}}),F.findMatchingTag=function(c,p,o){var n=new z(c,p.line,p.ch,o);if(-1!=n.text.indexOf(">")||-1!=n.text.indexOf("<")){var l=v(n),k=l&&E(n.line,n.ch),g=l&&u(n);if(l&&g&&!(D(n,p)>0)){var b={from:E(n.line,n.ch),to:k,tag:g[2]};return"selfClose"==l?{open:b,close:null,at:"open"}:g[1]?{open:q(n,g[2]),close:b,at:"close"}:(n=new z(c,k.line,k.ch,o),{open:b,close:r(n,g[2]),at:"open"})}}},F.findEnclosingTag=function(i,g,n){for(var m=new z(i,g.line,g.ch,n);;){var l=q(m);if(!l){break}var k=new z(i,g.line,g.ch,n),j=r(k,l.tag);if(j){return{open:l,close:j}}}},F.scanForClosingTag=function(g,f,j,i){var h=new z(g,f.line,f.ch,i?{from:0,to:i}:null);return r(h,j)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(D){function A(e,d){this.cm=e,this.options=d,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var f=this;e.on("cursorActivity",this.activityFunc=function(){f.cursorActivity()})}function x(a,f){var e=D.cmpPos(f.from,a.from);return e>0&&a.to.ch-a.from.ch!=f.to.ch-f.from.ch}function w(h,g,l){var k=h.options.hintOptions,j={};for(var i in p){j[i]=p[i]}if(k){for(var i in k){void 0!==k[i]&&(j[i]=k[i])}}if(l){for(var i in l){void 0!==l[i]&&(j[i]=l[i])}}return j.hint.resolve&&(j.hint=j.hint.resolve(h,g)),j}function v(b){return"string"==typeof b?b:b.text}function u(j,i){function m(b,e){var c;c="string"!=typeof e?function(d){return e(d,i)}:E.hasOwnProperty(e)?E[e]:e,n[b]=c}var E={Up:function(){i.moveFocus(-1)},Down:function(){i.moveFocus(1)},PageUp:function(){i.moveFocus(-i.menuSize()+1,!0)},PageDown:function(){i.moveFocus(i.menuSize()-1,!0)},Home:function(){i.setFocus(0)},End:function(){i.setFocus(i.length-1)},Enter:i.pick,Tab:i.pick,Esc:i.close},o=j.options.customKeys,n=o?{}:E;if(o){for(var l in o){o.hasOwnProperty(l)&&m(l,o[l])}}var k=j.options.extraKeys;if(k){for(var l in k){k.hasOwnProperty(l)&&m(l,k[l])}}return n}function t(d,c){for(;c&&c!=d;){if("LI"===c.nodeName.toUpperCase()&&c.parentNode==d){return c}c=c.parentNode}}function s(V,U){this.completion=V,this.data=U,this.picked=!1;var T=this,S=V.cm,R=this.hints=document.createElement("ul");R.className="CodeMirror-hints",this.selectedHint=U.selectedHint||0;for(var Q=U.list,P=0;P<Q.length;++P){var O=R.appendChild(document.createElement("li")),N=Q[P],M=C+(P!=this.selectedHint?"":" "+B);null!=N.className&&(M=N.className+" "+M),O.className=M,N.render?N.render(O,U,N):O.appendChild(document.createTextNode(N.displayText||v(N))),O.hintId=P}var K=S.cursorCoords(V.options.alignWithWord?U.from:null),I=K.left,G=K.bottom,E=!0;R.style.left=I+"px",R.style.top=G+"px";var k=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),j=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(V.options.container||document.body).appendChild(R);var i=R.getBoundingClientRect(),c=i.bottom-j;if(c>0){var b=i.bottom-i.top,a=K.top-(K.bottom-i.top);if(a-b>0){R.style.top=(G=K.top-b)+"px",E=!1}else{if(b>j){R.style.height=j-5+"px",R.style.top=(G=K.bottom-i.top)+"px";var L=S.getCursor();U.from.ch!=L.ch&&(K=S.cursorCoords(L),R.style.left=(I=K.left)+"px",i=R.getBoundingClientRect())}}}var J=i.right-k;if(J>0&&(i.right-i.left>k&&(R.style.width=k-5+"px",J-=i.right-i.left-k),R.style.left=(I=K.left-J)+"px"),S.addKeyMap(this.keyMap=u(V,{moveFocus:function(e,d){T.changeActive(T.selectedHint+e,d)},setFocus:function(d){T.changeActive(d)},menuSize:function(){return T.screenAmount()},length:Q.length,close:function(){V.close()},pick:function(){T.pick()},data:U})),V.options.closeOnUnfocus){var H;S.on("blur",this.onBlur=function(){H=setTimeout(function(){V.close()},100)}),S.on("focus",this.onFocus=function(){clearTimeout(H)})}var F=S.getScrollInfo();return S.on("scroll",this.onScroll=function(){var f=S.getScrollInfo(),d=S.getWrapperElement().getBoundingClientRect(),h=G+F.top-f.top,g=h-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return E||(g+=R.offsetHeight),g<=d.top||g>=d.bottom?V.close():(R.style.top=h+"px",void (R.style.left=I+F.left-f.left+"px"))}),D.on(R,"dblclick",function(e){var d=t(R,e.target||e.srcElement);d&&null!=d.hintId&&(T.changeActive(d.hintId),T.pick())}),D.on(R,"click",function(e){var d=t(R,e.target||e.srcElement);d&&null!=d.hintId&&(T.changeActive(d.hintId),V.options.completeOnSingleClick&&T.pick())}),D.on(R,"mousedown",function(){setTimeout(function(){S.focus()},20)}),D.signal(U,"select",Q[0],R.firstChild),!0}function r(f,e){if(!f.somethingSelected()){return e}for(var h=[],g=0;g<e.length;g++){e[g].supportsSelection&&h.push(e[g])}return h}function q(a,n){var l,m=a.getHelpers(n,"hint");if(m.length){for(var j,k=!1,i=0;i<m.length;i++){m[i].async&&(k=!0)}return k?(j=function(g,d,E){function h(e,c){if(e==o.length){return d(null)}var b=o[e];if(b.async){b(g,function(f){f?d(f):h(e+1)},E)}else{var c=b(g,E);c?d(c):h(e+1)}}var o=r(g,m);h(0)},j.async=!0):j=function(g,d){for(var E=r(g,m),o=0;o<E.length;o++){var h=E[o](g,d);if(h&&h.list.length){return h}}},j.supportsSelection=!0,j}return(l=a.getHelper(a.getCursor(),"hintWords"))?function(c){return D.hint.fromList(c,{words:l})}:D.hint.anyword?function(d,e){return D.hint.anyword(d,e)}:function(){}}var C="CodeMirror-hint",B="CodeMirror-hint-active";D.showHint=function(g,f,j){if(!f){return g.showHint(j)}j&&j.async&&(f.async=!0);var i={hint:f};if(j){for(var h in j){i[h]=j[h]}}return g.showHint(i)},D.defineExtension("showHint",function(a){a=w(this,this.getCursor("start"),a);var h=this.listSelections();if(!(h.length>1)){if(this.somethingSelected()){if(!a.hint.supportsSelection){return}for(var g=0;g<h.length;g++){if(h[g].head.line!=h[g].anchor.line){return}}}this.state.completionActive&&this.state.completionActive.close();var d=this.state.completionActive=new A(this,a);d.options.hint&&(D.signal(this,"startCompletion",this),d.update(!0))}});var z=window.requestAnimationFrame||function(b){return setTimeout(b,1000/60)},y=window.cancelAnimationFrame||clearTimeout;A.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&D.signal(this.data,"close"),this.widget&&this.widget.close(),D.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,f){var e=a.list[f];e.hint?e.hint(this.cm,a,e):this.cm.replaceRange(v(e),e.from||a.from,e.to||a.to,"complete"),D.signal(a,"pick",e),this.close()},cursorActivity:function(){this.debounce&&(y(this.debounce),this.debounce=0);var e=this.cm.getCursor(),d=this.cm.getLine(e.line);if(e.line!=this.startPos.line||d.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(d.charAt(e.ch-1))){this.close()}else{var f=this;this.debounce=z(function(){f.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){if(this.options.hint.async){var d=++this.tick,f=this;this.options.hint(this.cm,function(a){f.tick==d&&f.finishUpdate(a,e)},this.options)}else{this.finishUpdate(this.options.hint(this.cm,this.options),e)}}},finishUpdate:function(a,f){this.data&&D.signal(this.data,"update");var e=this.widget&&this.widget.picked||f&&this.options.completeSingle;this.widget&&this.widget.close(),a&&this.data&&x(this.data,a)||(this.data=a,a&&a.list.length&&(e&&1==a.list.length?this.pick(a,0):(this.widget=new s(this,a),D.signal(a,"shown"))))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var b=this.completion.cm;this.completion.options.closeOnUnfocus&&(b.off("blur",this.onBlur),b.off("focus",this.onFocus)),b.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var b=this;this.keyMap={Enter:function(){b.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a,f){if(a>=this.data.list.length?a=f?this.data.list.length-1:0:a<0&&(a=f?0:this.data.list.length-1),this.selectedHint!=a){var c=this.hints.childNodes[this.selectedHint];c.className=c.className.replace(" "+B,""),c=this.hints.childNodes[this.selectedHint=a],c.className+=" "+B,c.offsetTop<this.hints.scrollTop?this.hints.scrollTop=c.offsetTop-3:c.offsetTop+c.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=c.offsetTop+c.offsetHeight-this.hints.clientHeight+3),D.signal(this.data,"select",this.data.list[this.selectedHint],c)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},D.registerHelper("hint","auto",{resolve:q}),D.registerHelper("hint","fromList",function(I,H){var G=I.getCursor(),F=I.getTokenAt(G),E=D.Pos(G.line,F.end);if(F.string&&/\w/.test(F.string[F.string.length-1])){var o=F.string,n=D.Pos(G.line,F.start)}else{var o="",n=E}for(var m=[],l=0;l<H.words.length;l++){var a=H.words[l];a.slice(0,o.length)==o&&m.push(a)}return m.length?{list:m,from:n,to:E}:void 0}),D.commands.autocomplete=D.showHint;var p={hint:D.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};D.defineOption("hintOptions",null)});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(e){var d=/[\w$]+/,f=500;e.registerHelper("hint","anyword",function(F,E){for(var D=E&&E.word||d,C=E&&E.range||f,B=F.getCursor(),A=F.getLine(B.line),z=B.ch,y=z;y&&D.test(A.charAt(y-1));){--y}for(var x=y!=z&&A.slice(y,z),w=E&&E.list||[],v={},u=new RegExp(D.source,"g"),c=-1;c<=1;c+=2){for(var b=B.line,a=Math.min(Math.max(b+c*C,F.firstLine()),F.lastLine())+c;b!=a;b+=c){for(var G,H=F.getLine(b);G=u.exec(H);){(b!=B.line||G[0]!==x)&&(x&&0!=G[0].lastIndexOf(x,0)||Object.prototype.hasOwnProperty.call(v,G[0])||(v[G[0]]=!0,w.push(G[0])))}}}return{list:w,from:e.Pos(B.line,y),to:e.Pos(B.line,z)}})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(j){function n(b){for(var c=0;c<b.state.activeLines.length;c++){b.removeLineClass(b.state.activeLines[c],"wrap",i),b.removeLineClass(b.state.activeLines[c],"background",p),b.removeLineClass(b.state.activeLines[c],"gutter",o)}}function m(e,d){if(e.length!=d.length){return !1}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return !1}}return !0}function l(b,q){for(var f=[],e=0;e<q.length;e++){var d=q[e];if(d.empty()){var c=b.getLineHandleVisualStart(d.head.line);f[f.length-1]!=c&&f.push(c)}}m(b.state.activeLines,f)||b.operation(function(){n(b);for(var a=0;a<f.length;a++){b.addLineClass(f[a],"wrap",i),b.addLineClass(f[a],"background",p),b.addLineClass(f[a],"gutter",o)}b.state.activeLines=f})}function k(d,c){l(d,c.ranges)}var i="CodeMirror-activeline",p="CodeMirror-activeline-background",o="CodeMirror-activeline-gutter";j.defineOption("styleActiveLine",!1,function(a,h,g){var e=g&&g!=j.Init;h&&!e?(a.state.activeLines=[],l(a,a.listSelections()),a.on("beforeSelectionChange",k)):!h&&e&&(a.off("beforeSelectionChange",k),n(a),delete a.state.activeLines)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function h(d){var c=d.search(j);return -1==c?0:c}var f={},j=/[^\s\u00a0]/,i=g.Pos;g.commands.toggleComment=function(b){b.toggleComment()},g.defineExtension("toggleComment",function(b){b||(b=f);for(var p=this,o=1/0,n=this.listSelections(),m=null,l=n.length-1;l>=0;l--){var k=n[l].from(),d=n[l].to();k.line>=o||(d.line>=o&&(d=i(o,0)),o=k.line,null==m?p.uncomment(k,d,b)?m="un":(p.lineComment(k,d,b),m="line"):"un"==m?p.uncomment(k,d,b):p.lineComment(k,d,b))}}),g.defineExtension("lineComment",function(t,s,r){r||(r=f);var q=this,p=q.getModeAt(t),o=r.lineComment||p.lineComment;if(!o){return void ((r.blockCommentStart||p.blockCommentStart)&&(r.fullLines=!0,q.blockComment(t,s,r)))}var e=q.getLine(t.line);if(null!=e){var d=Math.min(0!=s.ch||s.line==t.line?s.line+1:s.line,q.lastLine()+1),c=null==r.padding?" ":r.padding,b=r.commentBlankLines||t.line==s.line;q.operation(function(){if(r.indent){for(var a=null,n=t.line;n<d;++n){var m=q.getLine(n),l=m.slice(0,h(m));(null==a||a.length>l.length)&&(a=l)}for(var n=t.line;n<d;++n){var m=q.getLine(n),u=a.length;(b||j.test(m))&&(m.slice(0,u)!=a&&(u=h(m)),q.replaceRange(a+o+c,i(n,0),i(n,u)))}}else{for(var n=t.line;n<d;++n){(b||j.test(q.getLine(n)))&&q.replaceRange(o+c,i(n,0))}}})}}),g.defineExtension("blockComment",function(r,q,p){p||(p=f);var o=this,n=o.getModeAt(r),m=p.blockCommentStart||n.blockCommentStart,d=p.blockCommentEnd||n.blockCommentEnd;if(!m||!d){return void ((p.lineComment||n.lineComment)&&0!=p.fullLines&&o.lineComment(r,q,p))}var c=Math.min(q.line,o.lastLine());c!=r.line&&0==q.ch&&j.test(o.getLine(c))&&--c;var b=null==p.padding?" ":p.padding;r.line>c||o.operation(function(){if(0!=p.fullLines){var e=j.test(o.getLine(c));o.replaceRange(b+d,i(c)),o.replaceRange(m+b,i(r.line,0));var a=p.blockCommentLead||n.blockCommentLead;if(null!=a){for(var k=r.line+1;k<=c;++k){(k!=c||e)&&o.replaceRange(a+b,i(k,0))}}}else{o.replaceRange(d,q),o.replaceRange(m,r)}})}),g.defineExtension("uncomment",function(V,U,T){T||(T=f);var L,S=this,R=S.getModeAt(V),Q=Math.min(0!=U.ch||U.line==V.line?U.line:U.line-1,S.lastLine()),P=Math.min(V.line,Q),O=T.lineComment||R.lineComment,N=[],M=null==T.padding?" ":T.padding;V:if(O){for(var K=P;K<=Q;++K){var J=S.getLine(K),H=J.indexOf(O);if(H>-1&&!/comment/.test(S.getTokenTypeAt(i(K,H+1)))&&(H=-1),-1==H&&(K!=Q||K==P)&&j.test(J)){break V}if(H>-1&&j.test(J.slice(0,H))){break V}N.push(J)}if(S.operation(function(){for(var l=P;l<=Q;++l){var k=N[l-P],n=k.indexOf(O),m=n+O.length;n<0||(k.slice(m,m+M.length)==M&&(m+=M.length),L=!0,S.replaceRange("",i(l,n),i(l,m)))}}),L){return !0}}var G=T.blockCommentStart||R.blockCommentStart,F=T.blockCommentEnd||R.blockCommentEnd;if(!G||!F){return !1}var E=T.blockCommentLead||R.blockCommentLead,D=S.getLine(P),C=Q==P?D:S.getLine(Q),B=D.indexOf(G),d=C.lastIndexOf(F);if(-1==d&&P!=Q&&(C=S.getLine(--Q),d=C.lastIndexOf(F)),-1==B||-1==d||!/comment/.test(S.getTokenTypeAt(i(P,B+1)))||!/comment/.test(S.getTokenTypeAt(i(Q,d+1)))){return !1}var c=D.lastIndexOf(G,V.ch),b=-1==c?-1:D.slice(0,V.ch).indexOf(F,c+G.length);if(-1!=c&&-1!=b&&b+F.length!=V.ch){return !1}b=C.indexOf(F,U.ch);var I=C.slice(U.ch).lastIndexOf(G,b-U.ch);return c=-1==b||-1==I?-1:U.ch+I,-1!=b&&-1!=c&&c!=U.ch?!1:(S.operation(function(){S.replaceRange("",i(Q,d-(M&&C.slice(d-M.length,d)==M?M.length:0)),i(Q,d+F.length));var l=B+G.length;if(M&&D.slice(l,l+M.length)==M&&(l+=M.length),S.replaceRange("",i(P,B),i(P,l)),E){for(var k=P+1;k<=Q;++k){var o=S.getLine(k),n=o.indexOf(E);if(-1!=n&&!j.test(o.slice(0,n))){var m=n+E.length;M&&o.slice(m,m+M.length)==M&&(m+=M.length),S.replaceRange("",i(k,n),i(k,m))}}}}),!0)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function i(B){if(B.getOption("disableInput")){return g.Pass}for(var z,A=B.listSelections(),y=[],x=0;x<A.length;x++){var w=A[x].head,v=B.getTokenAt(w);if("comment"!=v.type){return g.Pass}var u=g.innerMode(B.getMode(),v.state).mode;if(z){if(z!=u){return g.Pass}}else{z=u}var t=null;if(z.blockCommentStart&&z.blockCommentContinue){var q,s=v.string.indexOf(z.blockCommentEnd),r=B.getRange(g.Pos(w.line,0),g.Pos(w.line,v.end));if(-1!=s&&s==v.string.length-z.blockCommentEnd.length&&w.ch>=s){}else{if(0==v.string.indexOf(z.blockCommentStart)){if(t=r.slice(0,v.start),!/^\s*$/.test(t)){t="";for(var e=0;e<v.start;++e){t+=" "}}}else{-1!=(q=r.indexOf(z.blockCommentContinue))&&q+z.blockCommentContinue.length>v.start&&/^\s*$/.test(r.slice(0,q))&&(t=r.slice(0,q))}}null!=t&&(t+=z.blockCommentContinue)}if(null==t&&z.lineComment&&h(B)){var a=B.getLine(w.line),q=a.indexOf(z.lineComment);q>-1&&(t=a.slice(0,q),/\S/.test(t)?t=null:t+=z.lineComment+a.slice(q+z.lineComment.length).match(/^\s*/)[0])}if(null==t){return g.Pass}y[x]="\n"+t}B.operation(function(){for(var b=A.length-1;b>=0;b--){B.replaceRange(y[b],A[b].from(),A[b].to(),"+insert")}})}function h(d){var c=d.getOption("continueComments");return c&&"object"==typeof c?c.continueLineComment!==!1:!0}for(var f=["clike","css","javascript"],j=0;j<f.length;++j){g.extendMode(f[j],{blockCommentContinue:" * "})}g.defineOption("continueComments",null,function(a,m,l){if(l&&l!=g.Init&&a.removeKeyMap("continueComment"),m){var k="Enter";"string"==typeof m?k=m:"object"==typeof m&&m.key&&(k=m.key);var d={name:"continueComment"};d[k]=i,a.addKeyMap(d)}})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(h){function g(b){b.state.placeholder&&(b.state.placeholder.parentNode.removeChild(b.state.placeholder),b.state.placeholder=null)}function l(b){g(b);var f=b.state.placeholder=document.createElement("pre");f.style.cssText="height: 0; overflow: visible",f.className="CodeMirror-placeholder";var e=b.getOption("placeholder");"string"==typeof e&&(e=document.createTextNode(e)),f.appendChild(e),b.display.lineSpace.insertBefore(f,b.display.lineSpace.firstChild)}function k(b){i(b)&&l(b)}function j(b){var f=b.getWrapperElement(),c=i(b);f.className=f.className.replace(" CodeMirror-empty","")+(c?" CodeMirror-empty":""),c?l(b):g(b)}function i(b){return 1===b.lineCount()&&""===b.getLine(0)}h.defineOption("placeholder","",function(m,e,d){var b=d&&d!=h.Init;if(e&&!b){m.on("blur",k),m.on("change",j),m.on("swapDoc",j),j(m)}else{if(!e&&b){m.off("blur",k),m.off("change",j),m.off("swapDoc",j),g(m);var a=m.getWrapperElement();a.className=a.className.replace(" CodeMirror-empty","")}}e&&!m.hasFocus()&&k(m)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"kotlin",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm","cgi"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["py","pyw"]},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"]},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]}];for(var b=0;b<a.modeInfo.length;b++){var c=a.modeInfo[b];if(c.mimes){c.mime=c.mimes[0]}}a.findModeByMIME=function(f){f=f.toLowerCase();for(var e=0;e<a.modeInfo.length;e++){var g=a.modeInfo[e];if(g.mime==f){return g}if(g.mimes){for(var d=0;d<g.mimes.length;d++){if(g.mimes[d]==f){return g}}}}};a.findModeByExtension=function(f){for(var e=0;e<a.modeInfo.length;e++){var g=a.modeInfo[e];if(g.ext){for(var d=0;d<g.ext.length;d++){if(g.ext[d]==f){return g}}}}};a.findModeByFileName=function(e){for(var f=0;f<a.modeInfo.length;f++){var h=a.modeInfo[f];if(h.file&&h.file.test(e)){return h}}var d=e.lastIndexOf(".");var g=d>-1&&e.substring(d+1,e.length);if(g){return a.findModeByExtension(g)}};a.findModeByName=function(e){e=e.toLowerCase();for(var f=0;f<a.modeInfo.length;f++){var g=a.modeInfo[f];if(g.name.toLowerCase()==e){return g}if(g.alias){for(var d=0;d<g.alias.length;d++){if(g.alias[d].toLowerCase()==e){return g}}}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),"cjs")}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],function(b){a(b,"amd")})}else{a(CodeMirror,"plain")}}})(function(a,c){if(!a.modeURL){a.modeURL="../mode/%N/%N.js"}var e={};function d(f,h){var g=h;return function(){if(--g==0){f()}}}function b(l,f){var k=a.modes[l].dependencies;if(!k){return f()}var j=[];for(var h=0;h<k.length;++h){if(!a.modes.hasOwnProperty(k[h])){j.push(k[h])}}if(!j.length){return f()}var g=d(f,j.length);for(var h=0;h<j.length;++h){a.requireMode(j[h],g)}}a.requireMode=function(k,f){if(typeof k!="string"){k=k.name}if(a.modes.hasOwnProperty(k)){return b(k,f)}if(e.hasOwnProperty(k)){return e[k].push(f)}var h=a.modeURL.replace(/%N/g,k);if(c=="plain"){var g=document.createElement("script");g.src=h;var i=document.getElementsByTagName("script")[0];var j=e[k]=[f];a.on(g,"load",function(){b(k,function(){for(var l=0;l<j.length;++l){j[l]()}})});i.parentNode.insertBefore(g,i)}else{if(c=="cjs"){require(h);f()}else{if(c=="amd"){requirejs([h],f)}}}};a.autoLoadMode=function(f,g){if(!a.modes.hasOwnProperty(g)){a.requireMode(g,function(){f.setOption("mode",f.getOption("mode"))})}}});