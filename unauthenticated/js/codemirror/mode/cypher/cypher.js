(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(c){var d=function(a){return new RegExp("^(?:"+a.join("|")+")$","i")};c.defineMode("cypher",function(s){var r=function(f){var e=f.next();if(e==='"'){f.match(/.*?"/);return"string"}if(e==="'"){f.match(/.*?'/);return"string"}if(/[{}\(\),\.;\[\]]/.test(e)){a=e;return"node"}else{if(e==="/"&&f.eat("/")){f.skipToEnd();return"comment"}else{if(q.test(e)){f.eatWhile(q);return null}else{f.eatWhile(/[_\w\d]/);if(f.eat(":")){f.eatWhile(/[\w\d_\-]/);return"atom"}var g=f.current();if(t.test(g)){return"builtin"}if(m.test(g)){return"def"}if(p.test(g)){return"keyword"}return"variable"}}}};var n=function(f,g,e){return f.context={prev:f.context,indent:f.indent,col:e,type:g}};var b=function(e){e.indent=e.context.indent;return e.context=e.context.prev};var o=s.indentUnit;var a;var t=d(["abs","acos","allShortestPaths","asin","atan","atan2","avg","ceil","coalesce","collect","cos","cot","count","degrees","e","endnode","exp","extract","filter","floor","haversin","head","id","keys","labels","last","left","length","log","log10","lower","ltrim","max","min","node","nodes","percentileCont","percentileDisc","pi","radians","rand","range","reduce","rel","relationship","relationships","replace","reverse","right","round","rtrim","shortestPath","sign","sin","size","split","sqrt","startnode","stdev","stdevp","str","substring","sum","tail","tan","timestamp","toFloat","toInt","toString","trim","type","upper"]);var m=d(["all","and","any","contains","exists","has","in","none","not","or","single","xor"]);var p=d(["as","asc","ascending","assert","by","case","commit","constraint","create","csv","cypher","delete","desc","descending","detach","distinct","drop","else","end","ends","explain","false","fieldterminator","foreach","from","headers","in","index","is","join","limit","load","match","merge","null","on","optional","order","periodic","profile","remove","return","scan","set","skip","start","starts","then","true","union","unique","unwind","using","when","where","with","call","yield"]);var q=/[*+\-<>=&|~%^]/;return{startState:function(){return{tokenize:r,context:null,indent:0,col:0}},token:function(f,g){if(f.sol()){if(g.context&&(g.context.align==null)){g.context.align=false}g.indent=f.indentation()}if(f.eatSpace()){return null}var e=g.tokenize(f,g);if(e!=="comment"&&g.context&&(g.context.align==null)&&g.context.type!=="pattern"){g.context.align=true}if(a==="("){n(g,")",f.column())}else{if(a==="["){n(g,"]",f.column())}else{if(a==="{"){n(g,"}",f.column())}else{if(/[\]\}\)]/.test(a)){while(g.context&&g.context.type==="pattern"){b(g)}if(g.context&&a===g.context.type){b(g)}}else{if(a==="."&&g.context&&g.context.type==="pattern"){b(g)}else{if(/atom|string|variable/.test(e)&&g.context){if(/[\}\]]/.test(g.context.type)){n(g,"pattern",f.column())}else{if(g.context.type==="pattern"&&!g.context.align){g.context.align=true;g.context.col=f.column()}}}}}}}}return e},indent:function(f,e){var g=e&&e.charAt(0);var h=f.context;if(/[\]\}]/.test(g)){while(h&&h.type==="pattern"){h=h.prev}}var i=h&&g===h.type;if(!h){return 0}if(h.type==="keywords"){return c.commands.newlineAndIndent}if(h.align){return h.col+(i?0:1)}return h.indent+(i?0:o)}}});c.modeExtensions.cypher={autoFormatLineBreaks:function(a){var g,h,b;var h=a.split("\n");var b=/\s+\b(return|where|order by|match|with|skip|limit|create|delete|set)\b\s/g;for(var g=0;g<h.length;g++){h[g]=h[g].replace(b," \n$1 ").trim()}return h.join("\n")}};c.defineMIME("application/x-cypher-query","cypher")});