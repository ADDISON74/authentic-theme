(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("q",function(y){var v=y.indentUnit,s,w=z(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),a=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;function z(c){return new RegExp("^("+c.join("|")+")$")}function x(d,e){var f=d.sol(),c=d.next();s=null;if(f){if(c=="/"){return(e.tokenize=r)(d,e)}else{if(c=="\\"){if(d.eol()||/\s/.test(d.peek())){return d.skipToEnd(),/^\\\s*$/.test(d.current())?(e.tokenize=p)(d):e.tokenize=x,"comment"}else{return e.tokenize=x,"builtin"}}}}if(/\s/.test(c)){return d.peek()=="/"?(d.skipToEnd(),"comment"):"whitespace"}if(c=='"'){return(e.tokenize=q)(d,e)}if(c=="`"){return d.eatWhile(/[A-Za-z\d_:\/.]/),"symbol"}if(("."==c&&/\d/.test(d.peek()))||/\d/.test(c)){var g=null;d.backUp(1);if(d.match(/^\d{4}\.\d{2}(m|\.\d{2}([DT](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||d.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||d.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||d.match(/^\d+[ptuv]{1}/)){g="temporal"}else{if(d.match(/^0[NwW]{1}/)||d.match(/^0x[\da-fA-F]*/)||d.match(/^[01]+[b]{1}/)||d.match(/^\d+[chijn]{1}/)||d.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/)){g="number"}}return(g&&(!(c=d.peek())||a.test(c)))?g:(d.next(),"error")}if(/[A-Za-z]|\./.test(c)){return d.eatWhile(/[A-Za-z._\d]/),w.test(d.current())?"keyword":"variable"}if(/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(c)){return null}if(/[{}\(\[\]\)]/.test(c)){return null}return"error"}function r(c,d){return c.skipToEnd(),/\/\s*$/.test(c.current())?(d.tokenize=o)(c,d):(d.tokenize=x),"comment"}function o(c,d){var e=c.sol()&&c.peek()=="\\";c.skipToEnd();if(e&&/^\\\s*$/.test(c.current())){d.tokenize=x}return"comment"}function p(c){return c.skipToEnd(),"comment"}function q(c,e){var d=false,f,g=false;while((f=c.next())){if(f=='"'&&!d){g=true;break}d=!d&&f=="\\"}if(g){e.tokenize=x}return"string"}function u(c,d,e){c.context={prev:c.context,indent:c.indent,col:e,type:d}}function t(c){c.indent=c.context.indent;c.context=c.context.prev}return{startState:function(){return{tokenize:x,context:null,indent:0,col:0}},token:function(c,d){if(c.sol()){if(d.context&&d.context.align==null){d.context.align=false}d.indent=c.indentation()}var e=d.tokenize(c,d);if(e!="comment"&&d.context&&d.context.align==null&&d.context.type!="pattern"){d.context.align=true}if(s=="("){u(d,")",c.column())}else{if(s=="["){u(d,"]",c.column())}else{if(s=="{"){u(d,"}",c.column())}else{if(/[\]\}\)]/.test(s)){while(d.context&&d.context.type=="pattern"){t(d)}if(d.context&&s==d.context.type){t(d)}}else{if(s=="."&&d.context&&d.context.type=="pattern"){t(d)}else{if(/atom|string|variable/.test(e)&&d.context){if(/[\}\]]/.test(d.context.type)){u(d,"pattern",c.column())}else{if(d.context.type=="pattern"&&!d.context.align){d.context.align=true;d.context.col=c.column()}}}}}}}}return e},indent:function(c,g){var d=g&&g.charAt(0);var e=c.context;if(/[\]\}]/.test(d)){while(e&&e.type=="pattern"){e=e.prev}}var f=e&&d==e.type;if(!e){return 0}else{if(e.type=="pattern"){return e.col}else{if(e.align){return e.col+(f?0:1)}else{return e.indent+(f?0:v)}}}}}});b.defineMIME("text/x-q","q")});