(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("dtd",function(n){var o=n.indentUnit,l;function p(d,c){l=c;return d}function j(c,e){var f=c.next();if(f=="<"&&c.eat("!")){if(c.eatWhile(/[\-]/)){e.tokenize=a;return a(c,e)}else{if(c.eatWhile(/[\w]/)){return p("keyword","doindent")}}}else{if(f=="<"&&c.eat("?")){e.tokenize=m("meta","?>");return p("meta",f)}else{if(f=="#"&&c.eatWhile(/[\w]/)){return p("atom","tag")}else{if(f=="|"){return p("keyword","seperator")}else{if(f.match(/[\(\)\[\]\-\.,\+\?>]/)){return p(null,f)}else{if(f.match(/[\[\]]/)){return p("rule",f)}else{if(f=='"'||f=="'"){e.tokenize=k(f);return e.tokenize(c,e)}else{if(c.eatWhile(/[a-zA-Z\?\+\d]/)){var d=c.current();if(d.substr(d.length-1,d.length).match(/\?|\+/)!==null){c.backUp(1)}return p("tag","tag")}else{if(f=="%"||f=="*"){return p("number","number")}else{c.eatWhile(/[\w\\\-_%.{,]/);return p(null,null)}}}}}}}}}}function a(c,d){var e=0,f;while((f=c.next())!=null){if(e>=2&&f==">"){d.tokenize=j;break}e=(f=="-")?e+1:0}return p("comment","comment")}function k(c){return function(g,e){var d=false,f;while((f=g.next())!=null){if(f==c&&!d){e.tokenize=j;break}d=!d&&f=="\\"}return p("string","tag")}}function m(c,d){return function(e,f){while(!e.eol()){if(e.match(d)){f.tokenize=j;break}e.next()}return c}}return{startState:function(c){return{tokenize:j,baseIndent:c||0,stack:[]}},token:function(c,d){if(c.eatSpace()){return null}var e=d.tokenize(c,d);var f=d.stack[d.stack.length-1];if(c.current()=="["||l==="doindent"||l=="["){d.stack.push("rule")}else{if(l==="endtag"){d.stack[d.stack.length-1]="endtag"}else{if(c.current()=="]"||l=="]"||(l==">"&&f=="rule")){d.stack.pop()}else{if(l=="["){d.stack.push("[")}}}}return e},indent:function(d,e){var c=d.stack.length;if(e.match(/\]\s+|\]/)){c=c-1}else{if(e.substr(e.length-1,e.length)===">"){if(e.substr(0,1)==="<"){}else{if(l=="doindent"&&e.length>1){}else{if(l=="doindent"){c--}else{if(l==">"&&e.length>1){}else{if(l=="tag"&&e!==">"){}else{if(l=="tag"&&d.stack[d.stack.length-1]=="rule"){c--}else{if(l=="tag"){c++}else{if(e===">"&&d.stack[d.stack.length-1]=="rule"&&l===">"){c--}else{if(e===">"&&d.stack[d.stack.length-1]=="rule"){}else{if(e.substr(0,1)!=="<"&&e.substr(0,1)===">"){c=c-1}else{if(e===">"){}else{c=c-1}}}}}}}}}}}if(l==null||l=="]"){c--}}}return d.baseIndent+c*o},electricChars:"]>"}});b.defineMIME("application/xml-dtd","dtd")});