(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("fcl",function(w){var s=w.indentUnit;var t={term:true,method:true,accu:true,rule:true,then:true,is:true,and:true,or:true,"if":true,"default":true};var v={var_input:true,var_output:true,fuzzify:true,defuzzify:true,function_block:true,ruleblock:true};var q={end_ruleblock:true,end_defuzzify:true,end_function_block:true,end_fuzzify:true,end_var:true};var r={"true":true,"false":true,nan:true,real:true,min:true,max:true,cog:true,cogs:true};var x=/[+\-*&^%:=<>!|\/]/;function u(c,e){var f=c.next();if(/[\d\.]/.test(f)){if(f=="."){c.match(/^[0-9]+([eE][\-+]?[0-9]+)?/)}else{if(f=="0"){c.match(/^[xX][0-9a-fA-F]+/)||c.match(/^0[0-7]+/)}else{c.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/)}}return"number"}if(f=="/"||f=="("){if(c.eat("*")){e.tokenize=o;return o(c,e)}if(c.eat("/")){c.skipToEnd();return"comment"}}if(x.test(f)){c.eatWhile(x);return"operator"}c.eatWhile(/[\w\$_\xa1-\uffff]/);var d=c.current().toLowerCase();if(t.propertyIsEnumerable(d)||v.propertyIsEnumerable(d)||q.propertyIsEnumerable(d)){return"keyword"}if(r.propertyIsEnumerable(d)){return"atom"}return"variable"}function o(c,d){var f=false,e;while(e=c.next()){if((e=="/"||e==")")&&f){d.tokenize=u;break}f=(e=="*")}return"comment"}function a(c,f,g,d,e){this.indented=c;this.column=f;this.type=g;this.align=d;this.prev=e}function p(c,e,d){return c.context=new a(c.indented,e,d,null,c.context)}function n(c){if(!c.context.prev){return}var d=c.context.type;if(d=="end_block"){c.indented=c.context.indented}return c.context=c.context.prev}return{startState:function(c){return{tokenize:null,context:new a((c||0)-s,0,"top",false),indented:0,startOfLine:true}},token:function(c,e){var g=e.context;if(c.sol()){if(g.align==null){g.align=false}e.indented=c.indentation();e.startOfLine=true}if(c.eatSpace()){return null}var f=(e.tokenize||u)(c,e);if(f=="comment"){return f}if(g.align==null){g.align=true}var d=c.current().toLowerCase();if(v.propertyIsEnumerable(d)){p(e,c.column(),"end_block")}else{if(q.propertyIsEnumerable(d)){n(e)}}e.startOfLine=false;return f},indent:function(c,e){if(c.tokenize!=u&&c.tokenize!=null){return 0}var f=c.context;var d=q.propertyIsEnumerable(e);if(f.align){return f.column+(d?0:1)}else{return f.indented+(d?0:s)}},electricChars:"ryk",fold:"brace",blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:"//"}});b.defineMIME("text/x-fcl","fcl")});