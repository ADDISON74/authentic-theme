(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(e){var d={autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true};var f={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};e.defineMode("xml",function(O,b){var H=O.indentUnit;var a={};var P=b.htmlMode?d:f;for(var V in P){a[V]=P[V]}for(var V in b){a[V]=b[V]}var U,T;function L(g,h){function j(l){h.tokenize=l;return l(g,h)}var i=g.next();if(i=="<"){if(g.eat("!")){if(g.eat("[")){if(g.match("CDATA[")){return j(c("atom","]]>"))}else{return null}}else{if(g.match("--")){return j(c("comment","-->"))}else{if(g.match("DOCTYPE",true,true)){g.eatWhile(/[\w\._\-]/);return j(K(1))}else{return null}}}}else{if(g.eat("?")){g.eatWhile(/[\w\._\-]/);h.tokenize=c("meta","?>");return"meta"}else{U=g.eat("/")?"closeTag":"openTag";h.tokenize=M;return"tag bracket"}}}else{if(i=="&"){var k;if(g.eat("#")){if(g.eat("x")){k=g.eatWhile(/[a-fA-F\d]/)&&g.eat(";")}else{k=g.eatWhile(/[\d]/)&&g.eat(";")}}else{k=g.eatWhile(/[\w\.\-:]/)&&g.eat(";")}return k?"atom":"error"}else{g.eatWhile(/[^&<]/);return null}}}L.isInText=true;function M(g,h){var i=g.next();if(i==">"||(i=="/"&&g.eat(">"))){h.tokenize=L;U=i==">"?"endTag":"selfcloseTag";return"tag bracket"}else{if(i=="="){U="equals";return null}else{if(i=="<"){h.tokenize=L;h.state=N;h.tagName=h.tagStart=null;var j=h.tokenize(g,h);return j?j+" tag error":"tag error"}else{if(/[\'\"]/.test(i)){h.tokenize=Q(i);h.stringStartCol=g.column();return h.tokenize(g,h)}else{g.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}}}}function Q(h){var g=function(i,j){while(!i.eol()){if(i.next()==h){j.tokenize=M;break}}return"string"};g.isInAttribute=true;return g}function c(g,h){return function(i,j){while(!i.eol()){if(i.match(h)){j.tokenize=L;break}i.next()}return g}}function K(g){return function(h,i){var j;while((j=h.next())!=null){if(j=="<"){i.tokenize=K(g+1);return i.tokenize(h,i)}else{if(j==">"){if(g==1){i.tokenize=L;break}else{i.tokenize=K(g-1);return i.tokenize(h,i)}}}}return"meta"}}function F(h,i,g){this.prev=h.context;this.tagName=i;this.indent=h.indented;this.startOfLine=g;if(a.doNotIndent.hasOwnProperty(i)||(h.context&&h.context.noIndent)){this.noIndent=true}}function C(g){if(g.context){g.context=g.context.prev}}function G(g,h){var i;while(true){if(!g.context){return}i=g.context.tagName;if(!a.contextGrabbers.hasOwnProperty(i)||!a.contextGrabbers[i].hasOwnProperty(h)){return}C(g)}}function N(i,g,h){if(i=="openTag"){h.tagStart=g.column();return X}else{if(i=="closeTag"){return D}else{return N}}}function X(i,g,h){if(i=="word"){h.tagName=g.current();T="tag";return W}else{T="error";return X}}function D(i,g,h){if(i=="word"){var j=g.current();if(h.context&&h.context.tagName!=j&&a.implicitlyClosed.hasOwnProperty(h.context.tagName)){C(h)}if((h.context&&h.context.tagName==j)||a.matchClosing===false){T="tag";return E}else{T="tag error";return J}}else{T="error";return J}}function E(h,i,g){if(h!="endTag"){T="error";return E}C(g);return N}function J(i,g,h){T="error";return E(i,g,h)}function W(h,j,g){if(h=="word"){T="attribute";return R}else{if(h=="endTag"||h=="selfcloseTag"){var i=g.tagName,k=g.tagStart;g.tagName=g.tagStart=null;if(h=="selfcloseTag"||a.autoSelfClosers.hasOwnProperty(i)){G(g,i)}else{G(g,i);g.context=new F(g,i,k==g.indented)}return N}}T="error";return W}function R(i,g,h){if(i=="equals"){return I}if(!a.allowMissing){T="error"}return W(i,g,h)}function I(i,g,h){if(i=="string"){return S}if(i=="word"&&a.allowUnquoted){T="string";return W}T="error";return W(i,g,h)}function S(i,g,h){if(i=="string"){return S}return W(i,g,h)}return{startState:function(h){var g={tokenize:L,state:N,indented:h||0,tagName:null,tagStart:null,context:null};if(h!=null){g.baseIndent=h}return g},token:function(g,h){if(!h.tagName&&g.sol()){h.indented=g.indentation()}if(g.eatSpace()){return null}U=null;var i=h.tokenize(g,h);if((i||U)&&i!="comment"){T=null;h.state=h.state(U||i,g,h);if(T){i=T=="error"?i+" error":T}}return i},indent:function(g,k,h){var i=g.context;if(g.tokenize.isInAttribute){if(g.tagStart==g.indented){return g.stringStartCol+1}else{return g.indented+H}}if(i&&i.noIndent){return e.Pass}if(g.tokenize!=M&&g.tokenize!=L){return h?h.match(/^(\s*)/)[0].length:0}if(g.tagName){if(a.multilineTagIndentPastTag!==false){return g.tagStart+g.tagName.length+2}else{return g.tagStart+H*(a.multilineTagIndentFactor||1)}}if(a.alignCDATA&&/<!\[CDATA\[/.test(k)){return 0}var l=k&&/^<(\/)?([\w_:\.-]*)/.exec(k);if(l&&l[1]){while(i){if(i.tagName==l[2]){i=i.prev;break}else{if(a.implicitlyClosed.hasOwnProperty(i.tagName)){i=i.prev}else{break}}}}else{if(l){while(i){var j=a.contextGrabbers[i.tagName];if(j&&j.hasOwnProperty(l[2])){i=i.prev}else{break}}}}while(i&&i.prev&&!i.startOfLine){i=i.prev}if(i){return i.indent+H}else{return g.baseIndent||0}},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:a.htmlMode?"html":"xml",helperType:a.htmlMode?"html":"xml",skipAttribute:function(g){if(g.state==I){g.state=W}}}});e.defineMIME("text/xml","xml");e.defineMIME("application/xml","xml");if(!e.mimeModes.hasOwnProperty("text/html")){e.defineMIME("text/html",{name:"xml",htmlMode:true})}});