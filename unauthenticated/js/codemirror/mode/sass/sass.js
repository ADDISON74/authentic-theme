(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"),require("../css/css"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../css/css"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("sass",function(A){var z=b.mimeModes["text/css"];var M=z.propertyKeywords||{},G=z.colorKeywords||{},D=z.valueKeywords||{},P=z.fontProperties||{};function L(c){return new RegExp("^"+c.join("|"))}var K=["true","false","null","auto"];var N=new RegExp("^"+K.join("|"));var E=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"];var F=L(E);var H=/^::?[a-zA-Z_][\w\-]*/;var C;function B(c){return !c.peek()||c.match(/\s+$/,false)}function Q(d,e){var c=d.peek();if(c===")"){d.next();e.tokenizer=a;return"operator"}else{if(c==="("){d.next();d.eatSpace();return"operator"}else{if(c==="'"||c==='"'){e.tokenizer=y(d.next());return"string"}else{e.tokenizer=y(")",false);return"string"}}}}function R(c,d){return function(e,f){if(e.sol()&&e.indentation()<=c){f.tokenizer=a;return a(e,f)}if(d&&e.skipTo("*/")){e.next();e.next();f.tokenizer=a}else{e.skipToEnd()}return"comment"}}function y(c,d){if(d==null){d=true}function e(h,k){var i=h.next();var f=h.peek();var g=h.string.charAt(h.pos-2);var j=((i!=="\\"&&f===c)||(i===c&&g!=="\\"));if(j){if(i!==c&&d){h.next()}if(B(h)){k.cursorHalf=0}k.tokenizer=a;return"string"}else{if(i==="#"&&f==="{"){k.tokenizer=J(e);h.next();return"operator"}else{return"string"}}}return e}function J(c){return function(d,e){if(d.peek()==="}"){d.next();e.tokenizer=c;return"operator"}else{return a(d,e)}}}function I(e){if(e.indentCount==0){e.indentCount++;var d=e.scopes[0].offset;var c=d+A.indentUnit;e.scopes.unshift({offset:c})}}function O(c){if(c.scopes.length==1){return}c.scopes.shift()}function a(e,f){var d=e.peek();if(e.match("/*")){f.tokenizer=R(e.indentation(),true);return f.tokenizer(e,f)}if(e.match("//")){f.tokenizer=R(e.indentation(),false);return f.tokenizer(e,f)}if(e.match("#{")){f.tokenizer=J(a);return"operator"}if(d==='"'||d==="'"){e.next();f.tokenizer=y(d);return"string"}if(!f.cursorHalf){if(d==="-"){if(e.match(/^-\w+-/)){return"meta"}}if(d==="."){e.next();if(e.match(/^[\w-]+/)){I(f);return"qualifier"}else{if(e.peek()==="#"){I(f);return"tag"}}}if(d==="#"){e.next();if(e.match(/^[\w-]+/)){I(f);return"builtin"}if(e.peek()==="#"){I(f);return"tag"}}if(d==="$"){e.next();e.eatWhile(/[\w-]/);return"variable-2"}if(e.match(/^-?[0-9\.]+/)){return"number"}if(e.match(/^(px|em|in)\b/)){return"unit"}if(e.match(N)){return"keyword"}if(e.match(/^url/)&&e.peek()==="("){f.tokenizer=Q;return"atom"}if(d==="="){if(e.match(/^=[\w-]+/)){I(f);return"meta"}}if(d==="+"){if(e.match(/^\+[\w-]+/)){return"variable-3"}}if(d==="@"){if(e.match(/@extend/)){if(!e.match(/\s*[\w]/)){O(f)}}}if(e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/)){I(f);return"def"}if(d==="@"){e.next();e.eatWhile(/[\w-]/);return"def"}if(e.eatWhile(/[\w-]/)){if(e.match(/ *: *[\w-\+\$#!\("']/,false)){C=e.current().toLowerCase();var c=f.prevProp+"-"+C;if(M.hasOwnProperty(c)){return"property"}else{if(M.hasOwnProperty(C)){f.prevProp=C;return"property"}else{if(P.hasOwnProperty(C)){return"property"}}}return"tag"}else{if(e.match(/ *:/,false)){I(f);f.cursorHalf=1;f.prevProp=e.current().toLowerCase();return"property"}else{if(e.match(/ *,/,false)){return"tag"}else{I(f);return"tag"}}}}if(d===":"){if(e.match(H)){return"variable-3"}e.next();f.cursorHalf=1;return"operator"}}else{if(d==="#"){e.next();if(e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/)){if(B(e)){f.cursorHalf=0}return"number"}}if(e.match(/^-?[0-9\.]+/)){if(B(e)){f.cursorHalf=0}return"number"}if(e.match(/^(px|em|in)\b/)){if(B(e)){f.cursorHalf=0}return"unit"}if(e.match(N)){if(B(e)){f.cursorHalf=0}return"keyword"}if(e.match(/^url/)&&e.peek()==="("){f.tokenizer=Q;if(B(e)){f.cursorHalf=0}return"atom"}if(d==="$"){e.next();e.eatWhile(/[\w-]/);if(B(e)){f.cursorHalf=0}return"variable-2"}if(d==="!"){e.next();f.cursorHalf=0;return e.match(/^[\w]+/)?"keyword":"operator"}if(e.match(F)){if(B(e)){f.cursorHalf=0}return"operator"}if(e.eatWhile(/[\w-]/)){if(B(e)){f.cursorHalf=0}C=e.current().toLowerCase();if(D.hasOwnProperty(C)){return"atom"}else{if(G.hasOwnProperty(C)){return"keyword"}else{if(M.hasOwnProperty(C)){f.prevProp=e.current().toLowerCase();return"property"}else{return"tag"}}}}if(B(e)){f.cursorHalf=0;return null}}if(e.match(F)){return"operator"}e.next();return null}function x(k,h){if(k.sol()){h.indentCount=0}var g=h.tokenizer(k,h);var c=k.current();if(c==="@return"||c==="}"){O(h)}if(g!==null){var f=k.pos-c.length;var d=f+(A.indentUnit*h.indentCount);var i=[];for(var e=0;e<h.scopes.length;e++){var j=h.scopes[e];if(j.offset<=d){i.push(j)}}h.scopes=i}return g}return{startState:function(){return{tokenizer:a,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(d,e){var c=x(d,e);e.lastToken={style:c,content:d.current()};return c},indent:function(c){return c.scopes[0].offset}}});b.defineMIME("text/x-sass","sass")});