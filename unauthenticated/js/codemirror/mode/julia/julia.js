(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("julia",function(M,D){function S(c,d){if(typeof d==="undefined"){d="\\b"}return new RegExp("^(("+c.join(")|(")+"))"+d)}var P="\\\\[0-7]{1,3}";var Z="\\\\x[A-Fa-f0-9]{1,2}";var ad="\\\\[abefnrtv0%?'\"\\\\]";var V="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])";var I=D.operators||S(["\\.?[\\\\%*+\\-<>!=\\/^]=?","\\.?[|&\\u00F7\\u2260\\u2264\\u2265]","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2229","\\u222A","\\u2286","\\u2288","\\u228A","\\u22c5","\\?","~",":","\\$","\\.[<>]","<<=?",">>>?=?","\\.[<>=]=","->?","\\/\\/","=>","<:","\\bin\\b(?!\\()"],"");var X=D.delimiters||/^[;,()[\]{}]/;var W=D.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var N=S([P,Z,ad,V],"'");var R=S(["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"]);var ab=S(["end","else","elseif","catch","finally"]);var U=S(["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"]);var aa=S(["true","false","nothing","NaN","Inf"]);var O=/^@[_A-Za-z][\w]*/;var H=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var T=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/;function E(c){return F(c,"[")}function F(e,c){var d=G(e),f=G(e,1);if(typeof(c)==="undefined"){c="("}if(d===c||(f===c&&d==="for")){return true}return false}function G(d,c){if(typeof(c)==="undefined"){c=0}if(d.scopes.length<=c){return null}return d.scopes[d.scopes.length-(c+1)]}function L(f,j){if(f.match(/^#=/,false)){j.tokenize=Q;return j.tokenize(f,j)}var e=j.leavingExpr;if(f.sol()){e=false}j.leavingExpr=false;if(e){if(f.match(/^'+/)){return"operator"}}if(f.match(/^\.{2,3}/)){return"operator"}if(f.eatSpace()){return null}var c=f.peek();if(c==="#"){f.skipToEnd();return"comment"}if(c==="["){j.scopes.push("[")}if(c==="("){j.scopes.push("(")}var d=G(j);if(E(j)&&c==="]"){if(d==="for"){j.scopes.pop()}j.scopes.pop();j.leavingExpr=true}if(F(j)&&c===")"){if(d==="for"){j.scopes.pop()}j.scopes.pop();j.leavingExpr=true}var i;if(i=f.match(R,false)){j.scopes.push(i[0])}if(f.match(ab,false)){j.scopes.pop()}if(E(j)){if(j.lastToken=="end"&&f.match(/^:/)){return"operator"}if(f.match(/^end/)){return"number"}}if(f.match(/^::(?![:\$])/)){j.tokenize=ac;return j.tokenize(f,j)}if(!e&&f.match(H)||f.match(/:\./)){return"builtin"}if(f.match(/^{[^}]*}(?=\()/)){return"builtin"}if(f.match(I)){return"operator"}if(f.match(/^[0-9\.]/,false)){var k=RegExp(/^im\b/);var h=false;if(f.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)){h=true}if(f.match(/^\d+\.(?!\.)\d*/)){h=true}if(f.match(/^\.\d+/)){h=true}if(f.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)){h=true}if(f.match(/^0x[0-9a-f]+/i)){h=true}if(f.match(/^0b[01]+/i)){h=true}if(f.match(/^0o[0-7]+/i)){h=true}if(f.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){h=true}if(f.match(/^0(?![\dx])/i)){h=true}if(h){f.match(k);j.leavingExpr=true;return"number"}}if(f.match(/^'/)){j.tokenize=K;return j.tokenize(f,j)}if(f.match(T)){j.tokenize=J(f.current());return j.tokenize(f,j)}if(f.match(O)){return"meta"}if(f.match(X)){return null}if(f.match(U)){return"keyword"}if(f.match(aa)){return"builtin"}var g=j.isDefinition||j.lastToken=="function"||j.lastToken=="macro"||j.lastToken=="type"||j.lastToken=="immutable";if(f.match(W)){if(g){if(f.peek()==="."){j.isDefinition=true;return"variable"}j.isDefinition=false;return"def"}if(f.match(/^({[^}]*})*\(/,false)){return a(f,j)}j.leavingExpr=true;return"variable"}f.next();return"error"}function a(c,d){var e=c.match(/^(\(\s*)/);if(e){if(d.firstParenPos<0){d.firstParenPos=d.scopes.length}d.scopes.push("(");d.charsAdvanced+=e[1].length}if(G(d)=="("&&c.match(/^\)/)){d.scopes.pop();d.charsAdvanced+=1;if(d.scopes.length<=d.firstParenPos){var f=c.match(/^\s*?=(?!=)/,false);c.backUp(d.charsAdvanced);d.firstParenPos=-1;d.charsAdvanced=0;if(f){return"def"}return"builtin"}}if(c.match(/^$/g,false)){c.backUp(d.charsAdvanced);while(d.scopes.length>d.firstParenPos){d.scopes.pop()}d.firstParenPos=-1;d.charsAdvanced=0;return"builtin"}d.charsAdvanced+=c.match(/^([^()]*)/)[1].length;return a(c,d)}function ac(c,d){c.match(/.*?(?=,|;|{|}|\(|\)|=|$|\s)/);if(c.match(/^{/)){d.nestedLevels++}else{if(c.match(/^}/)){d.nestedLevels--}}if(d.nestedLevels>0){c.match(/.*?(?={|})/)||c.next()}else{if(d.nestedLevels==0){d.tokenize=L}}return"builtin"}function Q(c,d){if(c.match(/^#=/)){d.nestedLevels++}if(!c.match(/.*?(?=(#=|=#))/)){c.skipToEnd()}if(c.match(/^=#/)){d.nestedLevels--;if(d.nestedLevels==0){d.tokenize=L}}return"comment"}function K(c,d){var f=false,g;if(c.match(N)){f=true}else{if(g=c.match(/\\u([a-f0-9]{1,4})(?=')/i)){var e=parseInt(g[1],16);if(e<=55295||e>=57344){f=true;c.next()}}else{if(g=c.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var e=parseInt(g[1],16);if(e<=1114111){f=true;c.next()}}}}if(f){d.leavingExpr=true;d.tokenize=L;return"string"}if(!c.match(/^[^']+(?=')/)){c.skipToEnd()}if(c.match(/^'/)){d.tokenize=L}return"error"}function J(d){if(d.substr(-3)==='"""'){d='"""'}else{if(d.substr(-1)==='"'){d='"'}}function c(e,f){if(e.eat("\\")){e.next()}else{if(e.match(d)){f.tokenize=L;f.leavingExpr=true;return"string"}else{e.eat(/[`"]/)}}e.eatWhile(/[^\\`"]/);return"string"}return c}var Y={startState:function(){return{tokenize:L,scopes:[],lastToken:null,leavingExpr:false,isDefinition:false,nestedLevels:0,charsAdvanced:0,firstParenPos:-1}},token:function(c,e){var f=e.tokenize(c,e);var d=c.current();if(d&&f){e.lastToken=d}if(d==="."){f=c.match(W,false)||c.match(O,false)||c.match(/\(/,false)?"operator":"error"}return f},indent:function(d,e){var c=0;if(e==="]"||e===")"||e==="end"||e==="else"||e==="catch"||e==="elseif"||e==="finally"){c=-1}return(d.scopes.length+c)*M.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",fold:"indent"};return Y});b.defineMIME("text/x-julia","julia")});