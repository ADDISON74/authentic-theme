(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(y){var B=["From","Sender","Reply-To","To","Cc","Bcc","Message-ID","In-Reply-To","References","Resent-From","Resent-Sender","Resent-To","Resent-Cc","Resent-Bcc","Resent-Message-ID","Return-Path","Received"];var w=["Date","Subject","Comments","Keywords","Resent-Date"];y.registerHelper("hintWords","mbox",B.concat(w));var A=/^[ \t]/;var t=/^From /;var v=new RegExp("^("+B.join("|")+"): ");var x=new RegExp("^("+w.join("|")+"): ");var u=/^[^:]+:/;var p=/^[^ ]+@[^ ]+/;var z=/^.*?(?=[^ ]+?@[^ ]+)/;var o=/^<.*?>/;var s=/^.*?(?=<.*>)/;function q(a){if(a==="Subject"){return"header"}return"string"}function r(a,b){if(a.sol()){b.inSeparator=false;if(b.inHeader&&a.match(A)){return null}else{b.inHeader=false;b.header=null}if(a.match(t)){b.inHeaders=true;b.inSeparator=true;return"atom"}var d;var e=false;if((d=a.match(x))||(e=true)&&(d=a.match(v))){b.inHeaders=true;b.inHeader=true;b.emailPermitted=e;b.header=d[1];return"atom"}if(b.inHeaders&&(d=a.match(u))){b.inHeader=true;b.emailPermitted=true;b.header=d[1];return"atom"}b.inHeaders=false;a.skipToEnd();return null}if(b.inSeparator){if(a.match(p)){return"link"}if(a.match(z)){return"atom"}a.skipToEnd();return"atom"}if(b.inHeader){var c=q(b.header);if(b.emailPermitted){if(a.match(o)){return c+" link"}if(a.match(s)){return c}}a.skipToEnd();return c}a.skipToEnd();return null}y.defineMode("mbox",function(){return{startState:function(){return{inSeparator:false,inHeader:false,emailPermitted:false,header:null,inHeaders:false}},token:r,blankLine:function(a){a.inHeaders=a.inSeparator=a.inHeader=false}}});y.defineMIME("application/mbox","mbox")});