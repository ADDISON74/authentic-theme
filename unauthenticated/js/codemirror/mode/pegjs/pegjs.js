(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"),require("../javascript/javascript"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../javascript/javascript"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("pegjs",function(f){var e=b.getMode(f,"javascript");function a(c){return c.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}return{startState:function(){return{inString:false,stringType:null,inComment:false,inCharacterClass:false,braced:0,lhs:true,localState:null}},token:function(c,i){if(c){if(!i.inString&&!i.inComment&&((c.peek()=='"')||(c.peek()=="'"))){i.stringType=c.peek();c.next();i.inString=true}}if(!i.inString&&!i.inComment&&c.match(/^\/\*/)){i.inComment=true}if(i.inString){while(i.inString&&!c.eol()){if(c.peek()===i.stringType){c.next();i.inString=false}else{if(c.peek()==="\\"){c.next();c.next()}else{c.match(/^.[^\\\"\']*/)}}}return i.lhs?"property string":"string"}else{if(i.inComment){while(i.inComment&&!c.eol()){if(c.match(/\*\//)){i.inComment=false}else{c.match(/^.[^\*]*/)}}return"comment"}else{if(i.inCharacterClass){while(i.inCharacterClass&&!c.eol()){if(!(c.match(/^[^\]\\]+/)||c.match(/^\\./))){i.inCharacterClass=false}}}else{if(c.peek()==="["){c.next();i.inCharacterClass=true;return"bracket"}else{if(c.match(/^\/\//)){c.skipToEnd();return"comment"}else{if(i.braced||c.peek()==="{"){if(i.localState===null){i.localState=b.startState(e)}var k=e.token(c,i.localState);var d=c.current();if(!k){for(var l=0;l<d.length;l++){if(d[l]==="{"){i.braced++}else{if(d[l]==="}"){i.braced--}}}}return k}else{if(a(c)){if(c.peek()===":"){return"variable"}return"variable-2"}else{if(["[","]","(",")"].indexOf(c.peek())!=-1){c.next();return"bracket"}else{if(!c.eatSpace()){c.next()}}}}}}}}}return null}}},"javascript")});