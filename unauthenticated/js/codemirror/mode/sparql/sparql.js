(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(b){b.defineMode("sparql",function(u){var r=u.indentUnit;var m;function p(c){return new RegExp("^(?:"+c.join("|")+")$","i")}var v=p(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]);var s=p(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]);var q=/[*+\-<>=&|\^\/!\?]/;function t(d,f){var c=d.next();m=null;if(c=="$"||c=="?"){if(c=="?"&&d.match(/\s/,false)){return"operator"}d.match(/^[\w\d]*/);return"variable-2"}else{if(c=="<"&&!d.match(/^[\s\u00a0=]/,false)){d.match(/^[^\s\u00a0>]*>?/);return"atom"}else{if(c=='"'||c=="'"){f.tokenize=a(c);return f.tokenize(d,f)}else{if(/[{}\(\),\.;\[\]]/.test(c)){m=c;return"bracket"}else{if(c=="#"){d.skipToEnd();return"comment"}else{if(q.test(c)){d.eatWhile(q);return"operator"}else{if(c==":"){d.eatWhile(/[\w\d\._\-]/);return"atom"}else{if(c=="@"){d.eatWhile(/[a-z\d\-]/i);return"meta"}else{d.eatWhile(/[_\w\d]/);if(d.eat(":")){d.eatWhile(/[\w\d_\-]/);return"atom"}var e=d.current();if(v.test(e)){return"builtin"}else{if(s.test(e)){return"keyword"}else{return"variable"}}}}}}}}}}}function a(c){return function(d,f){var e=false,g;while((g=d.next())!=null){if(g==c&&!e){f.tokenize=t;break}e=!e&&g=="\\"}return"string"}}function o(d,e,c){d.context={prev:d.context,indent:d.indent,col:c,type:e}}function n(c){c.indent=c.context.indent;c.context=c.context.prev}return{startState:function(){return{tokenize:t,context:null,indent:0,col:0}},token:function(d,e){if(d.sol()){if(e.context&&e.context.align==null){e.context.align=false}e.indent=d.indentation()}if(d.eatSpace()){return null}var c=e.tokenize(d,e);if(c!="comment"&&e.context&&e.context.align==null&&e.context.type!="pattern"){e.context.align=true}if(m=="("){o(e,")",d.column())}else{if(m=="["){o(e,"]",d.column())}else{if(m=="{"){o(e,"}",d.column())}else{if(/[\]\}\)]/.test(m)){while(e.context&&e.context.type=="pattern"){n(e)}if(e.context&&m==e.context.type){n(e);if(m=="}"&&e.context&&e.context.type=="pattern"){n(e)}}}else{if(m=="."&&e.context&&e.context.type=="pattern"){n(e)}else{if(/atom|string|variable/.test(c)&&e.context){if(/[\}\]]/.test(e.context.type)){o(e,"pattern",d.column())}else{if(e.context.type=="pattern"&&!e.context.align){e.context.align=true;e.context.col=d.column()}}}}}}}}return c},indent:function(d,c){var e=c&&c.charAt(0);var f=d.context;if(/[\]\}]/.test(e)){while(f&&f.type=="pattern"){f=f.prev}}var g=f&&e==f.type;if(!f){return 0}else{if(f.type=="pattern"){return f.col}else{if(f.align){return f.col+(g?0:1)}else{return f.indent+(g?0:r)}}}},lineComment:"#"}});b.defineMIME("application/sparql-query","sparql")});