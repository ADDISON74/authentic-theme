(function(b){if(typeof exports=="object"&&typeof module=="object"){b(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],b)}else{b(CodeMirror)}}})(function(n){var j={mscgen:{keywords:["msc"],options:["hscale","width","arcgradient","wordwraparcs"],constants:["true","false","on","off"],attributes:["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]},xu:{keywords:["msc","xu"],options:["hscale","width","arcgradient","wordwraparcs","watermark"],constants:["true","false","on","off","auto"],attributes:["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]},msgenny:{keywords:null,options:["hscale","width","arcgradient","wordwraparcs","watermark"],constants:["true","false","on","off","auto"],attributes:null,brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]}};n.defineMode("mscgen",function(c,b){var a=j[b&&b.language||"mscgen"];return{startState:k,copyState:i,token:m(a),lineComment:"#",blockCommentStart:"/*",blockCommentEnd:"*/"}});n.defineMIME("text/x-mscgen","mscgen");n.defineMIME("text/x-xu",{name:"mscgen",language:"xu"});n.defineMIME("text/x-msgenny",{name:"mscgen",language:"msgenny"});function l(a){return new RegExp("\\b("+a.join("|")+")\\b","i")}function h(a){return new RegExp("("+a.join("|")+")","i")}function k(){return{inComment:false,inString:false,inAttributeList:false,inScript:false}}function i(a){return{inComment:a.inComment,inString:a.inString,inAttributeList:a.inAttributeList,inScript:a.inScript}}function m(a){return function(b,c){if(b.match(h(a.brackets),true,true)){return"bracket"}if(!c.inComment){if(b.match(/\/\*[^\*\/]*/,true,true)){c.inComment=true;return"comment"}if(b.match(h(a.singlecomment),true,true)){b.skipToEnd();return"comment"}}if(c.inComment){if(b.match(/[^\*\/]*\*\//,true,true)){c.inComment=false}else{b.skipToEnd()}return"comment"}if(!c.inString&&b.match(/\"(\\\"|[^\"])*/,true,true)){c.inString=true;return"string"}if(c.inString){if(b.match(/[^\"]*\"/,true,true)){c.inString=false}else{b.skipToEnd()}return"string"}if(!!a.keywords&&b.match(l(a.keywords),true,true)){return"keyword"}if(b.match(l(a.options),true,true)){return"keyword"}if(b.match(l(a.arcsWords),true,true)){return"keyword"}if(b.match(h(a.arcsOthers),true,true)){return"keyword"}if(!!a.operators&&b.match(h(a.operators),true,true)){return"operator"}if(!!a.constants&&b.match(h(a.constants),true,true)){return"variable"}if(!a.inAttributeList&&!!a.attributes&&b.match(/\[/,true,true)){a.inAttributeList=true;return"bracket"}if(a.inAttributeList){if(a.attributes!==null&&b.match(l(a.attributes),true,true)){return"attribute"}if(b.match(/]/,true,true)){a.inAttributeList=false;return"bracket"}}b.next();return"base"}}});